<!--The following is the downloaded HTML source of the thedodo.com privacy policy that was archived on 2014-12-29.
 Please check the original snapshot on the Wayback Machine (https://web.archive.org/web/20141229150054id_/https%3A//www.thedodo.com/privacy-policy) for the most accurate reproduction.-->

<!DOCTYPE html><html lang="en"><!--<![endif]--><head>
    <!-- For iPhone 4 Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://static.rbl.ms/static/img/whitelabel/dodo/favicon114X114.png">
    <!-- For iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://static.rbl.ms/static/img/whitelabel/dodo/favicon72X72.png">
    <!-- For iPhone: -->
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://static.rbl.ms/static/img/whitelabel/dodo/favicon57X57.png">
    <!-- For All: -->
    <link rel="shortcut icon" href="https://static.rbl.ms/static/img/whitelabel/dodo/favicon16X16.ico">
	
   <meta name="twitter:card" content="photo">
<meta name="twitter:site" content="@dodo">

<meta name="twitter:creator" content="@dodo">


<meta name="twitter:creator:id" content="1604444052">


    
    <meta name="twitter:image" content="https://www.thedodo.com/static/img/whitelabel/dodo/dodo_image.png?1419865254">
    

<meta property="fb:app_id" content="565862726865595">
<meta property="og:type" content="website">

<meta property="og:url" content="https://www.thedodo.com/">


    <meta property="og:site_name" content="The Dodo">


    <meta property="og:image" content="https://media.rbl.ms/image?u=%2Fmedia%2FB5QMz8iCAAAQeA6.jpg%3Amedium&amp;ho=https%3A%2F%2Fpbs.twimg.com&amp;s=812&amp;h=0bbea70129ce93d06527135cbb39a672d0cf0aa19689bf1f8e09482f00b061f9&amp;size=origin&amp;c=3619836782&amp;1419865254">
    <meta property="og:title" content="The Dodo: For the love of animals">
    <meta property="og:description" content="Pass it on!">





	
    <meta charset="utf-8">
    
    <script src="//d15qhc0lu1ghnk.cloudfront.net/beacon.js" async=""></script><script async="" src="//www.google-analytics.com/analytics.js"></script><script id="twitter-wjs" src="https://platform.twitter.com/widgets.js"></script><script id="facebook-jssdk" src="//connect.facebook.net/en_US/sdk.js#xfbml=1&amp;version=v2.0&amp;appId=565862726865595"></script><script type="text/javascript">
    var _errs=["5159956559a8c70e09000442"];(function(a,b){a.onerror=function(){_errs.push(arguments)};
    var d=function(){var a=b.createElement("script"),c=b.getElementsByTagName("script")[0];
    a.src="//d15qhc0lu1ghnk.cloudfront.net/beacon.js";a.async=!0;
    c.parentNode.insertBefore(a,c)};a.addEventListener?a.addEventListener("load",d,!1):
    a.attachEvent("onload",d)})(window,document);
    </script>
    
    
        
    
    
    <!--script type="text/javascript">
        (typeof document.documentElement.style.maxHeight === 'undefined' || document.documentMode < 8) && document.write('<meta http-equiv="refresh" content="0; url=https://static.rbl.ms/static/pages/modern-browser.html">');
    </script-->
    
    <meta name="google-site-verification" content="Kl4I7qPKJFthScnWAUSSvwIkK2ftHHrHS5_0PQBnwno">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    


<script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script>


<link href="https://plus.google.com/113829202323688139474" rel="publisher">


<meta name="p:domain_verify" content="31bd33143e2c53c68b8373c1e34bf7eb">


    <!-- Mobile viewport optimized: h5bp.com/viewport -->

    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">

    
    <title>
The Dodo : For the Love of Animals
</title>
    
    
    
    <link rel="stylesheet" href="https://static.rbl.ms/static/css-build/frontpage_whitelabel_core.css?v=867a6d84178dda0659cf3eaf587b3cae">
    

    
    
    <script type="text/javascript">
       var requirejs,require,define;(function(global){function isFunction(e){return ostring.call(e)==="[object Function]"}function isArray(e){return ostring.call(e)==="[object Array]"}function each(e,t){if(e){var n;for(n=0;n<e.length;n+=1)if(e[n]&&t(e[n],n,e))break}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1;n-=1)if(e[n]&&t(e[n],n,e))break}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,r){return t&&eachProp(t,function(t,i){if(n||!hasProp(e,i))r&&typeof t=="object"&&t&&!isArray(t)&&!isFunction(t)&&!(t instanceof RegExp)?(e[i]||(e[i]={}),mixin(e[i],t,n,r)):e[i]=t}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function m(e){var t,n;for(t=0;t<e.length;t++){n=e[t];if(n===".")e.splice(t,1),t-=1;else if(n===".."){if(t===0||t==1&&e[2]===".."||e[t-1]==="..")continue;t>0&&(e.splice(t-1,2),t-=2)}}}function g(e,t,n){var r,i,s,u,a,f,l,c,h,p,d,v,g=t&&t.split("/"),y=o.map,b=y&&y["*"];e&&(e=e.split("/"),l=e.length-1,o.nodeIdCompat&&jsSuffixRegExp.test(e[l])&&(e[l]=e[l].replace(jsSuffixRegExp,"")),e[0].charAt(0)==="."&&g&&(v=g.slice(0,g.length-1),e=v.concat(e)),m(e),e=e.join("/"));if(n&&y&&(g||b)){s=e.split("/");e:for(u=s.length;u>0;u-=1){f=s.slice(0,u).join("/");if(g)for(a=g.length;a>0;a-=1){i=getOwn(y,g.slice(0,a).join("/"));if(i){i=getOwn(i,f);if(i){c=i,h=u;break e}}}!p&&b&&getOwn(b,f)&&(p=getOwn(b,f),d=u)}!c&&p&&(c=p,h=d),c&&(s.splice(0,h,c),e=s.join("/"))}return r=getOwn(o.pkgs,e),r?r:e}function y(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===r.contextName)return t.parentNode.removeChild(t),!0})}function b(e){var t=getOwn(o.paths,e);if(t&&isArray(t)&&t.length>1)return t.shift(),r.require.undef(e),r.makeRequire(null,{skipMap:!0})([e]),!0}function w(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function E(e,t,n,i){var s,o,u,a,f=null,l=t?t.name:null,h=e,p=!0,m="";return e||(p=!1,e="_@r"+(d+=1)),a=w(e),f=a[0],e=a[1],f&&(f=g(f,l,i),o=getOwn(c,f)),e&&(f?o&&o.normalize?m=o.normalize(e,function(e){return g(e,l,i)}):m=e.indexOf("!")===-1?g(e,l,i):e:(m=g(e,l,i),a=w(m),f=a[0],m=a[1],n=!0,s=r.nameToUrl(m))),u=f&&!o&&!n?"_unnormalized"+(v+=1):"",{prefix:f,name:m,parentMap:t,unnormalized:!!u,url:s,originalName:h,isDefine:p,id:(f?f+"!"+m:m)+u}}function S(e){var t=e.id,n=getOwn(u,t);return n||(n=u[t]=new r.Module(e)),n}function x(e,t,n){var r=e.id,i=getOwn(u,r);hasProp(c,r)&&(!i||i.defineEmitComplete)?t==="defined"&&n(c[r]):(i=S(e),i.error&&t==="error"?n(i.error):i.on(t,n))}function T(e,t){var n=e.requireModules,r=!1;t?t(e):(each(n,function(t){var n=getOwn(u,t);n&&(n.error=e,n.events.error&&(r=!0,n.emit("error",e)))}),r||req.onError(e))}function N(){globalDefQueue.length&&(apsp.apply(l,[l.length,0].concat(globalDefQueue)),globalDefQueue=[])}function C(e){delete u[e],delete a[e]}function k(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,i){var s=r.id,o=getOwn(u,s);o&&!e.depMatched[i]&&!n[s]&&(getOwn(t,s)?(e.defineDep(i,c[s]),e.check()):k(o,t,n))}),n[r]=!0)}function L(){var e,n,i=o.waitSeconds*1e3,u=i&&r.startTime+i<(new Date).getTime(),f=[],l=[],c=!1,h=!0;if(t)return;t=!0,eachProp(a,function(e){var t=e.map,r=t.id;if(!e.enabled)return;t.isDefine||l.push(e);if(!e.error)if(!e.inited&&u)b(r)?(n=!0,c=!0):(f.push(r),y(r));else if(!e.inited&&e.fetched&&t.isDefine){c=!0;if(!t.prefix)return h=!1}});if(u&&f.length)return e=makeError("timeout","Load timeout for modules: "+f,null,f),e.contextName=r.contextName,T(e);h&&each(l,function(e){k(e,{},{})}),(!u||n)&&c&&(isBrowser||isWebWorker)&&!s&&(s=setTimeout(function(){s=0,L()},50)),t=!1}function A(e){hasProp(c,e[0])||S(E(e[0],null,!0)).init(e[1],e[2])}function O(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function M(e){var t=e.currentTarget||e.srcElement;return O(t,r.onScriptLoad,"load","onreadystatechange"),O(t,r.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function _(){var e;N();while(l.length){e=l.shift();if(e[0]===null)return T(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));A(e)}}var t,n,r,i,s,o={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},u={},a={},f={},l=[],c={},h={},p={},d=1,v=1;return i={require:function(e){return e.require?e.require:e.require=r.makeRequire(e.map)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports?c[e.map.id]=e.exports:e.exports=c[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(o.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},n=function(e){this.events=getOwn(f,e.id)||{},this.map=e,this.shim=getOwn(o.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},n.prototype={init:function(e,t,n,r){r=r||{};if(this.inited)return;this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check()},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(this.fetched)return;this.fetched=!0,r.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();r.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))},load:function(){var e=this.map.url;h[e]||(h[e]=!0,r.load(this.map.id,e))},check:function(){if(!this.enabled||this.enabling)return;var e,t,n=this.map.id,i=this.depExports,s=this.exports,o=this.factory;if(!this.inited)this.fetch();else if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{s=r.execCb(n,o,i,s)}catch(u){e=u}else s=r.execCb(n,o,i,s);this.map.isDefine&&s===undefined&&(t=this.module,t?s=t.exports:this.usingExports&&(s=this.exports));if(e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",T(this.error=e)}else s=o;this.exports=s,this.map.isDefine&&!this.ignore&&(c[n]=s,req.onResourceLoad&&req.onResourceLoad(r,this.map,this.depMaps)),C(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}},callPlugin:function(){var e=this.map,t=e.id,n=E(e.prefix);this.depMaps.push(n),x(n,"defined",bind(this,function(n){var i,s,a,f=getOwn(p,this.map.id),l=this.map.name,c=this.map.parentMap?this.map.parentMap.name:null,h=r.makeRequire(e.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){n.normalize&&(l=n.normalize(l,function(e){return g(e,c,!0)})||""),s=E(e.prefix+"!"+l,this.map.parentMap),x(s,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),a=getOwn(u,s.id),a&&(this.depMaps.push(s),this.events.error&&a.on("error",bind(this,function(e){this.emit("error",e)})),a.enable());return}if(f){this.map.url=r.nameToUrl(f),this.load();return}i=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(u,function(e){e.map.id.indexOf(t+"_unnormalized")===0&&C(e.map.id)}),T(e)}),i.fromText=bind(this,function(n,s){var u=e.name,a=E(u),f=useInteractive;s&&(n=s),f&&(useInteractive=!1),S(a),hasProp(o.config,t)&&(o.config[u]=o.config[t]);try{req.exec(n)}catch(l){return T(makeError("fromtexteval","fromText eval for "+t+" failed: "+l,l,[t]))}f&&(useInteractive=!0),this.depMaps.push(a),r.completeLoad(u),h([u],i)}),n.load(e.name,h,i,o)})),r.enable(n,this),this.pluginMaps[n.id]=n},enable:function(){a[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,s,o;if(typeof e=="string"){e=E(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,o=getOwn(i,e.id);if(o){this.depExports[t]=o(this);return}this.depCount+=1,x(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&x(e,"error",bind(this,this.errback))}n=e.id,s=u[n],!hasProp(i,n)&&s&&!s.enabled&&r.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(u,e.id);t&&!t.enabled&&r.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),e==="error"&&delete this.events[e]}},r={config:o,contextName:e,registry:u,defined:c,urlFetched:h,defQueue:l,Module:n,makeModuleMap:E,nextTick:req.nextTick,onError:T,configure:function(e){e.baseUrl&&e.baseUrl.charAt(e.baseUrl.length-1)!=="/"&&(e.baseUrl+="/");var t=o.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?(o[t]||(o[t]={}),mixin(o[t],e,!0,!0)):o[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(p[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,n){isArray(e)&&(e={deps:e}),(e.exports||e.init)&&!e.exportsFn&&(e.exportsFn=r.makeShimExports(e)),t[n]=e}),o.shim=t),e.packages&&each(e.packages,function(e){var t,n;e=typeof e=="string"?{name:e}:e,n=e.name,t=e.location,t&&(o.paths[n]=e.location),o.pkgs[n]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(u,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=E(t))}),(e.deps||e.callback)&&r.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,n){function s(o,a,f){var l,h,p;return n.enableBuildCallback&&a&&isFunction(a)&&(a.__requireJsBuild=!0),typeof o=="string"?isFunction(a)?T(makeError("requireargs","Invalid require call"),f):t&&hasProp(i,o)?i[o](u[t.id]):req.get?req.get(r,o,t,s):(h=E(o,t,!1,!0),l=h.id,hasProp(c,l)?c[l]:T(makeError("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(_(),r.nextTick(function(){_(),p=S(E(null,t)),p.skipMap=n.skipMap,p.init(o,a,f,{enabled:!0}),L()}),s)}return n=n||{},mixin(s,{isBrowser:isBrowser,toUrl:function(e){var n,i=e.lastIndexOf("."),s=e.split("/")[0],o=s==="."||s==="..";return i!==-1&&(!o||i>1)&&(n=e.substring(i,e.length),e=e.substring(0,i)),r.nameToUrl(g(e,t&&t.id,!0),n,!0)},defined:function(e){return hasProp(c,E(e,t,!1,!0).id)},specified:function(e){return e=E(e,t,!1,!0).id,hasProp(c,e)||hasProp(u,e)}}),t||(s.undef=function(e){N();var n=E(e,t,!0),r=getOwn(u,e);y(e),delete c[e],delete h[n.url],delete f[e],eachReverse(l,function(t,n){t[0]===e&&l.splice(n,1)}),r&&(r.events.defined&&(f[e]=r.events),C(e))}),s},enable:function(e){var t=getOwn(u,e.id);t&&S(e).enable()},completeLoad:function(e){var t,n,r,i=getOwn(o.shim,e)||{},s=i.exports;N();while(l.length){n=l.shift();if(n[0]===null){n[0]=e;if(t)break;t=!0}else n[0]===e&&(t=!0);A(n)}r=getOwn(u,e);if(!t&&!hasProp(c,e)&&r&&!r.inited){if(o.enforceDefine&&(!s||!getGlobal(s))){if(b(e))return;return T(makeError("nodefine","No define call for "+e,null,[e]))}A([e,i.deps||[],i.exportsFn])}L()},nameToUrl:function(e,t,n){var i,s,u,a,f,l,c,h=getOwn(o.pkgs,e);h&&(e=h),c=getOwn(p,e);if(c)return r.nameToUrl(c,t,n);if(req.jsExtRegExp.test(e))f=e+(t||"");else{i=o.paths,s=e.split("/");for(u=s.length;u>0;u-=1){a=s.slice(0,u).join("/"),l=getOwn(i,a);if(l){isArray(l)&&(l=l[0]),s.splice(0,u,l);break}}f=s.join("/"),f+=t||(/^data\:|\?/.test(f)||n?"":".js"),f=(f.charAt(0)==="/"||f.match(/^[\w\+\.\-]+:/)?"":o.baseUrl)+f}return o.urlArgs?f+((f.indexOf("?")===-1?"?":"&")+o.urlArgs):f},load:function(e,t){req.load(r,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if(e.type==="load"||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=M(e);r.completeLoad(t.id)}},onScriptError:function(e){var t=M(e);if(!b(t.id))return T(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},r.require=r.makeRequire(),r}function getInteractiveScript(){return interactiveScript&&interactiveScript.readyState==="interactive"?interactiveScript:(eachReverse(scripts(),function(e){if(e.readyState==="interactive")return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.15",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=typeof window!="undefined"&&typeof navigator!="undefined"&&!!window.document,isWebWorker=!isBrowser&&typeof importScripts!="undefined",readyRegExp=isBrowser&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera=typeof opera!="undefined"&&opera.toString()==="[object Opera]",contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(typeof define!="undefined")return;if(typeof requirejs!="undefined"){if(isFunction(requirejs))return;cfg=requirejs,requirejs=undefined}typeof require!="undefined"&&!isFunction(require)&&(cfg=require,require=undefined),req=requirejs=function(e,t,n,r){var i,s,o=defContextName;return!isArray(e)&&typeof e!="string"&&(s=e,isArray(t)?(e=t,t=n,n=r):e=[]),s&&s.context&&(o=s.context),i=getOwn(contexts,o),i||(i=contexts[o]=req.s.newContext(o)),s&&i.configure(s),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=typeof setTimeout!="undefined"?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var r=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=e.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(e,t,n){var r=e&&e.config||{},i;if(isBrowser)return i=req.createNode(r,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),i.attachEvent&&!(i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0)&&!isOpera?(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)):(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(s){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,s,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){head||(head=e.parentNode),dataMain=e.getAttribute("data-main");if(dataMain)return mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,n){var r,i;typeof e!="string"&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(n.length===1?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),(i?i.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)})(this);
(function (r) {
    r.console || (r.console = {});typeof r.console.log !== 'function' && (r.console.log = function() {});
    typeof r.console.error !== 'function' && (r.console.error = function() {});
    if (typeof Function.prototype.bind === 'undefined') {Function.prototype.bind = function(){var fn=this,args=[].slice.call(arguments), object=args.shift(); return function () {return fn.apply(object, args.concat(Array.prototype.slice.call(arguments)));}}};
    if (typeof r.addEventListener === 'undefined') { r.addEventListener = function (type, listener, useCapture) {return r.attachEvent('on' + type, listener);};}
    r.require({ baseUrl: 'https://static.rbl.ms/static/js-build', paths: {"widgets/views/approvals": "widgets/views/approvals.js?v=9f0a6416570ee94483fc40647c965616", "jquery.redactor": "libs/jquery/plugins/redactor.js?v=ec9f12a2db76b2e0723f630ff81d66e3", "widgets/models/dashboard/stats/pager": "widgets/models/dashboard/stats/pager.js?v=fd1336183f3ca9dc85b0a4320f57c756", "whitelabel/widgets/views/edit_mode/edit": "whitelabel/widgets/views/edit_mode/edit.js?v=8fd422263cd708f682d046eeee4b4714", "whitelabel/apps/frontpage": "whitelabel/apps/frontpage.js?v=5af6b42cbf09cd58e83a3c669cf68bdc", "whitelabel/apps/drafts": "whitelabel/apps/drafts.js?v=ccb0e3512bd44414c114754ce00f97bd", "widgets/views/dashboard/stats/insights": "widgets/views/dashboard/stats/insights.js?v=1ece36e9350cd68140e6d8fa26bb352b", "widgets/views/charts/referrers": "widgets/views/charts/referrers.js?v=f532525ad5df81f6cee20283710c2fc4", "widgets/views/dashboard_email": "widgets/views/dashboard_email.js?v=62ba8f15c4b27fa211a929fcfd1d2843", "libs/require/plugins/is/is": "libs/require/plugins/is/is.js?v=f9d7055256360063ca2014ebd7e74da3", "roar/weightwatchers/what-can-i-eat": "roar/weightwatchers/what-can-i-eat.js?v=24678e4638fbb969b6fe3fa03b77e306", "widgets/views/dashboard/sharing/post": "widgets/views/dashboard/sharing/post.js?v=6727e10d3e757f0aa73a415cb2e038ae", "widgets/views/dashboard/content_feeds/review": "widgets/views/dashboard/content_feeds/review.js?v=04efbdfd2107b872e5c9fad0b4d97eaa", "is-api": "libs/require/plugins/is/is-api.js?v=0309451e185e8f775cc8ce88bb843b57", "widgets/views/posts/edit_mode/stats_section": "widgets/views/posts/edit_mode/stats_section.js?v=bae98b3e91c2657fe91b13a49704e250", "apps/dashboard": "apps/dashboard.js?v=9ad639a1cfbb4226cd67ef2c5b79ad9a", "roar/apps/searchpage": "roar/apps/searchpage.js?v=99520b4202584b35a07843ff18f4f4df", "widgets/views/subpages_edit_lightbox": "widgets/views/subpages_edit_lightbox.js?v=b0cd0b319a878e8b6462cbe14c890aea", "widgets/views/more_button": "widgets/views/more_button.js?v=066987939c1cf97e97e10e27fe98e282", "widgets/managers/post_edit_mode": "widgets/managers/post_edit_mode.js?v=50ae3b65f71ddeea3ea1b02f54c111bc", "widgets/views/posts/edit_mode/media_form": "widgets/views/posts/edit_mode/media_form.js?v=ef46598a558b77c6432b5f2f56663576", "utils/legacy_browser": "utils/legacy_browser.js?v=1cf48f02e1ee44bcc7f1e42ec3326c63", "utils/sharer": "utils/sharer.js?v=9812a2ad92bd9ad09d4f5aab71741138", "underscore": "libs/underscore/underscore.js?v=8f54c69fbc50d714124ad615c40651e5", "widgets/views/dashboard_select_site": "widgets/views/dashboard_select_site.js?v=0e62b00255387028877e4bdbd32e74da", "widgets/views/payment/power_site": "widgets/views/payment/power_site.js?v=9e1f1b1ff12f6cb6f292ee3af3286455", "widgets/views/dashboard_river": "widgets/views/dashboard_river.js?v=acc50f05fe3124ca69e62ec4fc3457ae", "widgets/views/design_editor": "widgets/views/design_editor.js?v=28ddba8627ed345553bb337022b8630e", "roar/weightwatchers/in-the-workplace": "roar/weightwatchers/in-the-workplace.js?v=4149d610ba5cad1dcb371e2fa8e16d71", "whitelabel/widgets/views/edit_mode/content_section": "whitelabel/widgets/views/edit_mode/content_section.js?v=54c292f22141324fa46cc71ad9e93fa2", "widgets/views/dashboard_drafts": "widgets/views/dashboard_drafts.js?v=26fc34eb8fcee95606ede9e2219a8b3c", "widgets/templates/campaigns/themes/dodo": "widgets/templates/campaigns/themes/dodo.js?v=214fa74e5750fa018c9be8ac9c5699c6", "widgets/views/draft/drafts": "widgets/views/draft/drafts.js?v=59339d9be7f6adf2b2b90265c4bbceb1", "widgets/views/posts/edit_mode/restick": "widgets/views/posts/edit_mode/restick.js?v=ac56625d2314e563054afe8514a57415", "whitelabel/apps/dodo/signup": "whitelabel/apps/dodo/signup.js?v=74deaec730fca84a837d581a66220e85", "widgets/views/posts/edit_mode/edit": "widgets/views/posts/edit_mode/edit.js?v=0f6ac07eef33e6b00464a7cc16cdda07", "widgets/views/charts/engagements": "widgets/views/charts/engagements.js?v=7e19490179142a83324721e56e1b83cb", "jquery.redactor.v10": "libs/jquery/plugins/redactorv10.js?v=c0cd36012cebaeb291ac2cecd6fe55e3", "widgets/views/campaign_header": "widgets/views/campaign_header.js?v=7abf3e749c6c7fa0d96d3a08f90b6368", "whitelabel/widgets/views/edit_mode/restick": "whitelabel/widgets/views/edit_mode/restick.js?v=8fe91ff707bbdfb3267690ec6c12e112", "widgets/views/dashboard_sections": "widgets/views/dashboard_sections.js?v=75bdc0edab9824180a9bc2b7a9017f1f", "widgets/views/frontpage_about_site": "widgets/views/frontpage_about_site.js?v=9d6409af054c19c7cf0a22cb4534a899", "roar/devwatchers/app": "roar/devwatchers/app.js?v=ba749df8f8c06c7e8588ca43ff5c2a27", "widgets/views/dashboard/stats/post_card": "widgets/views/dashboard/stats/post_card.js?v=b55bac41fd99375202145f335272db96", "widgets/views/carrousel_widget": "widgets/views/carrousel_widget.js?v=9356d82e5bde55842ae9fc5a25fec236", "widgets/views/post_page_base": "widgets/views/post_page_base.js?v=439fa3b47f8c00942525856f5c3a1776", "widgets/views/comments/community_comments": "widgets/views/comments/community_comments.js?v=2dbbf91ede69b31cb0fdfd162a431a6c", "widgets/views/river/posts": "widgets/views/river/posts.js?v=dc617486830584d568a667c66bafe3b6", "roar/devwatchers/products-and-services": "roar/devwatchers/products-and-services.js?v=f4c8c7e5f2025ac89c03ac61bc07475a", "tooltip": "widgets/views/tooltip.js?v=9f42a3c21de764fb1d05661fa933978c", "widgets/views/dashboard_help": "widgets/views/dashboard_help.js?v=57e33a9bbe12e402a1426b7af56318c6", "widgets/views/edit_image": "widgets/views/edit_image.js?v=a426ec77fccf78b7f0a76d85fa730f88", "widgets/views/dashboard_newsletter": "widgets/views/dashboard_newsletter.js?v=69e4f95b65621776c1b2abe8a880b155", "widgets/templates/campaigns/themes/taiji": "widgets/templates/campaigns/themes/taiji.js?v=9cf5052d630bf740cc3c2f8a8d143254", "sprintf": "libs/sprintf/sprintf.js?v=d3457b5ee96e1d79e0a140f969bd2690", "apps/postpage": "apps/postpage.js?v=1a6762baccd5494dec6f351829eace39", "roar/weightwatchers/toggle-questions": "roar/weightwatchers/toggle-questions.js?v=ead14277702f9562808dea459bb39c96", "widgets/views/dashboard/stats/old_stats": "widgets/views/dashboard/stats/old_stats.js?v=c3d4523b82b8b9583d0758c136ad03f3", "widgets/views/comments/comments": "widgets/views/comments/comments.js?v=91947fdd7fa3977a374c4fb21f2c1264", "hogan": "libs/hogan/hogan.js?v=7437f860ca3660f73c6565c6fe47b472", "widgets/views/charts/types/pie": "widgets/views/charts/types/pie.js?v=dddddbccda6ab183ed5b15bd05d5bb8d", "roar/devwatchers/toggle-questions": "roar/devwatchers/toggle-questions.js?v=2cdf586085d7b600a87acc8c562b9814", "widgets/views/posts/edit_mode/content_section": "widgets/views/posts/edit_mode/content_section.js?v=ee5368f7034c79948783e4a8145f6661", "wl": "libs/require/plugins/is/whitelabel.js?v=b8e8d2e0415abdbd041cdd7e8b3f2b2b", "widgets/templates/campaigns/themes/wolves": "widgets/templates/campaigns/themes/wolves.js?v=d328236f467f4039e107195e7394b90c", "widgets/views/frontpage/top_modules/post_approval": "widgets/views/frontpage/top_modules/post_approval.js?v=19739d582bc55ff3e16c9d5b34bb7fd5", "whitelabel/widgets/views/edit_mode/advanced_section": "whitelabel/widgets/views/edit_mode/advanced_section.js?v=63cd2f4ba1b253a694b68fb1325e21d9", "widgets/views/dashboard_embed": "widgets/views/dashboard_embed.js?v=a6483da056e90ba976df56d73a786a3d", "widgets/views/dashboard_stages": "widgets/views/dashboard_stages.js?v=c37214266e1bab3bc9ad4502ed494573", "jquery.rm_autocomplete": "libs/jquery/plugins/jquery.rm_autocomplete.js?v=ed18aadd8f632781a34cfc318cb03db2", "roar/weightwatchers/health-solutions": "roar/weightwatchers/health-solutions.js?v=893a8c7355fa3c6c36ec87f6929b4188", "roar/weightwatchers/products-and-services": "roar/weightwatchers/products-and-services.js?v=1e5039ded79b364c6a47f908b6a97357", "apps/submissions": "apps/submissions.js?v=7f4c290397d076f21e7bfe52ed16324d", "widgets/views/charts/types/area": "widgets/views/charts/types/area.js?v=895434bdb1aed99ddedb87b26bc0bd6c", "widgets/views/posts/edit_mode/advanced_section": "widgets/views/posts/edit_mode/advanced_section.js?v=2d44442d24d04d0462337d36d96e0e6f", "apps/signup": "apps/signup.js?v=808ffc64935ee1136db75d3832b03c7c", "roar/betawatchers/products-and-services": "roar/betawatchers/products-and-services.js?v=2ca8c64b911ee5c24d7f48e0f6c2d692", "widgets/views/dashboard_account": "widgets/views/dashboard_account.js?v=c08ee91fd775e2de6abc8ff25b63f912", "widgets/views/stats": "widgets/views/stats.js?v=f60aef266d705f5176551e51987bcfef", "highcharts": "libs/highcharts/highcharts.js?v=4a54969da2cbab55ef31c35feb1894ed", "widgets/views/frontpage/top_modules/shoutout": "widgets/views/frontpage/top_modules/shoutout.js?v=4d6581d3040d263401ce2a226afdbf69", "whitelabel/widgets/views/edit_mode/submissions": "whitelabel/widgets/views/edit_mode/submissions.js?v=1aad6930950a4b0912ca08a34783b2f3", "roar/betawatchers/health-solutions": "roar/betawatchers/health-solutions.js?v=5e1c7f33f7e681b34ecdac9908253992", "widgets/views/frozen_informer": "widgets/views/frozen_informer.js?v=41fecaa2c92b210c9fe71b181c326b02", "utils/navigate": "utils/navigate.js?v=40e613cf38ead1f913379c131ce89592", "roar/widgets/routers/frontpage": "roar/widgets/routers/frontpage.js?v=68924ad0507e1ed1fcbfed3a5b2aa278", "roar/betawatchers/toggle-questions": "roar/betawatchers/toggle-questions.js?v=cbe24487d73c13c9e2db1971710a784c", "roar/betawatchers/what-can-i-eat": "roar/betawatchers/what-can-i-eat.js?v=b691fb37dec7b220902230947e36db70", "apps/embedded_widget": "apps/embedded_widget.js?v=0a223316228bb854c0c0aa111ad9536a", "widgets/views/posts/edit_mode/bookmarklet": "widgets/views/posts/edit_mode/bookmarklet.js?v=60a0bf7f5daf126c5c961edfbda9fcaa", "widgets/views/dashboard_facebook_in": "widgets/views/dashboard_facebook_in.js?v=6c432ffdfed61cb0e5c08ce999f24e5b", "jquery.slider": "libs/jquery/plugins/jquery.slides.js?v=e368105a9bf7f2b9e171ce7f863d0328", "apps/welcome": "apps/welcome.js?v=290b634effdeddc628e3db52c6c3fbc2", "whitelabel/widgets/views/edit_mode/add": "whitelabel/widgets/views/edit_mode/add.js?v=c9a7c7edaa042fd4bb2529fa4433e424", "widgets/views/river/sidebar": "widgets/views/river/sidebar.js?v=21dd15138f643a4f43071b9c0c5c4170", "roar/weightwatchers/app": "roar/weightwatchers/app.js?v=473a991f28c366fe56d9dff848da44bf", "roar/weightwatchers/toggle-popup-questions": "roar/weightwatchers/toggle-popup-questions.js?v=d7e1c6dfd7ef43d468be8ac807266054", "jquery.placeholder": "libs/jquery/plugins/jquery.placeholder.js?v=3e3053506cfd4076c28dd7ee4da4f75a", "widgets/views/dashboard/stats/ad_stats": "widgets/views/dashboard/stats/ad_stats.js?v=a135f09a04cdf41be84d45eed898d34d", "jquery.scrollDepth": "libs/jquery/plugins/jquery.scrolldepth.js?v=142692a5410ba18f5519fd4cbebcd42c", "widgets/views/dashboard_sites": "widgets/views/dashboard_sites.js?v=1edd96ef77ac2c63752cb28225167b03", "utils/settings_methods": "utils/settings_methods.js?v=cfe1d966f3f04f364782eeed61c9426e", "widgets/views/follow_button": "widgets/views/follow_button.js?v=5c56665d299d8891c52844a33f1438dd", "jquery.fittext": "libs/jquery/plugins/jquery.fittext.js?v=31e95bf3c593b6dc39539e30a373f39e", "roar/betawatchers/popup-questions": "roar/betawatchers/popup-questions.js?v=6c028029b33b38f789e287ace55ba05c", "is": "libs/require/plugins/is/is.js?v=f9d7055256360063ca2014ebd7e74da3", "widgets/views/posts/edit_mode/submissions_selector": "widgets/views/posts/edit_mode/submissions_selector.js?v=06237188d7060d8131355c1e1cbecc76", "widgets/collections/drafts_real": "widgets/collections/drafts_real.js?v=ea32d5f079afc2d70332acfbe177aacb", "whitelabel/apps/signup": "whitelabel/apps/signup.js?v=fc4c863c40db59fb26d07447643fd3aa", "widgets/views/dashboard/stats/thirdparty": "widgets/views/dashboard/stats/thirdparty.js?v=7948d5c952844c8ba34ba61506276d4f", "widgets/views/petition": "widgets/views/petition.js?v=6027d30dda984f484dd227fdfb52e9a5", "widgets/views/post_page": "widgets/views/post_page.js?v=576e42e2476be51e7cb3d3fbeee4ce03", "widgets/views/draft/page": "widgets/views/draft/page.js?v=28d6671959bfc6172e57aaa515ddb3cb", "wix_lib": "https://sslstatic.wix.com/services/js-sdk/1.16.3/js/Wix", "widgets/views/dashboard_goodies": "widgets/views/dashboard_goodies.js?v=d0bbc269215ec018d8f749ef32ca0f77", "whitelabel/widgets/views/edit_mode/share_section": "whitelabel/widgets/views/edit_mode/share_section.js?v=0f26f23fd8bc0a441fd3df11475ae105", "widgets/views/dashboard_bookmarklet": "widgets/views/dashboard_bookmarklet.js?v=c9643226c67cefbc595304edea7b1a9a", "roar/devwatchers/what-can-i-eat": "roar/devwatchers/what-can-i-eat.js?v=8f458523f61bf2bf3dd8ba533a3a862e", "widgets/views/dashboard/content_feeds/feeds": "widgets/views/dashboard/content_feeds/feeds.js?v=6b3d6225a5a27c2d42309d45c7b792a8", "informer": "widgets/views/informer.js?v=f0adafb6f4e79c2b26b09f774eff42e4", "roar/widgets/views/contact_form": "roar/widgets/views/contact_form.js?v=40fb308934a7895aa1d867ae37d76597", "widgets/views/frontpage/custom_header_lightbox": "widgets/views/frontpage/custom_header_lightbox.js?v=a979dfb33f18834b1db6497ae5aac94b", "jquery": "https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min", "apps/pricing": "apps/pricing.js?v=0a56001f622a0a205cc994496701462e", "is-builder": "libs/require/plugins/is/is-builder.js?v=eae8cbe4fcab96b2be40057a74d664c6", "whitelabel/apps/disneycitizenkid/frontpage": "whitelabel/apps/disneycitizenkid/frontpage.js?v=57e9c6d6fdfa365cb705eec11b7f4f33", "widgets/views/posts/edit_mode/share_section": "widgets/views/posts/edit_mode/share_section.js?v=49341bae0c9e70ba52d81e45faf19fc4", "apps/frontpage": "apps/frontpage.js?v=a0c4b3f6b8e2d0f86bb8b4fa41583164", "jqueryui": "libs/jquery/plugins/jqueryui", "widgets/templates/campaigns/themes/polar": "widgets/templates/campaigns/themes/polar.js?v=44d15cec86e68c68335f61dd5459310e", "lazyload": "libs/jquery/plugins/jquery.lazyload.js?v=3bc7fdd8aa0e53b2dd399d73fbe21cae", "widgets/views/dashboard_notifications": "widgets/views/dashboard_notifications.js?v=016d7b2a4a758c6d2a15d80fea22c355", "roar/devwatchers/popup-questions": "roar/devwatchers/popup-questions.js?v=2eaf6cc3334ea34f3335c0be93410c43", "widgets/views/dashboard/sharing/approval": "widgets/views/dashboard/sharing/approval.js?v=95f71f1ca841c890ef03424e0af0877e", "apps/bookmarklet_popup": "apps/bookmarklet_popup.js?v=40e7730f880a5ca9c3d211eae1623f66", "roar/devwatchers/in-the-workplace": "roar/devwatchers/in-the-workplace.js?v=46b6ce0cdb4559cf3f95ab1d1b7f5a8a", "widgets/templates/campaigns/themes/inline": "widgets/templates/campaigns/themes/inline.js?v=18df52ffa1a02691328a740668eacf05", "apps/embedded_widget_horizontal": "apps/embedded_widget_horizontal.js?v=2817c96c4a4e9a29b31d53ebf49f7c0a", "utils": "utils.js?v=76a73329998896f19f5fa6a1b7a5b4ec", "widgets/views/dashboard_design": "widgets/views/dashboard_design.js?v=5f7900028b7562212f40c63669da101a", "widgets/views/edit_mode/alternative_headlines": "widgets/views/edit_mode/alternative_headlines.js?v=3d25bbd9d66ee466e4d10d4dd4a2cd8a", "widgets/views/dashboard/sharing/notify": "widgets/views/dashboard/sharing/notify.js?v=459b04aa08a716944d55ba95d1787d56", "widgets/templates/campaigns/themes/sidebar": "widgets/templates/campaigns/themes/sidebar.js?v=99e8c3a53365d3136194b96c651b83ec", "hogan_with_filters": "libs/hogan/hogan_with_filters.js?v=79c53ab9d8be85b51bd01867e2ea14bb", "roar/devwatchers/health-solutions": "roar/devwatchers/health-solutions.js?v=42b3172e3cc82976fdc7f1b75e6fb0b7", "jquery.featureCarousel": "libs/jquery/plugins/jquery.featureCarousel.js?v=19cf659245d51992768001bea7107159", "widgets/views/charts/new_posts": "widgets/views/charts/new_posts.js?v=f73fe1e642bd9ea094eb1d4cda44e18c", "widgets/views/chart": "widgets/views/chart.js?v=a723b9cc05b9ab9260604176f4831c28", "widgets/views/frontpage/top_modules/post_approved": "widgets/views/frontpage/top_modules/post_approved.js?v=23333ca22533c964168aae08c0df129a", "roar/apps/submissions": "roar/apps/submissions.js?v=f719400dc83c0ae82711654bc2c88ca1", "widgets/models/dashboard/stats": "widgets/models/dashboard/stats.js?v=a6f664645e31b0466ebcb3d0145b1ec8", "apps/all_posts": "apps/all_posts.js?v=6880e6f228341a5f18f1016fec3d3e6d", "hgn": "libs/require/plugins/hgn.js?v=b617dfa94da9cbd96bede32e465ac778", "widgets/views/posts/edit_mode/expand_link": "widgets/views/posts/edit_mode/expand_link.js?v=dcccd1e03154d3c5d9dd3eebcf4f1235", "widgets/views/charts/views": "widgets/views/charts/views.js?v=c7efe798dc6d0236a11ddf5da7c4dbd4", "roar/devwatchers/toggle-popup-questions": "roar/devwatchers/toggle-popup-questions.js?v=4970ab12844b627ed1ba5bf486975067", "whitelabel/widgets/views/edit_mode/stats_section": "whitelabel/widgets/views/edit_mode/stats_section.js?v=fa25565d08f9940af37b7bcb8a5d32d7", "widgets/views/dashboard_collaborators": "widgets/views/dashboard_collaborators.js?v=a6715538f77c49142a7d696b7b8516cc", "widgets/views/charts/signups": "widgets/views/charts/signups.js?v=22729d84cf615b194334f3bc76bf0116", "roar/betawatchers/app": "roar/betawatchers/app.js?v=f30b710e42405c1f927316f67f5c9668", "backbone": "libs/backbone/backbone.js?v=84b3ec11450a23f96f08a97aa140ab3a", "widgets/views/charts/shares": "widgets/views/charts/shares.js?v=02de91e888b961ab87a4108cf5b2be66", "apps/wix": "apps/wix.js?v=93a0215be875356b96a8586176a701b3", "roar/apps/frontpage": "roar/apps/frontpage.js?v=edf2a3e23019f4e16aec32d8dae78c8c", "utils/whitelabel_settings": "utils/whitelabel_settings.js?v=16977e19044f89ab8ae5f7d7a9d7b33c", "stripe": "https://js.stripe.com/v1/stripe", "roar/weightwatchers/popup-questions": "roar/weightwatchers/popup-questions.js?v=9e4c3284c8e87b0610fb637dc20cd4a2", "widgets/views/posts/edit_mode/cta_section": "widgets/views/posts/edit_mode/cta_section.js?v=eb0f928daa7a355125ded1a4e36855eb", "whitelabel/widgets/views/edit_mode/cta_section": "whitelabel/widgets/views/edit_mode/cta_section.js?v=ea5e9eedcc41c233ff5ae4c787f1b212", "widgets/views/embed_header": "widgets/views/embed_header.js?v=6abafbe74eddd4f9b0a054ef3d9c5d81", "widgets/views/dashboard/stats/export": "widgets/views/dashboard/stats/export.js?v=b9ab56b455fec7a8d699b76cbb8814cf", "widgets/views/light_site_create": "widgets/views/light_site_create.js?v=36710d78b4cee198f891075ec4a396d7", "widgets/views/dashboard_static_pages": "widgets/views/dashboard_static_pages.js?v=7c26919f0944966bb41e9628e71a8972", "utils/mustache_templates_loader": "utils/mustache_templates_loader.js?v=48dede3f016453611a5dde8eb1c120e4", "widgets/views/notifications": "widgets/views/notifications.js?v=e8632d735245bce83060167b211b50eb", "widgets/views/posts/edit_mode/add": "widgets/views/posts/edit_mode/add.js?v=c2e5740e50c98bc95de74430f068941d", "widgets/views/share_media_panel": "widgets/views/share_media_panel.js?v=55bbfeb793e9436303f79ebec214c15d", "widgets/collections/drafts": "widgets/collections/drafts.js?v=824bff3158a79cec4b49eaeb52132f9d", "roar/betawatchers/toggle-popup-questions": "roar/betawatchers/toggle-popup-questions.js?v=f65ded72d03a23ba349039f748f4560b", "jquery.scrolltofixed": "libs/jquery/plugins/jquery-scrolltofixed.js?v=129cbea0b1b06c2e3ea8ed7f6cdf7148", "widgets/views/dashboard/sharing/frontpage": "widgets/views/dashboard/sharing/frontpage.js?v=34ce6d130c744a802739ef157ea58b47", "roar/betawatchers/in-the-workplace": "roar/betawatchers/in-the-workplace.js?v=2db9a13eed0af2130a68e8742ad984a8"}, shim: {"jquery.redactor.v10": {"exports": "jQuery.fn.redactor", "deps": ["jquery"]}, "lazyload": {"exports": "jQuery.fn.lazyload", "deps": ["jquery"]}, "jquery.redactor": {"exports": "jQuery.fn.redactor", "deps": ["jquery"]}, "jquery.placeholder": {"exports": "jQuery.fn.placeholder", "deps": ["jquery"]}, "jquery.scrollDepth": {"exports": "jQuery.fn.scrollDepth", "deps": ["jquery"]}, "jquery.slider": {"exports": "jQuery.fn.flexslider", "deps": ["jquery"]}, "jquery.featureCarousel": {"exports": "jQuery.fn.featureCarousel", "deps": ["jquery"]}, "highcharts": {"exports": "Highcharts"}}, waitSeconds: 15 });
    require.onError=function(a){};
}(this));
!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function g(e){var t=e.length,n=h.type(e);return"function"===n||h.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function S(e,t,n){if(h.isFunction(t))return h.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return h.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(E.test(t))return h.filter(t,e,n);t=h.filter(t,e)}return h.grep(e,function(e){return h.inArray(e,t)>=0!==n})}function A(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function _(e){var t=M[e]={};return h.each(e.match(O)||[],function(e,n){t[n]=!0}),t}function P(){T.addEventListener?(T.removeEventListener("DOMContentLoaded",H,!1),e.removeEventListener("load",H,!1)):(T.detachEvent("onreadystatechange",H),e.detachEvent("onload",H))}function H(){(T.addEventListener||"load"===event.type||"complete"===T.readyState)&&(P(),h.ready())}function q(e,t,n){if(void 0===n&&1===e.nodeType){var r="data-"+t.replace(I,"-$1").toLowerCase();if(n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:F.test(n)?h.parseJSON(n):n}catch(i){}h.data(e,t,n)}else n=void 0}return n}function R(e){var t;for(t in e)if(("data"!==t||!h.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function U(e,t,r,i){if(h.acceptData(e)){var s,o,u=h.expando,a=e.nodeType,f=a?h.cache:e,l=a?e[u]:e[u]&&u;if(l&&f[l]&&(i||f[l].data)||void 0!==r||"string"!=typeof t)return l||(l=a?e[u]=n.pop()||h.guid++:u),f[l]||(f[l]=a?{}:{toJSON:h.noop}),("object"==typeof t||"function"==typeof t)&&(i?f[l]=h.extend(f[l],t):f[l].data=h.extend(f[l].data,t)),o=f[l],i||(o.data||(o.data={}),o=o.data),void 0!==r&&(o[h.camelCase(t)]=r),"string"==typeof t?(s=o[t],null==s&&(s=o[h.camelCase(t)])):s=o,s}}function z(e,t,n){if(h.acceptData(e)){var r,i,s=e.nodeType,o=s?h.cache:e,u=s?e[h.expando]:h.expando;if(o[u]){if(t&&(r=n?o[u]:o[u].data)){h.isArray(t)?t=t.concat(h.map(t,h.camelCase)):t in r?t=[t]:(t=h.camelCase(t),t=t in r?[t]:t.split(" ")),i=t.length;while(i--)delete r[t[i]];if(n?!R(r):!h.isEmptyObject(r))return}(n||(delete o[u].data,R(o[u])))&&(s?h.cleanData([e],!0):l.deleteExpando||o!=o.window?delete o[u]:o[u]=null)}}}function et(){return!0}function tt(){return!1}function nt(){try{return T.activeElement}catch(e){}}function rt(e){var t=it.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function wt(e,t){var n,r,i=0,s=typeof e.getElementsByTagName!==B?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==B?e.querySelectorAll(t||"*"):void 0;if(!s)for(s=[],n=e.childNodes||e;null!=(r=n[i]);i++)!t||h.nodeName(r,t)?s.push(r):h.merge(s,wt(r,t));return void 0===t||t&&h.nodeName(e,t)?h.merge([e],s):s}function Et(e){J.test(e.type)&&(e.defaultChecked=e.checked)}function St(e,t){return h.nodeName(e,"table")&&h.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function xt(e){return e.type=(null!==h.find.attr(e,"type"))+"/"+e.type,e}function Tt(e){var t=vt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Nt(e,t){for(var n,r=0;null!=(n=e[r]);r++)h._data(n,"globalEval",!t||h._data(t[r],"globalEval"))}function Ct(e,t){if(1===t.nodeType&&h.hasData(e)){var n,r,i,s=h._data(e),o=h._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;i>r;r++)h.event.add(t,n,u[n][r])}o.data&&(o.data=h.extend({},o.data))}}function kt(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!l.noCloneEvent&&t[h.expando]){i=h._data(t);for(r in i.events)h.removeEvent(t,r,i.handle);t.removeAttribute(h.expando)}"script"===n&&t.text!==e.text?(xt(t).text=e.text,Tt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),l.html5Clone&&e.innerHTML&&!h.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&J.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function Ot(t,n){var r,i=h(n.createElement(t)).appendTo(n.body),s=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(i[0]))?r.display:h.css(i[0],"display");return i.detach(),s}function Mt(e){var t=T,n=At[e];return n||(n=Ot(e,t),"none"!==n&&n||(Lt=(Lt||h("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Lt[0].contentWindow||Lt[0].contentDocument).document,t.write(),t.close(),n=Ot(e,t),Lt.detach()),At[e]=n),n}function jt(e,t){return{get:function(){var n=e();if(null!=n)return n?void delete this.get:(this.get=t).apply(this,arguments)}}}function Vt(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Xt.length;while(i--)if(t=Xt[i]+n,t in e)return t;return r}function $t(e,t){for(var n,r,i,s=[],o=0,u=e.length;u>o;o++)r=e[o],r.style&&(s[o]=h._data(r,"olddisplay"),n=r.style.display,t?(s[o]||"none"!==n||(r.style.display=""),""===r.style.display&&V(r)&&(s[o]=h._data(r,"olddisplay",Mt(r.nodeName)))):(i=V(r),(n&&"none"!==n||!i)&&h._data(r,"olddisplay",i?n:h.css(r,"display"))));for(o=0;u>o;o++)r=e[o],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?s[o]||"":"none"));return e}function Jt(e,t,n){var r=Rt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Kt(e,t,n,r,i){for(var s=n===(r?"border":"content")?4:"width"===t?1:0,o=0;4>s;s+=2)"margin"===n&&(o+=h.css(e,n+X[s],!0,i)),r?("content"===n&&(o-=h.css(e,"padding"+X[s],!0,i)),"margin"!==n&&(o-=h.css(e,"border"+X[s]+"Width",!0,i))):(o+=h.css(e,"padding"+X[s],!0,i),"padding"!==n&&(o+=h.css(e,"border"+X[s]+"Width",!0,i)));return o}function Qt(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,s=Pt(e),o=l.boxSizing&&"border-box"===h.css(e,"boxSizing",!1,s);if(0>=i||null==i){if(i=Ht(e,t,s),(0>i||null==i)&&(i=e.style[t]),Dt.test(i))return i;r=o&&(l.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+Kt(e,t,n||(o?"border":"content"),r,s)+"px"}function Gt(e,t,n,r,i){return new Gt.prototype.init(e,t,n,r,i)}function on(){return setTimeout(function(){Yt=void 0}),Yt=h.now()}function un(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=X[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function an(e,t,n){for(var r,i=(sn[t]||[]).concat(sn["*"]),s=0,o=i.length;o>s;s++)if(r=i[s].call(n,t,e))return r}function fn(e,t,n){var r,i,s,o,u,a,f,c,p=this,d={},v=e.style,m=e.nodeType&&V(e),g=h._data(e,"fxshow");n.queue||(u=h._queueHooks(e,"fx"),null==u.unqueued&&(u.unqueued=0,a=u.empty.fire,u.empty.fire=function(){u.unqueued||a()}),u.unqueued++,p.always(function(){p.always(function(){u.unqueued--,h.queue(e,"fx").length||u.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[v.overflow,v.overflowX,v.overflowY],f=h.css(e,"display"),c="none"===f?h._data(e,"olddisplay")||Mt(e.nodeName):f,"inline"===c&&"none"===h.css(e,"float")&&(l.inlineBlockNeedsLayout&&"inline"!==Mt(e.nodeName)?v.zoom=1:v.display="inline-block")),n.overflow&&(v.overflow="hidden",l.shrinkWrapBlocks()||p.always(function(){v.overflow=n.overflow[0],v.overflowX=n.overflow[1],v.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],en.exec(i)){if(delete t[r],s=s||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;m=!0}d[r]=g&&g[r]||h.style(e,r)}else f=void 0;if(h.isEmptyObject(d))"inline"===("none"===f?Mt(e.nodeName):f)&&(v.display=f);else{g?"hidden"in g&&(m=g.hidden):g=h._data(e,"fxshow",{}),s&&(g.hidden=!m),m?h(e).show():p.done(function(){h(e).hide()}),p.done(function(){var t;h._removeData(e,"fxshow");for(t in d)h.style(e,t,d[t])});for(r in d)o=an(m?g[r]:0,r,p),r in g||(g[r]=o.start,m&&(o.end=o.start,o.start="width"===r||"height"===r?1:0))}}function ln(e,t){var n,r,i,s,o;for(n in e)if(r=h.camelCase(n),i=t[r],s=e[n],h.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=h.cssHooks[r],o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}function cn(e,t,n){var r,i,s=0,o=rn.length,u=h.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;for(var t=Yt||on(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;a>o;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),1>s&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:h.extend({},t),opts:h.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Yt||on(),duration:n.duration,tweens:[],createTween:function(t,n){var r=h.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;for(ln(l,f.opts.specialEasing);o>s;s++)if(r=rn[s].call(f,e,l,f.opts))return r;return h.map(l,an,f),h.isFunction(f.opts.start)&&f.opts.start.call(e,f),h.fx.timer(h.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Fn(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(O)||[];if(h.isFunction(n))while(r=s[i++])"+"===r.charAt(0)?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function In(e,t,n,r){function o(u){var a;return i[u]=!0,h.each(e[u]||[],function(e,u){var f=u(t,n,r);return"string"!=typeof f||s||i[f]?s?!(a=f):void 0:(t.dataTypes.unshift(f),o(f),!1)}),a}var i={},s=e===Hn;return o(t.dataTypes[0])||!i["*"]&&o("*")}function qn(e,t){var n,r,i=h.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&h.extend(!0,e,n),e}function Rn(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while("*"===a[0])a.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in u)if(u[o]&&u[o].test(i)){a.unshift(o);break}if(a[0]in n)s=a[0];else{for(o in n){if(!a[0]||e.converters[o+" "+a[0]]){s=o;break}r||(r=o)}s=s||r}return s?(s!==a[0]&&a.unshift(s),n[s]):void 0}function Un(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift())if("*"===s)s=a;else if("*"!==a&&a!==s){if(o=f[a+" "+s]||f["* "+s],!o)for(i in f)if(u=i.split(" "),u[1]===s&&(o=f[a+" "+u[0]]||f["* "+u[0]])){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}return{state:"success",data:t}}function Jn(e,t,n,r){var i;if(h.isArray(t))h.each(t,function(t,i){n||Wn.test(e)?r(e,i):Jn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==h.type(t))r(e,t);else for(i in t)Jn(e+"["+i+"]",t[i],n,r)}function Yn(){try{return new e.XMLHttpRequest}catch(t){}}function Zn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function ir(e){return h.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var n=[],r=n.slice,i=n.concat,s=n.push,o=n.indexOf,u={},a=u.toString,f=u.hasOwnProperty,l={},c="1.11.1",h=function(e,t){return new h.fn.init(e,t)},p=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,d=/^-ms-/,v=/-([\da-z])/gi,m=function(e,t){return t.toUpperCase()};h.fn=h.prototype={jquery:c,constructor:h,selector:"",length:0,toArray:function(){return r.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:r.call(this)},pushStack:function(e){var t=h.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return h.each(this,e,t)},map:function(e){return this.pushStack(h.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:s,sort:n.sort,splice:n.splice},h.extend=h.fn.extend=function(){var e,t,n,r,i,s,o=arguments[0]||{},u=1,a=arguments.length,f=!1;for("boolean"==typeof o&&(f=o,o=arguments[u]||{},u++),"object"==typeof o||h.isFunction(o)||(o={}),u===a&&(o=this,u--);a>u;u++)if(null!=(i=arguments[u]))for(r in i)e=o[r],n=i[r],o!==n&&(f&&n&&(h.isPlainObject(n)||(t=h.isArray(n)))?(t?(t=!1,s=e&&h.isArray(e)?e:[]):s=e&&h.isPlainObject(e)?e:{},o[r]=h.extend(f,s,n)):void 0!==n&&(o[r]=n));return o},h.extend({expando:"jQuery"+(c+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===h.type(e)},isArray:Array.isArray||function(e){return"array"===h.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!h.isArray(e)&&e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==h.type(e)||e.nodeType||h.isWindow(e))return!1;try{if(e.constructor&&!f.call(e,"constructor")&&!f.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(l.ownLast)for(t in e)return f.call(e,t);for(t in e);return void 0===t||f.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?u[a.call(e)]||"object":typeof e},globalEval:function(t){t&&h.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(d,"ms-").replace(v,m)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=g(e);if(n){if(o){for(;s>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(o){for(;s>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(p,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(g(Object(e))?h.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(o)return o.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){var n=+t.length,r=0,i=e.length;while(n>r)e[i++]=t[r++];if(n!==n)while(void 0!==t[r])e[i++]=t[r++];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],s=0,o=e.length,u=!n;o>s;s++)r=!t(e[s],s),r!==u&&i.push(e[s]);return i},map:function(e,t,n){var r,s=0,o=e.length,u=g(e),a=[];if(u)for(;o>s;s++)r=t(e[s],s,n),null!=r&&a.push(r);else for(s in e)r=t(e[s],s,n),null!=r&&a.push(r);return i.apply([],a)},guid:1,proxy:function(e,t){var n,i,s;return"string"==typeof t&&(s=e[t],t=e,e=s),h.isFunction(e)?(n=r.call(arguments,2),i=function(){return e.apply(t||this,n.concat(r.call(arguments)))},i.guid=e.guid=e.guid||h.guid++,i):void 0},now:function(){return+(new Date)},support:l}),h.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){u["[object "+t+"]"]=t.toLowerCase()});var y=function(e){function st(e,t,r,i){var s,u,f,l,c,d,g,y,S,x;if((t?t.ownerDocument||t:E)!==p&&h(t),t=t||p,r=r||[],!e||"string"!=typeof e)return r;if(1!==(l=t.nodeType)&&9!==l)return[];if(v&&!i){if(s=Z.exec(e))if(f=s[1]){if(9===l){if(u=t.getElementById(f),!u||!u.parentNode)return r;if(u.id===f)return r.push(u),r}else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(f))&&b(t,u)&&u.id===f)return r.push(u),r}else{if(s[2])return P.apply(r,t.getElementsByTagName(e)),r;if((f=s[3])&&n.getElementsByClassName&&t.getElementsByClassName)return P.apply(r,t.getElementsByClassName(f)),r}if(n.qsa&&(!m||!m.test(e))){if(y=g=w,S=t,x=9===l&&e,1===l&&"object"!==t.nodeName.toLowerCase()){d=o(e),(g=t.getAttribute("id"))?y=g.replace(tt,"\\$&"):t.setAttribute("id",y),y="[id='"+y+"'] ",c=d.length;while(c--)d[c]=y+mt(d[c]);S=et.test(e)&&dt(t.parentNode)||t,x=d.join(",")}if(x)try{return P.apply(r,S.querySelectorAll(x)),r}catch(T){}finally{g||t.removeAttribute("id")}}}return a(e.replace(z,"$1"),t,r,i)}function ot(){function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function ut(e){return e[w]=!0,e}function at(e){var t=p.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ft(e,t){var n=e.split("|"),i=e.length;while(i--)r.attrHandle[n[i]]=t}function lt(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||A)-(~e.sourceIndex||A);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function pt(e){return ut(function(t){return t=+t,ut(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function dt(e){return e&&typeof e.getElementsByTagName!==L&&e}function vt(){}function mt(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function gt(e,t,n){var r=t.dir,i=n&&"parentNode"===r,s=x++;return t.first?function(t,n,s){while(t=t[r])if(1===t.nodeType||i)return e(t,n,s)}:function(t,n,o){var u,a,f=[S,s];if(o){while(t=t[r])if((1===t.nodeType||i)&&e(t,n,o))return!0}else while(t=t[r])if(1===t.nodeType||i){if(a=t[w]||(t[w]={}),(u=a[r])&&u[0]===S&&u[1]===s)return f[2]=u[2];if(a[r]=f,f[2]=e(t,n,o))return!0}}}function yt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function bt(e,t,n){for(var r=0,i=t.length;i>r;r++)st(e,t[r],n);return n}function wt(e,t,n,r,i){for(var s,o=[],u=0,a=e.length,f=null!=t;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function Et(e,t,n,r,i,s){return r&&!r[w]&&(r=Et(r)),i&&!i[w]&&(i=Et(i,s)),ut(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||bt(t||"*",u.nodeType?[u]:u,[]),m=!e||!s&&t?v:wt(v,h,e,u,a),g=n?i||(s?e:d||r)?[]:o:m;if(n&&n(m,g,u,a),r){f=wt(g,p),r(f,[],u,a),l=f.length;while(l--)(c=f[l])&&(g[p[l]]=!(m[p[l]]=c))}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?B.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=wt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):P.apply(o,g)})}function St(e){for(var t,n,i,s=e.length,o=r.relative[e[0].type],u=o||r.relative[" "],a=o?1:0,l=gt(function(e){return e===t},u,!0),c=gt(function(e){return B.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];s>a;a++)if(n=r.relative[e[a].type])h=[gt(yt(h),n)];else{if(n=r.filter[e[a].type].apply(null,e[a].matches),n[w]){for(i=++a;s>i;i++)if(r.relative[e[i].type])break;return Et(a>1&&yt(h),a>1&&mt(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(z,"$1"),n,i>a&&St(e.slice(a,i)),s>i&&St(e=e.slice(i)),s>i&&mt(e))}h.push(n)}return yt(h)}function xt(e,t){var n=t.length>0,i=e.length>0,s=function(s,o,u,a,l){var c,h,d,v=0,m="0",g=s&&[],y=[],b=f,w=s||i&&r.find.TAG("*",l),E=S+=null==b?1:Math.random()||.1,x=w.length;for(l&&(f=o!==p&&o);m!==x&&null!=(c=w[m]);m++){if(i&&c){h=0;while(d=e[h++])if(d(c,o,u)){a.push(c);break}l&&(S=E)}n&&((c=!d&&c)&&v--,s&&g.push(c))}if(v+=m,n&&m!==v){h=0;while(d=t[h++])d(g,y,o,u);if(s){if(v>0)while(m--)g[m]||y[m]||(y[m]=_.call(a));y=wt(y)}P.apply(a,y),l&&!s&&y.length>0&&v+t.length>1&&st.uniqueSort(a)}return l&&(S=E,f=b),g};return n?ut(s):s}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w="sizzle"+ -(new Date),E=e.document,S=0,x=0,T=ot(),N=ot(),C=ot(),k=function(e,t){return e===t&&(c=!0),0},L="undefined",A=1<<31,O={}.hasOwnProperty,M=[],_=M.pop,D=M.push,P=M.push,H=M.slice,B=M.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",I="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",q=I.replace("w","w#"),R="\\["+F+"*("+I+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+q+"))|)"+F+"*\\]",U=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+R+")*)|.*)\\)|)",z=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),W=new RegExp("^"+F+"*,"+F+"*"),X=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),V=new RegExp("="+F+"*([^\\]'\"]*?)"+F+"*\\]","g"),$=new RegExp(U),J=new RegExp("^"+q+"$"),K={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I.replace("w","w*")+")"),ATTR:new RegExp("^"+R),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+j+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/[+~]/,tt=/'|\\/g,nt=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),rt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{P.apply(M=H.call(E.childNodes),E.childNodes),M[E.childNodes.length].nodeType}catch(it){P={apply:M.length?function(e,t){D.apply(e,H.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}n=st.support={},s=st.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},h=st.setDocument=function(e){var t,i=e?e.ownerDocument||e:E,o=i.defaultView;return i!==p&&9===i.nodeType&&i.documentElement?(p=i,d=i.documentElement,v=!s(i),o&&o!==o.top&&(o.addEventListener?o.addEventListener("unload",function(){h()},!1):o.attachEvent&&o.attachEvent("onunload",function(){h()})),n.attributes=at(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=at(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Y.test(i.getElementsByClassName)&&at(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),n.getById=at(function(e){return d.appendChild(e).id=w,!i.getElementsByName||!i.getElementsByName(w).length}),n.getById?(r.find.ID=function(e,t){if(typeof t.getElementById!==L&&v){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){var n=typeof e.getAttributeNode!==L&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==L?t.getElementsByTagName(e):void 0}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){while(n=s[i++])1===n.nodeType&&r.push(n);return r}return s},r.find.CLASS=n.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==L&&v?t.getElementsByClassName(e):void 0},g=[],m=[],(n.qsa=Y.test(i.querySelectorAll))&&(at(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&m.push("[*^$]="+F+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+F+"*(?:value|"+j+")"),e.querySelectorAll(":checked").length||m.push(":checked")}),at(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+F+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Y.test(y=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&at(function(e){n.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),g.push("!=",U)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=Y.test(d.compareDocumentPosition),b=t||Y.test(d.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return c=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===i||e.ownerDocument===E&&b(E,e)?-1:t===i||t.ownerDocument===E&&b(E,t)?1:l?B.call(l,e)-B.call(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,s=e.parentNode,o=t.parentNode,u=[e],a=[t];if(!s||!o)return e===i?-1:t===i?1:s?-1:o?1:l?B.call(l,e)-B.call(l,t):0;if(s===o)return lt(e,t);n=e;while(n=n.parentNode)u.unshift(n);n=t;while(n=n.parentNode)a.unshift(n);while(u[r]===a[r])r++;return r?lt(u[r],a[r]):u[r]===E?-1:a[r]===E?1:0},i):p},st.matches=function(e,t){return st(e,null,null,t)},st.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&h(e),t=t.replace(V,"='$1']"),!(!n.matchesSelector||!v||g&&g.test(t)||m&&m.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return st(t,p,null,[e]).length>0},st.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),b(e,t)},st.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var i=r.attrHandle[t.toLowerCase()],s=i&&O.call(r.attrHandle,t.toLowerCase())?i(e,t,!v):void 0;return void 0!==s?s:n.attributes||!v?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},st.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},st.uniqueSort=function(e){var t,r=[],i=0,s=0;if(c=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(k),c){while(t=e[s++])t===e[s]&&(i=r.push(s));while(i--)e.splice(r[i],1)}return l=null,e},i=st.getText=function(e){var t,n="",r=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===s||4===s)return e.nodeValue}else while(t=e[r++])n+=i(t);return n},r=st.selectors={cacheLength:50,createPseudo:ut,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(nt,rt),e[3]=(e[3]||e[4]||e[5]||"").replace(nt,rt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||st.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&st.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&$.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(nt,rt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&T(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==L&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=st.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===S&&f[1],h=f[0]===S&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(1===c.nodeType&&++h&&c===t){l[e]=[S,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===S)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++h&&(y&&((c[w]||(c[w]={}))[e]=[S,h]),c===t))break;return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||st.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ut(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=B.call(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:ut(function(e){var t=[],n=[],r=u(e.replace(z,"$1"));return r[w]?ut(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:ut(function(e){return function(t){return st(e,t).length>0}}),contains:ut(function(e){return function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:ut(function(e){return J.test(e||"")||st.error("unsupported lang: "+e),e=e.replace(nt,rt).toLowerCase(),function(t){var n;do if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,n){return[0>n?n+t:n]}),even:pt(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:pt(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:pt(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:pt(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},r.pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=ct(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=ht(t);return vt.prototype=r.filters=r.pseudos,r.setFilters=new vt,o=st.tokenize=function(e,t){var n,i,s,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=r.preFilter;while(u){(!n||(i=W.exec(u)))&&(i&&(u=u.slice(i[0].length)||u),a.push(s=[])),n=!1,(i=X.exec(u))&&(n=i.shift(),s.push({value:n,type:i[0].replace(z," ")}),u=u.slice(n.length));for(o in r.filter)!(i=K[o].exec(u))||f[o]&&!(i=f[o](i))||(n=i.shift(),s.push({value:n,type:o,matches:i}),u=u.slice(n.length));if(!n)break}return t?u.length:u?st.error(e):N(e,a).slice(0)},u=st.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=o(e)),n=t.length;while(n--)s=St(t[n]),s[w]?r.push(s):i.push(s);s=C(e,xt(i,r)),s.selector=e}return s},a=st.select=function(e,t,i,s){var a,f,l,c,h,p="function"==typeof e&&e,d=!s&&o(e=p.selector||e);if(i=i||[],1===d.length){if(f=d[0]=d[0].slice(0),f.length>2&&"ID"===(l=f[0]).type&&n.getById&&9===t.nodeType&&v&&r.relative[f[1].type]){if(t=(r.find.ID(l.matches[0].replace(nt,rt),t)||[])[0],!t)return i;p&&(t=t.parentNode),e=e.slice(f.shift().value.length)}a=K.needsContext.test(e)?0:f.length;while(a--){if(l=f[a],r.relative[c=l.type])break;if((h=r.find[c])&&(s=h(l.matches[0].replace(nt,rt),et.test(f[0].type)&&dt(t.parentNode)||t))){if(f.splice(a,1),e=s.length&&mt(f),!e)return P.apply(i,s),i;break}}}return(p||u(e,d))(s,t,!v,i,et.test(e)&&dt(t.parentNode)||t),i},n.sortStable=w.split("").sort(k).join("")===w,n.detectDuplicates=!!c,h(),n.sortDetached=at(function(e){return 1&e.compareDocumentPosition(p.createElement("div"))}),at(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ft("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&at(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ft("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),at(function(e){return null==e.getAttribute("disabled")})||ft(j,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),st}(e);h.find=y,h.expr=y.selectors,h.expr[":"]=h.expr.pseudos,h.unique=y.uniqueSort,h.text=y.getText,h.isXMLDoc=y.isXML,h.contains=y.contains;var b=h.expr.match.needsContext,w=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,E=/^.[^:#\[\.,]*$/;h.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?h.find.matchesSelector(r,e)?[r]:[]:h.find.matches(e,h.grep(t,function(e){return 1===e.nodeType}))},h.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(h(e).filter(function(){for(t=0;i>t;t++)if(h.contains(r[t],this))return!0}));for(t=0;i>t;t++)h.find(e,r[t],n);return n=this.pushStack(i>1?h.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(S(this,e||[],!1))},not:function(e){return this.pushStack(S(this,e||[],!0))},is:function(e){return!!S(this,"string"==typeof e&&b.test(e)?h(e):e||[],!1).length}});var x,T=e.document,N=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=h.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||x).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof h?t[0]:t,h.merge(this,h.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:T,!0)),w.test(n[1])&&h.isPlainObject(t))for(n in t)h.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if(r=T.getElementById(n[2]),r&&r.parentNode){if(r.id!==n[2])return x.find(e);this.length=1,this[0]=r}return this.context=T,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):h.isFunction(e)?"undefined"!=typeof x.ready?x.ready(e):e(h):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),h.makeArray(e,this))};C.prototype=h.fn,x=h(T);var k=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};h.extend({dir:function(e,t,n){var r=[],i=e[t];while(i&&9!==i.nodeType&&(void 0===n||1!==i.nodeType||!h(i).is(n)))1===i.nodeType&&r.push(i),i=i[t];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),h.fn.extend({has:function(e){var t,n=h(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(h.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,s=[],o=b.test(e)||"string"!=typeof e?h(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&h.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?h.unique(s):s)},index:function(e){return e?"string"==typeof e?h.inArray(this[0],h(e)):h.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(h.unique(h.merge(this.get(),h(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),h.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h.dir(e,"parentNode")},parentsUntil:function(e,t,n){return h.dir(e,"parentNode",n)},next:function(e){return A(e,"nextSibling")},prev:function(e){return A(e,"previousSibling")},nextAll:function(e){return h.dir(e,"nextSibling")},prevAll:function(e){return h.dir(e,"previousSibling")},nextUntil:function(e,t,n){return h.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return h.dir(e,"previousSibling",n)},siblings:function(e){return h.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return h.sibling(e.firstChild)},contents:function(e){return h.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:h.merge([],e.childNodes)}},function(e,t){h.fn[e]=function(n,r){var i=h.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=h.filter(r,i)),this.length>1&&(L[e]||(i=h.unique(i)),k.test(e)&&(i=i.reverse())),this.pushStack(i)}});var O=/\S+/g,M={};h.Callbacks=function(e){e="string"==typeof e?M[e]||_(e):h.extend({},e);var t,n,r,i,s,o,u=[],a=!e.once&&[],f=function(c){for(n=e.memory&&c,r=!0,s=o||0,o=0,i=u.length,t=!0;u&&i>s;s++)if(u[s].apply(c[0],c[1])===!1&&e.stopOnFalse){n=!1;break}t=!1,u&&(a?a.length&&f(a.shift()):n?u=[]:l.disable())},l={add:function(){if(u){var r=u.length;!function s(t){h.each(t,function(t,n){var r=h.type(n);"function"===r?e.unique&&l.has(n)||u.push(n):n&&n.length&&"string"!==r&&s(n)})}(arguments),t?i=u.length:n&&(o=r,f(n))}return this},remove:function(){return u&&h.each(arguments,function(e,n){var r;while((r=h.inArray(n,u,r))>-1)u.splice(r,1),t&&(i>=r&&i--,s>=r&&s--)}),this},has:function(e){return e?h.inArray(e,u)>-1:!!u&&!!u.length},empty:function(){return u=[],i=0,this},disable:function(){return u=a=n=void 0,this},disabled:function(){return!u},lock:function(){return a=void 0,n||l.disable(),this},locked:function(){return!a},fireWith:function(e,n){return!u||r&&!a||(n=n||[],n=[e,n.slice?n.slice():n],t?a.push(n):f(n)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},h.extend({Deferred:function(e){var t=[["resolve","done",h.Callbacks("once memory"),"resolved"],["reject","fail",h.Callbacks("once memory"),"rejected"],["notify","progress",h.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return h.Deferred(function(n){h.each(t,function(t,s){var o=h.isFunction(e[t])&&e[t];i[s[1]](function(){var e=o&&o.apply(this,arguments);e&&h.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s[0]+"With"](this===r?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?h.extend(e,r):r}},i={};return r.pipe=r.then,h.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[1^e][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=r.call(arguments),i=n.length,s=1!==i||e&&h.isFunction(e.promise)?i:0,o=1===s?e:h.Deferred(),u=function(e,t,n){return function(i){t[e]=this,n[e]=arguments.length>1?r.call(arguments):i,n===a?o.notifyWith(t,n):--s||o.resolveWith(t,n)}},a,f,l;if(i>1)for(a=new Array(i),f=new Array(i),l=new Array(i);i>t;t++)n[t]&&h.isFunction(n[t].promise)?n[t].promise().done(u(t,l,n)).fail(o.reject).progress(u(t,f,a)):--s;return s||o.resolveWith(l,n),o.promise()}});var D;h.fn.ready=function(e){return h.ready.promise().done(e),this},h.extend({isReady:!1,readyWait:1,holdReady:function(e){e?h.readyWait++:h.ready(!0)},ready:function(e){if(e===!0?!--h.readyWait:!h.isReady){if(!T.body)return setTimeout(h.ready);h.isReady=!0,e!==!0&&--h.readyWait>0||(D.resolveWith(T,[h]),h.fn.triggerHandler&&(h(T).triggerHandler("ready"),h(T).off("ready")))}}}),h.ready.promise=function(t){if(!D)if(D=h.Deferred(),"complete"===T.readyState)setTimeout(h.ready);else if(T.addEventListener)T.addEventListener("DOMContentLoaded",H,!1),e.addEventListener("load",H,!1);else{T.attachEvent("onreadystatechange",H),e.attachEvent("onload",H);var n=!1;try{n=null==e.frameElement&&T.documentElement}catch(r){}n&&n.doScroll&&!function i(){if(!h.isReady){try{n.doScroll("left")}catch(e){return setTimeout(i,50)}P(),h.ready()}}()}return D.promise(t)};var B="undefined",j;for(j in h(l))break;l.ownLast="0"!==j,l.inlineBlockNeedsLayout=!1,h(function(){var e,t,n,r;n=T.getElementsByTagName("body")[0],n&&n.style&&(t=T.createElement("div"),r=T.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),typeof t.style.zoom!==B&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",l.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(r))}),function(){var e=T.createElement("div");if(null==l.deleteExpando){l.deleteExpando=!0;try{delete e.test}catch(t){l.deleteExpando=!1}}e=null}(),h.acceptData=function(e){var t=h.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return 1!==n&&9!==n?!1:!t||t!==!0&&e.getAttribute("classid")===t};var F=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,I=/([A-Z])/g;h.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?h.cache[e[h.expando]]:e[h.expando],!!e&&!R(e)},data:function(e,t,n){return U(e,t,n)},removeData:function(e,t){return z(e,t)},_data:function(e,t,n){return U(e,t,n,!0)},_removeData:function(e,t){return z(e,t,!0)}}),h.fn.extend({data:function(e,t){var n,r,i,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(i=h.data(s),1===s.nodeType&&!h._data(s,"parsedAttrs"))){n=o.length;while(n--)o[n]&&(r=o[n].name,0===r.indexOf("data-")&&(r=h.camelCase(r.slice(5)),q(s,r,i[r])));h._data(s,"parsedAttrs",!0)}return i}return"object"==typeof e?this.each(function(){h.data(this,e)}):arguments.length>1?this.each(function(){h.data(this,e,t)}):s?q(s,e,h.data(s,e)):void 0},removeData:function(e){return this.each(function(){h.removeData(this,e)})}}),h.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=h._data(e,t),n&&(!r||h.isArray(n)?r=h._data(e,t,h.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=h.queue(e,t),r=n.length,i=n.shift(),s=h._queueHooks(e,t),o=function(){h.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return h._data(e,n)||h._data(e,n,{empty:h.Callbacks("once memory").add(function(){h._removeData(e,t+"queue"),h._removeData(e,n)})})}}),h.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?h.queue(this[0],e):void 0===t?this:this.each(function(){var n=h.queue(this,e,t);h._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&h.dequeue(this,e)})},dequeue:function(e){return this.each(function(){h.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=h.Deferred(),s=this,o=this.length,u=function(){--r||i.resolveWith(s,[s])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(o--)n=h._data(s[o],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(u));return u(),i.promise(t)}});var W=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,X=["Top","Right","Bottom","Left"],V=function(e,t){return e=t||e,"none"===h.css(e,"display")||!h.contains(e.ownerDocument,e)},$=h.access=function(e,t,n,r,i,s,o){var u=0,a=e.length,f=null==n;if("object"===h.type(n)){i=!0;for(u in n)h.access(e,t,u,n[u],!0,s,o)}else if(void 0!==r&&(i=!0,h.isFunction(r)||(o=!0),f&&(o?(t.call(e,r),t=null):(f=t,t=function(e,t,n){return f.call(h(e),n)})),t))for(;a>u;u++)t(e[u],n,o?r:r.call(e[u],u,t(e[u],n)));return i?e:f?t.call(e):a?t(e[0],n):s},J=/^(?:checkbox|radio)$/i;!function(){var e=T.createElement("input"),t=T.createElement("div"),n=T.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",l.leadingWhitespace=3===t.firstChild.nodeType,l.tbody=!t.getElementsByTagName("tbody").length,l.htmlSerialize=!!t.getElementsByTagName("link").length,l.html5Clone="<:nav></:nav>"!==T.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),l.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",l.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,l.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){l.noCloneEvent=!1}),t.cloneNode(!0).click()),null==l.deleteExpando){l.deleteExpando=!0;try{delete t.test}catch(r){l.deleteExpando=!1}}}(),function(){var t,n,r=T.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(l[t+"Bubbles"]=n in e)||(r.setAttribute(n,"t"),l[t+"Bubbles"]=r.attributes[n].expando===!1);r=null}();var K=/^(?:input|select|textarea)$/i,Q=/^key/,G=/^(?:mouse|pointer|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,Z=/^([^.]*)(?:\.(.+)|)$/;h.event={global:{},add:function(e,t,n,r,i){var s,o,u,a,f,l,c,p,d,v,m,g=h._data(e);if(g){n.handler&&(a=n,n=a.handler,i=a.selector),n.guid||(n.guid=h.guid++),(o=g.events)||(o=g.events={}),(l=g.handle)||(l=g.handle=function(e){return typeof h===B||e&&h.event.triggered===e.type?void 0:h.event.dispatch.apply(l.elem,arguments)},l.elem=e),t=(t||"").match(O)||[""],u=t.length;while(u--)s=Z.exec(t[u])||[],d=m=s[1],v=(s[2]||"").split(".").sort(),d&&(f=h.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=h.event.special[d]||{},c=h.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&h.expr.match.needsContext.test(i),namespace:v.join(".")},a),(p=o[d])||(p=o[d]=[],p.delegateCount=0,f.setup&&f.setup.call(e,r,v,l)!==!1||(e.addEventListener?e.addEventListener(d,l,!1):e.attachEvent&&e.attachEvent("on"+d,l))),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),h.event.global[d]=!0);e=null}},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,p,d,v,m,g=h.hasData(e)&&h._data(e);if(g&&(l=g.events)){t=(t||"").match(O)||[""],f=t.length;while(f--)if(u=Z.exec(t[f])||[],d=m=u[1],v=(u[2]||"").split(".").sort(),d){c=h.event.special[d]||{},d=(r?c.delegateType:c.bindType)||d,p=l[d]||[],u=u[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=p.length;while(s--)o=p[s],!i&&m!==o.origType||n&&n.guid!==o.guid||u&&!u.test(o.namespace)||r&&r!==o.selector&&("**"!==r||!o.selector)||(p.splice(s,1),o.selector&&p.delegateCount--,c.remove&&c.remove.call(e,o));a&&!p.length&&(c.teardown&&c.teardown.call(e,v,g.handle)!==!1||h.removeEvent(e,d,g.handle),delete l[d])}else for(d in l)h.event.remove(e,d+t[f],n,r,!0);h.isEmptyObject(l)&&(delete g.handle,h._removeData(e,"events"))}},trigger:function(t,n,r,i){var s,o,u,a,l,c,p,d=[r||T],v=f.call(t,"type")?t.type:t,m=f.call(t,"namespace")?t.namespace.split("."):[];if(u=c=r=r||T,3!==r.nodeType&&8!==r.nodeType&&!Y.test(v+h.event.triggered)&&(v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),o=v.indexOf(":")<0&&"on"+v,t=t[h.expando]?t:new h.Event(v,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=m.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:h.makeArray(n,[t]),l=h.event.special[v]||{},i||!l.trigger||l.trigger.apply(r,n)!==!1)){if(!i&&!l.noBubble&&!h.isWindow(r)){for(a=l.delegateType||v,Y.test(a+v)||(u=u.parentNode);u;u=u.parentNode)d.push(u),c=u;c===(r.ownerDocument||T)&&d.push(c.defaultView||c.parentWindow||e)}p=0;while((u=d[p++])&&!t.isPropagationStopped())t.type=p>1?a:l.bindType||v,s=(h._data(u,"events")||{})[t.type]&&h._data(u,"handle"),s&&s.apply(u,n),s=o&&u[o],s&&s.apply&&h.acceptData(u)&&(t.result=s.apply(u,n),t.result===!1&&t.preventDefault());if(t.type=v,!i&&!t.isDefaultPrevented()&&(!l._default||l._default.apply(d.pop(),n)===!1)&&h.acceptData(r)&&o&&r[v]&&!h.isWindow(r)){c=r[o],c&&(r[o]=null),h.event.triggered=v;try{r[v]()}catch(g){}h.event.triggered=void 0,c&&(r[o]=c)}return t.result}},dispatch:function(e){e=h.event.fix(e);var t,n,i,s,o,u=[],a=r.call(arguments),f=(h._data(this,"events")||{})[e.type]||[],l=h.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){u=h.event.handlers.call(this,e,f),t=0;while((s=u[t++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,n=((h.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,s,o=[],u=t.delegateCount,a=e.target;if(u&&a.nodeType&&(!e.button||"click"!==e.type))for(;a!=this;a=a.parentNode||this)if(1===a.nodeType&&(a.disabled!==!0||"click"!==e.type)){for(i=[],s=0;u>s;s++)r=t[s],n=r.selector+" ",void 0===i[n]&&(i[n]=r.needsContext?h(n,this).index(a)>=0:h.find(n,this,null,[a]).length),i[n]&&i.push(r);i.length&&o.push({elem:a,handlers:i})}return u<t.length&&o.push({elem:this,handlers:t.slice(u)}),o},fix:function(e){if(e[h.expando])return e;var t,n,r,i=e.type,s=e,o=this.fixHooks[i];o||(this.fixHooks[i]=o=G.test(i)?this.mouseHooks:Q.test(i)?this.keyHooks:{}),r=o.props?this.props.concat(o.props):this.props,e=new h.Event(s),t=r.length;while(t--)n=r[t],e[n]=s[n];return e.target||(e.target=s.srcElement||T),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,s):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button,o=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=e.target.ownerDocument||T,i=r.documentElement,n=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?t.toElement:o),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==nt()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===nt()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return h.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return h.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=h.extend(new h.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?h.event.trigger(i,null,t):h.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},h.removeEvent=T.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===B&&(e[r]=null),e.detachEvent(r,n))},h.Event=function(e,t){return this instanceof h.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?et:tt):this.type=e,t&&h.extend(this,t),this.timeStamp=e&&e.timeStamp||h.now(),void (this[h.expando]=!0)):new h.Event(e,t)},h.Event.prototype={isDefaultPrevented:tt,isPropagationStopped:tt,isImmediatePropagationStopped:tt,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=et,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=et,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=et,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},h.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){h.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;return(!i||i!==r&&!h.contains(r,i))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),l.submitBubbles||(h.event.special.submit={setup:function(){return h.nodeName(this,"form")?!1:void h.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=h.nodeName(t,"input")||h.nodeName(t,"button")?t.form:void 0;n&&!h._data(n,"submitBubbles")&&(h.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),h._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&h.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return h.nodeName(this,"form")?!1:void h.event.remove(this,"._submit")}}),l.changeBubbles||(h.event.special.change={setup:function(){return K.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(h.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),h.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),h.event.simulate("change",this,e,!0)})),!1):void h.event.add(this,"beforeactivate._change",function(e){var t=e.target;K.test(t.nodeName)&&!h._data(t,"changeBubbles")&&(h.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||h.event.simulate("change",this.parentNode,e,!0)}),h._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return h.event.remove(this,"._change"),!K.test(this.nodeName)}}),l.focusinBubbles||h.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){h.event.simulate(t,e.target,h.event.fix(e),!0)};h.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=h._data(r,t);i||r.addEventListener(e,n,!0),h._data(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=h._data(r,t)-1;i?h._data(r,t,i):(r.removeEventListener(e,n,!0),h._removeData(r,t))}}}),h.fn.extend({on:function(e,t,n,r,i){var s,o;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(s in e)this.on(s,t,n,e[s],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),r===!1)r=tt;else if(!r)return this;return 1===i&&(o=r,r=function(e){return h().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=h.guid++)),this.each(function(){h.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,h(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=tt),this.each(function(){h.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){h.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?h.event.trigger(e,t,n,!0):void 0}});var it="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",st=/ jQuery\d+="(?:null|\d+)"/g,ot=new RegExp("<(?:"+it+")[\\s/>]","i"),ut=/^\s+/,at=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ft=/<([\w:]+)/,lt=/<tbody/i,ct=/<|&#?\w+;/,ht=/<(?:script|style|link)/i,pt=/checked\s*(?:[^=]|=\s*.checked.)/i,dt=/^$|\/(?:java|ecma)script/i,vt=/^true\/(.*)/,mt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,gt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:l.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},yt=rt(T),bt=yt.appendChild(T.createElement("div"));gt.optgroup=gt.option,gt.tbody=gt.tfoot=gt.colgroup=gt.caption=gt.thead,gt.th=gt.td,h.extend({clone:function(e,t,n){var r,i,s,o,u,a=h.contains(e.ownerDocument,e);if(l.html5Clone||h.isXMLDoc(e)||!ot.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(bt.innerHTML=e.outerHTML,bt.removeChild(s=bt.firstChild)),!(l.noCloneEvent&&l.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||h.isXMLDoc(e)))for(r=wt(s),u=wt(e),o=0;null!=(i=u[o]);++o)r[o]&&kt(i,r[o]);if(t)if(n)for(u=u||wt(e),r=r||wt(s),o=0;null!=(i=u[o]);o++)Ct(i,r[o]);else Ct(e,s);return r=wt(s,"script"),r.length>0&&Nt(r,!a&&wt(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){for(var i,s,o,u,a,f,c,p=e.length,d=rt(t),v=[],m=0;p>m;m++)if(s=e[m],s||0===s)if("object"===h.type(s))h.merge(v,s.nodeType?[s]:s);else if(ct.test(s)){u=u||d.appendChild(t.createElement("div")),a=(ft.exec(s)||["",""])[1].toLowerCase(),c=gt[a]||gt._default,u.innerHTML=c[1]+s.replace(at,"<$1></$2>")+c[2],i=c[0];while(i--)u=u.lastChild;if(!l.leadingWhitespace&&ut.test(s)&&v.push(t.createTextNode(ut.exec(s)[0])),!l.tbody){s="table"!==a||lt.test(s)?"<table>"!==c[1]||lt.test(s)?0:u:u.firstChild,i=s&&s.childNodes.length;while(i--)h.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}h.merge(v,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=d.lastChild}else v.push(t.createTextNode(s));u&&d.removeChild(u),l.appendChecked||h.grep(wt(v,"input"),Et),m=0;while(s=v[m++])if((!r||-1===h.inArray(s,r))&&(o=h.contains(s.ownerDocument,s),u=wt(d.appendChild(s),"script"),o&&Nt(u),n)){i=0;while(s=u[i++])dt.test(s.type||"")&&n.push(s)}return u=null,d},cleanData:function(e,t){for(var r,i,s,o,u=0,a=h.expando,f=h.cache,c=l.deleteExpando,p=h.event.special;null!=(r=e[u]);u++)if((t||h.acceptData(r))&&(s=r[a],o=s&&f[s])){if(o.events)for(i in o.events)p[i]?h.event.remove(r,i):h.removeEvent(r,i,o.handle);f[s]&&(delete f[s],c?delete r[a]:typeof r.removeAttribute!==B?r.removeAttribute(a):r[a]=null,n.push(s))}}}),h.fn.extend({text:function(e){return $(this,function(e){return void 0===e?h.text(this):this.empty().append((this[0]&&this[0].ownerDocument||T).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=St(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=St(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?h.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||h.cleanData(wt(n)),n.parentNode&&(t&&h.contains(n.ownerDocument,n)&&Nt(wt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){1===e.nodeType&&h.cleanData(wt(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&h.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return h.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(st,""):void 0;if(!("string"!=typeof e||ht.test(e)||!l.htmlSerialize&&ot.test(e)||!l.leadingWhitespace&&ut.test(e)||gt[(ft.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(at,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(h.cleanData(wt(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,h.cleanData(wt(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=i.apply([],e);var n,r,s,o,u,a,f=0,c=this.length,p=this,d=c-1,v=e[0],m=h.isFunction(v);if(m||c>1&&"string"==typeof v&&!l.checkClone&&pt.test(v))return this.each(function(n){var r=p.eq(n);m&&(e[0]=v.call(this,n,r.html())),r.domManip(e,t)});if(c&&(a=h.buildFragment(e,this[0].ownerDocument,!1,this),n=a.firstChild,1===a.childNodes.length&&(a=n),n)){for(o=h.map(wt(a,"script"),xt),s=o.length;c>f;f++)r=a,f!==d&&(r=h.clone(r,!0,!0),s&&h.merge(o,wt(r,"script"))),t.call(this[f],r,f);if(s)for(u=o[o.length-1].ownerDocument,h.map(o,Tt),f=0;s>f;f++)r=o[f],dt.test(r.type||"")&&!h._data(r,"globalEval")&&h.contains(u,r)&&(r.src?h._evalUrl&&h._evalUrl(r.src):h.globalEval((r.text||r.textContent||r.innerHTML||"").replace(mt,"")));a=n=null}return this}}),h.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){h.fn[e]=function(e){for(var n,r=0,i=[],o=h(e),u=o.length-1;u>=r;r++)n=r===u?this:this.clone(!0),h(o[r])[t](n),s.apply(i,n.get());return this.pushStack(i)}});var Lt,At={};!function(){var e;l.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,r;return n=T.getElementsByTagName("body")[0],n&&n.style?(t=T.createElement("div"),r=T.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),typeof t.style.zoom!==B&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(T.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(r),e):void 0}}();var _t=/^margin/,Dt=new RegExp("^("+W+")(?!px)[a-z%]+$","i"),Pt,Ht,Bt=/^(top|right|bottom|left)$/;e.getComputedStyle?(Pt=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},Ht=function(e,t,n){var r,i,s,o,u=e.style;return n=n||Pt(e),o=n?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==o||h.contains(e.ownerDocument,e)||(o=h.style(e,t)),Dt.test(o)&&_t.test(t)&&(r=u.width,i=u.minWidth,s=u.maxWidth,u.minWidth=u.maxWidth=u.width=o,o=n.width,u.width=r,u.minWidth=i,u.maxWidth=s)),void 0===o?o:o+""}):T.documentElement.currentStyle&&(Pt=function(e){return e.currentStyle},Ht=function(e,t,n){var r,i,s,o,u=e.style;return n=n||Pt(e),o=n?n[t]:void 0,null==o&&u&&u[t]&&(o=u[t]),Dt.test(o)&&!Bt.test(t)&&(r=u.left,i=e.runtimeStyle,s=i&&i.left,s&&(i.left=e.currentStyle.left),u.left="fontSize"===t?"1em":o,o=u.pixelLeft+"px",u.left=r,s&&(i.left=s)),void 0===o?o:o+""||"auto"}),!function(){var t,n,r,i,s,o,u;if(t=T.createElement("div"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=t.getElementsByTagName("a")[0],n=r&&r.style){n.cssText="float:left;opacity:.5",l.opacity="0.5"===n.opacity,l.cssFloat=!!n.cssFloat,t.style.backgroundClip="content-box",t.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===t.style.backgroundClip,l.boxSizing=""===n.boxSizing||""===n.MozBoxSizing||""===n.WebkitBoxSizing,h.extend(l,{reliableHiddenOffsets:function(){return null==o&&a(),o},boxSizingReliable:function(){return null==s&&a(),s},pixelPosition:function(){return null==i&&a(),i},reliableMarginRight:function(){return null==u&&a(),u}});function a(){var t,n,r,a;n=T.getElementsByTagName("body")[0],n&&n.style&&(t=T.createElement("div"),r=T.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",i=s=!1,u=!0,e.getComputedStyle&&(i="1%"!==(e.getComputedStyle(t,null)||{}).top,s="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,a=t.appendChild(T.createElement("div")),a.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",a.style.marginRight=a.style.width="0",t.style.width="1px",u=!parseFloat((e.getComputedStyle(a,null)||{}).marginRight)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",a=t.getElementsByTagName("td"),a[0].style.cssText="margin:0;border:0;padding:0;display:none",o=0===a[0].offsetHeight,o&&(a[0].style.display="",a[1].style.display="none",o=0===a[0].offsetHeight),n.removeChild(r))}}}(),h.swap=function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i};var Ft=/alpha\([^)]*\)/i,It=/opacity\s*=\s*([^)]*)/,qt=/^(none|table(?!-c[ea]).+)/,Rt=new RegExp("^("+W+")(.*)$","i"),Ut=new RegExp("^([+-])=("+W+")","i"),zt={position:"absolute",visibility:"hidden",display:"block"},Wt={letterSpacing:"0",fontWeight:"400"},Xt=["Webkit","O","Moz","ms"];h.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ht(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":l.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,s,o,u=h.camelCase(t),a=e.style;if(t=h.cssProps[u]||(h.cssProps[u]=Vt(a,u)),o=h.cssHooks[t]||h.cssHooks[u],void 0===n)return o&&"get"in o&&void 0!==(i=o.get(e,!1,r))?i:a[t];if(s=typeof n,"string"===s&&(i=Ut.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(h.css(e,t)),s="number"),null!=n&&n===n&&("number"!==s||h.cssNumber[u]||(n+="px"),l.clearCloneStyle||""!==n||0!==t.indexOf("background")||(a[t]="inherit"),!(o&&"set"in o&&void 0===(n=o.set(e,n,r)))))try{a[t]=n}catch(f){}}},css:function(e,t,n,r){var i,s,o,u=h.camelCase(t);return t=h.cssProps[u]||(h.cssProps[u]=Vt(e.style,u)),o=h.cssHooks[t]||h.cssHooks[u],o&&"get"in o&&(s=o.get(e,!0,n)),void 0===s&&(s=Ht(e,t,r)),"normal"===s&&t in Wt&&(s=Wt[t]),""===n||n?(i=parseFloat(s),n===!0||h.isNumeric(i)?i||0:s):s}}),h.each(["height","width"],function(e,t){h.cssHooks[t]={get:function(e,n,r){return n?qt.test(h.css(e,"display"))&&0===e.offsetWidth?h.swap(e,zt,function(){return Qt(e,t,r)}):Qt(e,t,r):void 0},set:function(e,n,r){var i=r&&Pt(e);return Jt(e,n,r?Kt(e,t,r,l.boxSizing&&"border-box"===h.css(e,"boxSizing",!1,i),i):0)}}}),l.opacity||(h.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=h.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===h.trim(s.replace(Ft,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=Ft.test(s)?s.replace(Ft,i):s+" "+i)}}),h.cssHooks.marginRight=jt(l.reliableMarginRight,function(e,t){return t?h.swap(e,{display:"inline-block"},Ht,[e,"marginRight"]):void 0}),h.each({margin:"",padding:"",border:"Width"},function(e,t){h.cssHooks[e+t]={expand:function(n){for(var r=0,i={},s="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+X[r]+t]=s[r]||s[r-2]||s[0];return i}},_t.test(e)||(h.cssHooks[e+t].set=Jt)}),h.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,s={},o=0;if(h.isArray(t)){for(r=Pt(e),i=t.length;i>o;o++)s[t[o]]=h.css(e,t[o],!1,r);return s}return void 0!==n?h.style(e,t,n):h.css(e,t)},e,t,arguments.length>1)},show:function(){return $t(this,!0)},hide:function(){return $t(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){V(this)?h(this).show():h(this).hide()})}}),h.Tween=Gt,Gt.prototype={constructor:Gt,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(h.cssNumber[n]?"":"px")},cur:function(){var e=Gt.propHooks[this.prop];return e&&e.get?e.get(this):Gt.propHooks._default.get(this)},run:function(e){var t,n=Gt.propHooks[this.prop];return this.pos=t=this.options.duration?h.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Gt.propHooks._default.set(this),this}},Gt.prototype.init.prototype=Gt.prototype,Gt.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=h.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){h.fx.step[e.prop]?h.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[h.cssProps[e.prop]]||h.cssHooks[e.prop])?h.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Gt.propHooks.scrollTop=Gt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},h.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},h.fx=Gt.prototype.init,h.fx.step={};var Yt,Zt,en=/^(?:toggle|show|hide)$/,tn=new RegExp("^(?:([+-])=|)("+W+")([a-z%]*)$","i"),nn=/queueHooks$/,rn=[fn],sn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=tn.exec(t),s=i&&i[3]||(h.cssNumber[e]?"":"px"),o=(h.cssNumber[e]||"px"!==s&&+r)&&tn.exec(h.css(n.elem,e)),u=1,a=20;if(o&&o[3]!==s){s=s||o[3],i=i||[],o=+r||1;do u=u||".5",o/=u,h.style(n.elem,e,o+s);while(u!==(u=n.cur()/r)&&1!==u&&--a)}return i&&(o=n.start=+o||+r||0,n.unit=s,n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]),n}]};h.Animation=h.extend(cn,{tweener:function(e,t){h.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],sn[n]=sn[n]||[],sn[n].unshift(t)},prefilter:function(e,t){t?rn.unshift(e):rn.push(e)}}),h.speed=function(e,t,n){var r=e&&"object"==typeof e?h.extend({},e):{complete:n||!n&&t||h.isFunction(e)&&e,duration:e,easing:n&&t||t&&!h.isFunction(t)&&t};return r.duration=h.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in h.fx.speeds?h.fx.speeds[r.duration]:h.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){h.isFunction(r.old)&&r.old.call(this),r.queue&&h.dequeue(this,r.queue)},r},h.fn.extend({fadeTo:function(e,t,n,r){return this.filter(V).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=h.isEmptyObject(e),s=h.speed(t,n,r),o=function(){var t=cn(this,h.extend({},e),s);(i||h._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",s=h.timers,o=h._data(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&nn.test(i)&&r(o[i]);for(i=s.length;i--;)s[i].elem!==this||null!=e&&s[i].queue!==e||(s[i].anim.stop(n),t=!1,s.splice(i,1));(t||!n)&&h.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=h._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=h.timers,o=r?r.length:0;for(n.finish=!0,h.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;o>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),h.each(["toggle","show","hide"],function(e,t){var n=h.fn[t];h.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(un(t,!0),e,r,i)}}),h.each({slideDown:un("show"),slideUp:un("hide"),slideToggle:un("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){h.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),h.timers=[],h.fx.tick=function(){var e,t=h.timers,n=0;for(Yt=h.now();n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||h.fx.stop(),Yt=void 0},h.fx.timer=function(e){h.timers.push(e),e()?h.fx.start():h.timers.pop()},h.fx.interval=13,h.fx.start=function(){Zt||(Zt=setInterval(h.fx.tick,h.fx.interval))},h.fx.stop=function(){clearInterval(Zt),Zt=null},h.fx.speeds={slow:600,fast:200,_default:400},h.fn.delay=function(e,t){return e=h.fx?h.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e,t,n,r,i;t=T.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=t.getElementsByTagName("a")[0],n=T.createElement("select"),i=n.appendChild(T.createElement("option")),e=t.getElementsByTagName("input")[0],r.style.cssText="top:1px",l.getSetAttribute="t"!==t.className,l.style=/top/.test(r.getAttribute("style")),l.hrefNormalized="/a"===r.getAttribute("href"),l.checkOn=!!e.value,l.optSelected=i.selected,l.enctype=!!T.createElement("form").enctype,n.disabled=!0,l.optDisabled=!i.disabled,e=T.createElement("input"),e.setAttribute("value",""),l.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),l.radioValue="t"===e.value}();var hn=/\r/g;h.fn.extend({val:function(e){var t,n,r,i=this[0];if(arguments.length)return r=h.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,h(this).val()):e,null==i?i="":"number"==typeof i?i+="":h.isArray(i)&&(i=h.map(i,function(e){return null==e?"":e+""})),t=h.valHooks[this.type]||h.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=h.valHooks[i.type]||h.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(hn,""):null==n?"":n)}}),h.extend({valHooks:{option:{get:function(e){var t=h.find.attr(e,"value");return null!=t?t:h.trim(h.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,s="select-one"===e.type||0>i,o=s?null:[],u=s?i+1:r.length,a=0>i?u:s?i:0;u>a;a++)if(n=r[a],!(!n.selected&&a!==i||(l.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&h.nodeName(n.parentNode,"optgroup"))){if(t=h(n).val(),s)return t;o.push(t)}return o},set:function(e,t){var n,r,i=e.options,s=h.makeArray(t),o=i.length;while(o--)if(r=i[o],h.inArray(h.valHooks.option.get(r),s)>=0)try{r.selected=n=!0}catch(u){r.scrollHeight}else r.selected=!1;return n||(e.selectedIndex=-1),i}}}}),h.each(["radio","checkbox"],function(){h.valHooks[this]={set:function(e,t){return h.isArray(t)?e.checked=h.inArray(h(e).val(),t)>=0:void 0}},l.checkOn||(h.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var pn,dn,vn=h.expr.attrHandle,mn=/^(?:checked|selected)$/i,gn=l.getSetAttribute,yn=l.input;h.fn.extend({attr:function(e,t){return $(this,h.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){h.removeAttr(this,e)})}}),h.extend({attr:function(e,t,n){var r,i,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===B?h.prop(e,t,n):(1===s&&h.isXMLDoc(e)||(t=t.toLowerCase(),r=h.attrHooks[t]||(h.expr.match.bool.test(t)?dn:pn)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=h.find.attr(e,t),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void h.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(O);if(s&&1===e.nodeType)while(n=s[i++])r=h.propFix[n]||n,h.expr.match.bool.test(n)?yn&&gn||!mn.test(n)?e[r]=!1:e[h.camelCase("default-"+n)]=e[r]=!1:h.attr(e,n,""),e.removeAttribute(gn?n:r)},attrHooks:{type:{set:function(e,t){if(!l.radioValue&&"radio"===t&&h.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),dn={set:function(e,t,n){return t===!1?h.removeAttr(e,n):yn&&gn||!mn.test(n)?e.setAttribute(!gn&&h.propFix[n]||n,n):e[h.camelCase("default-"+n)]=e[n]=!0,n}},h.each(h.expr.match.bool.source.match(/\w+/g),function(e,t){var n=vn[t]||h.find.attr;vn[t]=yn&&gn||!mn.test(t)?function(e,t,r){var i,s;return r||(s=vn[t],vn[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,vn[t]=s),i}:function(e,t,n){return n?void 0:e[h.camelCase("default-"+t)]?t.toLowerCase():null}}),yn&&gn||(h.attrHooks.value={set:function(e,t,n){return h.nodeName(e,"input")?void (e.defaultValue=t):pn&&pn.set(e,t,n)}}),gn||(pn={set:function(e,t,n){var r=e.getAttributeNode(n);return r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},vn.id=vn.name=vn.coords=function(e,t,n){var r;return n?void 0:(r=e.getAttributeNode(t))&&""!==r.value?r.value:null},h.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:pn.set},h.attrHooks.contenteditable={set:function(e,t,n){pn.set(e,""===t?!1:t,n)}},h.each(["width","height"],function(e,t){h.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),l.style||(h.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var bn=/^(?:input|select|textarea|button|object)$/i,wn=/^(?:a|area)$/i;h.fn.extend({prop:function(e,t){return $(this,h.prop,e,t,arguments.length>1)},removeProp:function(e){return e=h.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),h.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,s,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return s=1!==o||!h.isXMLDoc(e),s&&(t=h.propFix[t]||t,i=h.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=h.find.attr(e,"tabindex");return t?parseInt(t,10):bn.test(e.nodeName)||wn.test(e.nodeName)&&e.href?0:-1}}}}),l.hrefNormalized||h.each(["href","src"],function(e,t){h.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),l.optSelected||(h.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),h.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){h.propFix[this.toLowerCase()]=this}),l.enctype||(h.propFix.enctype="encoding");var En=/[\t\r\n\f]/g;h.fn.extend({addClass:function(e){var t,n,r,i,s,o,u=0,a=this.length,f="string"==typeof e&&e;if(h.isFunction(e))return this.each(function(t){h(this).addClass(e.call(this,t,this.className))});if(f)for(t=(e||"").match(O)||[];a>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(En," "):" ")){s=0;while(i=t[s++])r.indexOf(" "+i+" ")<0&&(r+=i+" ");o=h.trim(r),n.className!==o&&(n.className=o)}return this},removeClass:function(e){var t,n,r,i,s,o,u=0,a=this.length,f=0===arguments.length||"string"==typeof e&&e;if(h.isFunction(e))return this.each(function(t){h(this).removeClass(e.call(this,t,this.className))});if(f)for(t=(e||"").match(O)||[];a>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(En," "):"")){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");o=e?h.trim(r):"",n.className!==o&&(n.className=o)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(h.isFunction(e)?function(n){h(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n){var t,r=0,i=h(this),s=e.match(O)||[];while(t=s[r++])i.hasClass(t)?i.removeClass(t):i.addClass(t)}else(n===B||"boolean"===n)&&(this.className&&h._data(this,"__className__",this.className),this.className=this.className||e===!1?"":h._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(En," ").indexOf(t)>=0)return!0;return!1}}),h.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){h.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),h.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Sn=h.now(),xn=/\?/,Tn=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;h.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,r=null,i=h.trim(t+"");return i&&!h.trim(i.replace(Tn,function(e,t,i,s){return n&&t&&(r=0),0===r?e:(n=i||t,r+=!s-!i,"")}))?Function("return "+i)():h.error("Invalid JSON: "+t)},h.parseXML=function(t){var n,r;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(r=new DOMParser,n=r.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(i){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||h.error("Invalid XML: "+t),n};var Nn,Cn,kn=/#.*$/,Ln=/([?&])_=[^&]*/,An=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,On=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mn=/^(?:GET|HEAD)$/,_n=/^\/\//,Dn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Pn={},Hn={},Bn="*/".concat("*");try{Cn=location.href}catch(jn){Cn=T.createElement("a"),Cn.href="",Cn=Cn.href}Nn=Dn.exec(Cn.toLowerCase())||[],h.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Cn,type:"GET",isLocal:On.test(Nn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Bn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":h.parseJSON,"text xml":h.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?qn(qn(e,h.ajaxSettings),t):qn(h.ajaxSettings,e)},ajaxPrefilter:Fn(Pn),ajaxTransport:Fn(Hn),ajax:function(e,t){function x(e,t,n,r){var f,g,y,w,S,x=t;2!==b&&(b=2,o&&clearTimeout(o),a=void 0,s=r||"",E.readyState=e>0?4:0,f=e>=200&&300>e||304===e,n&&(w=Rn(l,E,n)),w=Un(l,w,E,f),f?(l.ifModified&&(S=E.getResponseHeader("Last-Modified"),S&&(h.lastModified[i]=S),S=E.getResponseHeader("etag"),S&&(h.etag[i]=S)),204===e||"HEAD"===l.type?x="nocontent":304===e?x="notmodified":(x=w.state,g=w.data,y=w.error,f=!y)):(y=x,(e||!x)&&(x="error",0>e&&(e=0))),E.status=e,E.statusText=(t||x)+"",f?d.resolveWith(c,[g,x,E]):d.rejectWith(c,[E,x,y]),E.statusCode(m),m=void 0,u&&p.trigger(f?"ajaxSuccess":"ajaxError",[E,l,f?g:y]),v.fireWith(c,[E,x]),u&&(p.trigger("ajaxComplete",[E,l]),--h.active||h.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r,i,s,o,u,a,f,l=h.ajaxSetup({},t),c=l.context||l,p=l.context&&(c.nodeType||c.jquery)?h(c):h.event,d=h.Deferred(),v=h.Callbacks("once memory"),m=l.statusCode||{},g={},y={},b=0,w="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!f){f={};while(t=An.exec(s))f[t[1].toLowerCase()]=t[2]}t=f[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(l.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else E.always(e[E.status]);return this},abort:function(e){var t=e||w;return a&&a.abort(t),x(0,t),this}};if(d.promise(E).complete=v.add,E.success=E.done,E.error=E.fail,l.url=((e||l.url||Cn)+"").replace(kn,"").replace(_n,Nn[1]+"//"),l.type=t.method||t.type||l.method||l.type,l.dataTypes=h.trim(l.dataType||"*").toLowerCase().match(O)||[""],null==l.crossDomain&&(n=Dn.exec(l.url.toLowerCase()),l.crossDomain=!(!n||n[1]===Nn[1]&&n[2]===Nn[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Nn[3]||("http:"===Nn[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=h.param(l.data,l.traditional)),In(Pn,l,t,E),2===b)return E;u=l.global,u&&0===h.active++&&h.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!Mn.test(l.type),i=l.url,l.hasContent||(l.data&&(i=l.url+=(xn.test(i)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=Ln.test(i)?i.replace(Ln,"$1_="+Sn++):i+(xn.test(i)?"&":"?")+"_="+Sn++)),l.ifModified&&(h.lastModified[i]&&E.setRequestHeader("If-Modified-Since",h.lastModified[i]),h.etag[i]&&E.setRequestHeader("If-None-Match",h.etag[i])),(l.data&&l.hasContent&&l.contentType!==!1||t.contentType)&&E.setRequestHeader("Content-Type",l.contentType),E.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+Bn+"; q=0.01":""):l.accepts["*"]);for(r in l.headers)E.setRequestHeader(r,l.headers[r]);if(!l.beforeSend||l.beforeSend.call(c,E,l)!==!1&&2!==b){w="abort";for(r in{success:1,error:1,complete:1})E[r](l[r]);if(a=In(Hn,l,t,E)){E.readyState=1,u&&p.trigger("ajaxSend",[E,l]),l.async&&l.timeout>0&&(o=setTimeout(function(){E.abort("timeout")},l.timeout));try{b=1,a.send(g,x)}catch(S){if(!(2>b))throw S;x(-1,S)}}else x(-1,"No Transport");return E}return E.abort()},getJSON:function(e,t,n){return h.get(e,t,n,"json")},getScript:function(e,t){return h.get(e,void 0,t,"script")}}),h.each(["get","post"],function(e,t){h[t]=function(e,n,r,i){return h.isFunction(n)&&(i=i||r,r=n,n=void 0),h.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),h.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){h.fn[t]=function(e){return this.on(t,e)}}),h._evalUrl=function(e){return h.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},h.fn.extend({wrapAll:function(e){if(h.isFunction(e))return this.each(function(t){h(this).wrapAll(e.call(this,t))});if(this[0]){var t=h(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(h.isFunction(e)?function(t){h(this).wrapInner(e.call(this,t))}:function(){var t=h(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=h.isFunction(e);return this.each(function(n){h(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){h.nodeName(this,"body")||h(this).replaceWith(this.childNodes)}).end()}}),h.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!l.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||h.css(e,"display"))},h.expr.filters.visible=function(e){return!h.expr.filters.hidden(e)};var zn=/%20/g,Wn=/\[\]$/,Xn=/\r?\n/g,Vn=/^(?:submit|button|image|reset|file)$/i,$n=/^(?:input|select|textarea|keygen)/i;h.param=function(e,t){var n,r=[],i=function(e,t){t=h.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=h.ajaxSettings&&h.ajaxSettings.traditional),h.isArray(e)||e.jquery&&!h.isPlainObject(e))h.each(e,function(){i(this.name,this.value)});else for(n in e)Jn(n,e[n],t,i);return r.join("&").replace(zn,"+")},h.fn.extend({serialize:function(){return h.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=h.prop(this,"elements");return e?h.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!h(this).is(":disabled")&&$n.test(this.nodeName)&&!Vn.test(e)&&(this.checked||!J.test(e))}).map(function(e,t){var n=h(this).val();return null==n?null:h.isArray(n)?h.map(n,function(e){return{name:t.name,value:e.replace(Xn,"\r\n")}}):{name:t.name,value:n.replace(Xn,"\r\n")}}).get()}}),h.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Yn()||Zn()}:Yn;var Kn=0,Qn={},Gn=h.ajaxSettings.xhr();e.ActiveXObject&&h(e).on("unload",function(){for(var e in Qn)Qn[e](void 0,!0)}),l.cors=!!Gn&&"withCredentials"in Gn,Gn=l.ajax=!!Gn,Gn&&h.ajaxTransport(function(e){if(!e.crossDomain||l.cors){var t;return{send:function(n,r){var i,s=e.xhr(),o=++Kn;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)void 0!==n[i]&&s.setRequestHeader(i,n[i]+"");s.send(e.hasContent&&e.data||null),t=function(n,i){var u,a,f;if(t&&(i||4===s.readyState))if(delete Qn[o],t=void 0,s.onreadystatechange=h.noop,i)4!==s.readyState&&s.abort();else{f={},u=s.status,"string"==typeof s.responseText&&(f.text=s.responseText);try{a=s.statusText}catch(l){a=""}u||!e.isLocal||e.crossDomain?1223===u&&(u=204):u=f.text?200:404}f&&r(u,a,f,s.getAllResponseHeaders())},e.async?4===s.readyState?setTimeout(t):s.onreadystatechange=Qn[o]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),h.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return h.globalEval(e),e}}}),h.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),h.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=T.head||h("head")[0]||T.documentElement;return{send:function(r,i){t=T.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||i(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var er=[],tr=/(=)\?(?=&|$)|\?\?/;h.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=er.pop()||h.expando+"_"+Sn++;return this[e]=!0,e}}),h.ajaxPrefilter("json jsonp",function(t,n,r){var i,s,o,u=t.jsonp!==!1&&(tr.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&tr.test(t.data)&&"data");return u||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=h.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,u?t[u]=t[u].replace(tr,"$1"+i):t.jsonp!==!1&&(t.url+=(xn.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||h.error(i+" was not called"),o[0]},t.dataTypes[0]="json",s=e[i],e[i]=function(){o=arguments},r.always(function(){e[i]=s,t[i]&&(t.jsonpCallback=n.jsonpCallback,er.push(i)),o&&h.isFunction(s)&&s(o[0]),o=s=void 0}),"script"):void 0}),h.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||T;var r=w.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=h.buildFragment([e],t,i),i&&i.length&&h(i).remove(),h.merge([],r.childNodes))};var nr=h.fn.load;h.fn.load=function(e,t,n){if("string"!=typeof e&&nr)return nr.apply(this,arguments);var r,i,s,o=this,u=e.indexOf(" ");return u>=0&&(r=h.trim(e.slice(u,e.length)),e=e.slice(0,u)),h.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(s="POST"),o.length>0&&h.ajax({url:e,type:s,dataType:"html",data:t}).done(function(e){i=arguments,o.html(r?h("<div>").append(h.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){o.each(n,i||[e.responseText,t,e])}),this},h.expr.filters.animated=function(e){return h.grep(h.timers,function(t){return e===t.elem}).length};var rr=e.document.documentElement;h.offset={setOffset:function(e,t,n){var r,i,s,o,u,a,f,l=h.css(e,"position"),c=h(e),p={};"static"===l&&(e.style.position="relative"),u=c.offset(),s=h.css(e,"top"),a=h.css(e,"left"),f=("absolute"===l||"fixed"===l)&&h.inArray("auto",[s,a])>-1,f?(r=c.position(),o=r.top,i=r.left):(o=parseFloat(s)||0,i=parseFloat(a)||0),h.isFunction(t)&&(t=t.call(e,n,u)),null!=t.top&&(p.top=t.top-u.top+o),null!=t.left&&(p.left=t.left-u.left+i),"using"in t?t.using.call(e,p):c.css(p)}},h.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){h.offset.setOffset(this,e,t)});var t,n,r={top:0,left:0},i=this[0],s=i&&i.ownerDocument;if(s)return t=s.documentElement,h.contains(t,i)?(typeof i.getBoundingClientRect!==B&&(r=i.getBoundingClientRect()),n=ir(s),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r},position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===h.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),h.nodeName(e[0],"html")||(n=e.offset()),n.top+=h.css(e[0],"borderTopWidth",!0),n.left+=h.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-h.css(r,"marginTop",!0),left:t.left-n.left-h.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||rr;while(e&&!h.nodeName(e,"html")&&"static"===h.css(e,"position"))e=e.offsetParent;return e||rr})}}),h.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);h.fn[e]=function(r){return $(this,function(e,r,i){var s=ir(e);return void 0===i?s?t in s?s[t]:s.document.documentElement[r]:e[r]:void (s?s.scrollTo(n?h(s).scrollLeft():i,n?i:h(s).scrollTop()):e[r]=i)},e,r,arguments.length,null)}}),h.each(["top","left"],function(e,t){h.cssHooks[t]=jt(l.pixelPosition,function(e,n){return n?(n=Ht(e,t),Dt.test(n)?h(e).position()[t]+"px":n):void 0})}),h.each({Height:"height",Width:"width"},function(e,t){h.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){h.fn[r]=function(r,i){var s=arguments.length&&(n||"boolean"!=typeof r),o=n||(r===!0||i===!0?"margin":"border");return $(this,function(t,n,r){var i;return h.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?h.css(t,n,o):h.style(t,n,r,o)},t,s?r:void 0,s,null)}})}),h.fn.size=function(){return this.length},h.fn.andSelf=h.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return h});var sr=e.jQuery,or=e.$;return h.noConflict=function(t){return e.$===h&&(e.$=or),t&&e.jQuery===h&&(e.jQuery=sr),h},typeof t===B&&(e.jQuery=e.$=h),h});
(function(){var e=this,t=e._,n=Array.prototype,r=Object.prototype,i=Function.prototype,s=n.push,o=n.slice,u=n.concat,a=r.toString,f=r.hasOwnProperty,l=Array.isArray,c=Object.keys,h=i.bind,p=function(e){return e instanceof p?e:this instanceof p?void (this._wrapped=e):new p(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=p),exports._=p):e._=p,p.VERSION="1.7.0";var d=function(e,t,n){if(t===void 0)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,s){return e.call(t,n,r,i,s)}}return function(){return e.apply(t,arguments)}};p.iteratee=function(e,t,n){return null==e?p.identity:p.isFunction(e)?d(e,t,n):p.isObject(e)?p.matches(e):p.property(e)},p.each=p.forEach=function(e,t,n){if(null==e)return e;t=d(t,n);var r,i=e.length;if(i===+i)for(r=0;i>r;r++)t(e[r],r,e);else{var s=p.keys(e);for(r=0,i=s.length;i>r;r++)t(e[s[r]],s[r],e)}return e},p.map=p.collect=function(e,t,n){if(null==e)return[];t=p.iteratee(t,n);for(var r,i=e.length!==+e.length&&p.keys(e),s=(i||e).length,o=Array(s),u=0;s>u;u++)r=i?i[u]:u,o[u]=t(e[r],r,e);return o};var v="Reduce of empty array with no initial value";p.reduce=p.foldl=p.inject=function(e,t,n,r){null==e&&(e=[]),t=d(t,r,4);var i,s=e.length!==+e.length&&p.keys(e),o=(s||e).length,u=0;if(arguments.length<3){if(!o)throw new TypeError(v);n=e[s?s[u++]:u++]}for(;o>u;u++)i=s?s[u]:u,n=t(n,e[i],i,e);return n},p.reduceRight=p.foldr=function(e,t,n,r){null==e&&(e=[]),t=d(t,r,4);var i,s=e.length!==+e.length&&p.keys(e),o=(s||e).length;if(arguments.length<3){if(!o)throw new TypeError(v);n=e[s?s[--o]:--o]}for(;o--;)i=s?s[o]:o,n=t(n,e[i],i,e);return n},p.find=p.detect=function(e,t,n){var r;return t=p.iteratee(t,n),p.some(e,function(e,n,i){return t(e,n,i)?(r=e,!0):void 0}),r},p.filter=p.select=function(e,t,n){var r=[];return null==e?r:(t=p.iteratee(t,n),p.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r)},p.reject=function(e,t,n){return p.filter(e,p.negate(p.iteratee(t)),n)},p.every=p.all=function(e,t,n){if(null==e)return!0;t=p.iteratee(t,n);var r,i,s=e.length!==+e.length&&p.keys(e),o=(s||e).length;for(r=0;o>r;r++)if(i=s?s[r]:r,!t(e[i],i,e))return!1;return!0},p.some=p.any=function(e,t,n){if(null==e)return!1;t=p.iteratee(t,n);var r,i,s=e.length!==+e.length&&p.keys(e),o=(s||e).length;for(r=0;o>r;r++)if(i=s?s[r]:r,t(e[i],i,e))return!0;return!1},p.contains=p.include=function(e,t){return null==e?!1:(e.length!==+e.length&&(e=p.values(e)),p.indexOf(e,t)>=0)},p.invoke=function(e,t){var n=o.call(arguments,2),r=p.isFunction(t);return p.map(e,function(e){return(r?t:e[t]).apply(e,n)})},p.pluck=function(e,t){return p.map(e,p.property(t))},p.where=function(e,t){return p.filter(e,p.matches(t))},p.findWhere=function(e,t){return p.find(e,p.matches(t))},p.max=function(e,t,n){var r,i,s=-1/0,o=-1/0;if(null==t&&null!=e){e=e.length===+e.length?e:p.values(e);for(var u=0,a=e.length;a>u;u++)r=e[u],r>s&&(s=r)}else t=p.iteratee(t,n),p.each(e,function(e,n,r){i=t(e,n,r),(i>o||i===-1/0&&s===-1/0)&&(s=e,o=i)});return s},p.min=function(e,t,n){var r,i,s=1/0,o=1/0;if(null==t&&null!=e){e=e.length===+e.length?e:p.values(e);for(var u=0,a=e.length;a>u;u++)r=e[u],s>r&&(s=r)}else t=p.iteratee(t,n),p.each(e,function(e,n,r){i=t(e,n,r),(o>i||1/0===i&&1/0===s)&&(s=e,o=i)});return s},p.shuffle=function(e){for(var t,n=e&&e.length===+e.length?e:p.values(e),r=n.length,i=Array(r),s=0;r>s;s++)t=p.random(0,s),t!==s&&(i[s]=i[t]),i[t]=n[s];return i},p.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=p.values(e)),e[p.random(e.length-1)]):p.shuffle(e).slice(0,Math.max(0,t))},p.sortBy=function(e,t,n){return t=p.iteratee(t,n),p.pluck(p.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(r>n||r===void 0)return-1}return e.index-t.index}),"value")};var m=function(e){return function(t,n,r){var i={};return n=p.iteratee(n,r),p.each(t,function(r,s){var o=n(r,s,t);e(i,r,o)}),i}};p.groupBy=m(function(e,t,n){p.has(e,n)?e[n].push(t):e[n]=[t]}),p.indexBy=m(function(e,t,n){e[n]=t}),p.countBy=m(function(e,t,n){p.has(e,n)?e[n]++:e[n]=1}),p.sortedIndex=function(e,t,n,r){n=p.iteratee(n,r,1);for(var i=n(t),s=0,o=e.length;o>s;){var u=s+o>>>1;n(e[u])<i?s=u+1:o=u}return s},p.toArray=function(e){return e?p.isArray(e)?o.call(e):e.length===+e.length?p.map(e,p.identity):p.values(e):[]},p.size=function(e){return null==e?0:e.length===+e.length?e.length:p.keys(e).length},p.partition=function(e,t,n){t=p.iteratee(t,n);var r=[],i=[];return p.each(e,function(e,n,s){(t(e,n,s)?r:i).push(e)}),[r,i]},p.first=p.head=p.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:0>t?[]:o.call(e,0,t)},p.initial=function(e,t,n){return o.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},p.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:o.call(e,Math.max(e.length-t,0))},p.rest=p.tail=p.drop=function(e,t,n){return o.call(e,null==t||n?1:t)},p.compact=function(e){return p.filter(e,p.identity)};var g=function(e,t,n,r){if(t&&p.every(e,p.isArray))return u.apply(r,e);for(var i=0,o=e.length;o>i;i++){var a=e[i];p.isArray(a)||p.isArguments(a)?t?s.apply(r,a):g(a,t,n,r):n||r.push(a)}return r};p.flatten=function(e,t){return g(e,t,!1,[])},p.without=function(e){return p.difference(e,o.call(arguments,1))},p.uniq=p.unique=function(e,t,n,r){if(null==e)return[];p.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=p.iteratee(n,r));for(var i=[],s=[],o=0,u=e.length;u>o;o++){var a=e[o];if(t)o&&s===a||i.push(a),s=a;else if(n){var f=n(a,o,e);p.indexOf(s,f)<0&&(s.push(f),i.push(a))}else p.indexOf(i,a)<0&&i.push(a)}return i},p.union=function(){return p.uniq(g(arguments,!0,!0,[]))},p.intersection=function(e){if(null==e)return[];for(var t=[],n=arguments.length,r=0,i=e.length;i>r;r++){var s=e[r];if(!p.contains(t,s)){for(var o=1;n>o&&p.contains(arguments[o],s);o++);o===n&&t.push(s)}}return t},p.difference=function(e){var t=g(o.call(arguments,1),!0,!0,[]);return p.filter(e,function(e){return!p.contains(t,e)})},p.zip=function(e){if(null==e)return[];for(var t=p.max(arguments,"length").length,n=Array(t),r=0;t>r;r++)n[r]=p.pluck(arguments,r);return n},p.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},p.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=p.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}for(;i>r;r++)if(e[r]===t)return r;return-1},p.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=e.length;for("number"==typeof n&&(r=0>n?r+n+1:Math.min(r,n+1));--r>=0;)if(e[r]===t)return r;return-1},p.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),s=0;r>s;s++,e+=n)i[s]=e;return i};var y=function(){};p.bind=function(e,t){var n,r;if(h&&e.bind===h)return h.apply(e,o.call(arguments,1));if(!p.isFunction(e))throw new TypeError("Bind must be called on a function");return n=o.call(arguments,2),r=function(){if(this instanceof r){y.prototype=e.prototype;var i=new y;y.prototype=null;var s=e.apply(i,n.concat(o.call(arguments)));return p.isObject(s)?s:i}return e.apply(t,n.concat(o.call(arguments)))}},p.partial=function(e){var t=o.call(arguments,1);return function(){for(var n=0,r=t.slice(),i=0,s=r.length;s>i;i++)r[i]===p&&(r[i]=arguments[n++]);for(;n<arguments.length;)r.push(arguments[n++]);return e.apply(this,r)}},p.bindAll=function(e){var t,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(t=1;r>t;t++)n=arguments[t],e[n]=p.bind(e[n],e);return e},p.memoize=function(e,t){var n=function(r){var i=n.cache,s=t?t.apply(this,arguments):r;return p.has(i,s)||(i[s]=e.apply(this,arguments)),i[s]};return n.cache={},n},p.delay=function(e,t){var n=o.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},p.defer=function(e){return p.delay.apply(p,[e,1].concat(o.call(arguments,1)))},p.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:p.now(),o=null,s=e.apply(r,i),o||(r=i=null)};return function(){var f=p.now();u||n.leading!==!1||(u=f);var l=t-(f-u);return r=this,i=arguments,0>=l||l>t?(clearTimeout(o),o=null,u=f,s=e.apply(r,i),o||(r=i=null)):o||n.trailing===!1||(o=setTimeout(a,l)),s}},p.debounce=function(e,t,n){var r,i,s,o,u,a=function(){var f=p.now()-o;t>f&&f>0?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i),r||(s=i=null)))};return function(){s=this,i=arguments,o=p.now();var f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i),s=i=null),u}},p.wrap=function(e,t){return p.partial(t,e)},p.negate=function(e){return function(){return!e.apply(this,arguments)}},p.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},p.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},p.before=function(e,t){var n;return function(){return--e>0?n=t.apply(this,arguments):t=null,n}},p.once=p.partial(p.before,2),p.keys=function(e){if(!p.isObject(e))return[];if(c)return c(e);var t=[];for(var n in e)p.has(e,n)&&t.push(n);return t},p.values=function(e){for(var t=p.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=e[t[i]];return r},p.pairs=function(e){for(var t=p.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=[t[i],e[t[i]]];return r},p.invert=function(e){for(var t={},n=p.keys(e),r=0,i=n.length;i>r;r++)t[e[n[r]]]=n[r];return t},p.functions=p.methods=function(e){var t=[];for(var n in e)p.isFunction(e[n])&&t.push(n);return t.sort()},p.extend=function(e){if(!p.isObject(e))return e;for(var t,n,r=1,i=arguments.length;i>r;r++){t=arguments[r];for(n in t)f.call(t,n)&&(e[n]=t[n])}return e},p.pick=function(e,t,n){var r,i={};if(null==e)return i;if(p.isFunction(t)){t=d(t,n);for(r in e){var s=e[r];t(s,r,e)&&(i[r]=s)}}else{var a=u.apply([],o.call(arguments,1));e=new Object(e);for(var f=0,l=a.length;l>f;f++)r=a[f],r in e&&(i[r]=e[r])}return i},p.omit=function(e,t,n){if(p.isFunction(t))t=p.negate(t);else{var r=p.map(u.apply([],o.call(arguments,1)),String);t=function(e,t){return!p.contains(r,t)}}return p.pick(e,t,n)},p.defaults=function(e){if(!p.isObject(e))return e;for(var t=1,n=arguments.length;n>t;t++){var r=arguments[t];for(var i in r)e[i]===void 0&&(e[i]=r[i])}return e},p.clone=function(e){return p.isObject(e)?p.isArray(e)?e.slice():p.extend({},e):e},p.tap=function(e,t){return t(e),e};var b=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof p&&(e=e._wrapped),t instanceof p&&(t=t._wrapped);var i=a.call(e);if(i!==a.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]===e)return r[s]===t;var o=e.constructor,u=t.constructor;if(o!==u&&"constructor"in e&&"constructor"in t&&!(p.isFunction(o)&&o instanceof o&&p.isFunction(u)&&u instanceof u))return!1;n.push(e),r.push(t);var f,l;if("[object Array]"===i){if(f=e.length,l=f===t.length)for(;f--&&(l=b(e[f],t[f],n,r)););}else{var c,h=p.keys(e);if(f=h.length,l=p.keys(t).length===f)for(;f--&&(c=h[f],l=p.has(t,c)&&b(e[c],t[c],n,r)););}return n.pop(),r.pop(),l};p.isEqual=function(e,t){return b(e,t,[],[])},p.isEmpty=function(e){if(null==e)return!0;if(p.isArray(e)||p.isString(e)||p.isArguments(e))return 0===e.length;for(var t in e)if(p.has(e,t))return!1;return!0},p.isElement=function(e){return!!e&&1===e.nodeType},p.isArray=l||function(e){return"[object Array]"===a.call(e)},p.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},p.each(["Arguments","Function","String","Number","Date","RegExp"],function(e){p["is"+e]=function(t){return a.call(t)==="[object "+e+"]"}}),p.isArguments(arguments)||(p.isArguments=function(e){return p.has(e,"callee")}),"function"!=typeof /./&&(p.isFunction=function(e){return"function"==typeof e||!1}),p.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},p.isNaN=function(e){return p.isNumber(e)&&e!==+e},p.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===a.call(e)},p.isNull=function(e){return null===e},p.isUndefined=function(e){return e===void 0},p.has=function(e,t){return null!=e&&f.call(e,t)},p.noConflict=function(){return e._=t,this},p.identity=function(e){return e},p.constant=function(e){return function(){return e}},p.noop=function(){},p.property=function(e){return function(t){return t[e]}},p.matches=function(e){var t=p.pairs(e),n=t.length;return function(e){if(null==e)return!n;e=new Object(e);for(var r=0;n>r;r++){var i=t[r],s=i[0];if(i[1]!==e[s]||!(s in e))return!1}return!0}},p.times=function(e,t,n){var r=Array(Math.max(0,e));t=d(t,n,1);for(var i=0;e>i;i++)r[i]=t(i);return r},p.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},p.now=Date.now||function(){return(new Date).getTime()};var w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},E=p.invert(w),S=function(e){var t=function(t){return e[t]},n="(?:"+p.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};p.escape=S(w),p.unescape=S(E),p.result=function(e,t){if(null==e)return void 0;var n=e[t];return p.isFunction(n)?e[t]():n};var x=0;p.uniqueId=function(e){var t=++x+"";return e?e+t:t},p.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var T=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},C=/\\|'|\r|\n|\u2028|\u2029/g,k=function(e){return"\\"+N[e]};p.template=function(e,t,n){!t&&n&&(t=n),t=p.defaults({},t,p.templateSettings);var r=RegExp([(t.escape||T).source,(t.interpolate||T).source,(t.evaluate||T).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(r,function(t,n,r,o,u){return s+=e.slice(i,u).replace(C,k),i=u+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),t}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(t.variable||"obj","_",s)}catch(u){throw u.source=s,u}var a=function(e){return o.call(this,e,p)},f=t.variable||"obj";return a.source="function("+f+"){\n"+s+"}",a},p.chain=function(e){var t=p(e);return t._chain=!0,t};var L=function(e){return this._chain?p(e).chain():e};p.mixin=function(e){p.each(p.functions(e),function(t){var n=p[t]=e[t];p.prototype[t]=function(){var e=[this._wrapped];return s.apply(e,arguments),L.call(this,n.apply(p,e))}})},p.mixin(p),p.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];p.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],L.call(this,n)}}),p.each(["concat","join","slice"],function(e){var t=n[e];p.prototype[e]=function(){return L.call(this,t.apply(this._wrapped,arguments))}}),p.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return p})}).call(this);

    </script>
    
    <!--script type="text/javascript" src="//naytev.global.ssl.fastly.net/js/embed/53ee0155e4b007b1338e0354.js"></script-->
    

    <script type="text/javascript">
define('widgets/templates/post_base', ['hogan_with_filters'], function (Hogan) {
return {
'user-widget': Hogan.compile('<article class="clearfix user-widget {{#_align_right}}right-align{{/_align_right}}">    <iframe src="{{iframe_url}}" width="100%" scrolling="no" frameborder="0" height="435"></iframe></article>'),
'slideshow': Hogan.compile('<article class="clearfix slideshow {{#_align_right}}right-align{{/_align_right}}{{#top_type}} {{top_type}}-article{{/top_type}}">    {{#is_tw_post}}{{#is_edited}}{{#is_direct_link}}            <a href="{{postLink}}" class="link-out {{#is_tw_post}}tweet-post{{/is_tw_post}}">    {{/is_direct_link}}{{^is_direct_link}}            <a href="{{postLink}}" class="link-in">    {{/is_direct_link}}{{/is_edited}}{{/is_tw_post}}{{^is_tw_post}}{{#is_direct_link}}        <a href="{{postLink}}" class="link-out {{#is_tw_post}}tweet-post{{/is_tw_post}}">    {{/is_direct_link}}{{^is_direct_link}}        <a href="{{postLink}}" class="link-in">    {{/is_direct_link}}{{/is_tw_post}}{{#giant_splash}}{{#giant_splash_image}}        <div class="image giant-splash-size" style="background-image: url({{giant_splash_image}});"><div class="giant-splash-image-overlay"></div></div>    {{/giant_splash_image}}{{^giant_splash_image}}    <div class="image giant-splash-size" style="background-color: #5F9EA0"><div class="giant-splash-image-overlay"></div></div>    {{/giant_splash_image}}{{/giant_splash}}{{#splash}}{{#image}}            <div class="image image528" data-original="{{#image960x400}}{{image960x400}}{{/image960x400}}{{^image960x400}}{{image980x}}{{/image960x400}}"></div>    {{/image}}{{^image}}        <div class="image image528" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_226x218.png) center no-repeat"></div>    {{/image}}{{/splash}}{{#news}}{{#image}}    <!-- <div class="image image254" data-original="{{#image397x306}}{{image397x306}}{{/image397x306}}{{^image397x306}}{{image300x}}{{/image397x306}}"></div> -->        <div class="image image254" style="background-image: url({{#image397x306}}{{image397x306}}{{/image397x306}}{{^image397x306}}{{image300x}}{{/image397x306}})"></div>    {{/image}}{{^image}}    <div class="image image254" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_226x218.png) center no-repeat"></div>    {{/image}}{{/news}}{{#tagged}}{{^splash}}{{#image}}        <!-- <div class="image image252" data-original="{{#image397x306}}{{image397x306}}{{/image397x306}}{{^image397x306}}{{image300x}}{{/image397x306}}"></div> -->            <div class="image image252" style="background-image: url({{#image397x306}}{{image397x306}}{{/image397x306}}{{^image397x306}}{{image300x}}{{/image397x306}})"></div>    {{/image}}{{^image}}        <div class="image image252" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_226x218.png) center no-repeat"></div>    {{/image}}{{/splash}}{{/tagged}}{{#blog}}{{#image}}        <div class="image image366" data-original="{{#image366x152}}{{image366x152}}{{/image366x152}}{{^image366x152}}{{image210x}}{{/image366x152}}"></div>    {{/image}}{{^image}}    <div class="image image366" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_169x162.png) center no-repeat"></div>    {{/image}}{{/blog}}{{#related}}{{#image}}        <div class="image image84" data-original="{{image300x}}"></div>    {{/image}}{{^image}}    <div class="image image84" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_84x81.png) center no-repeat"></div>    {{/image}}{{/related}}{{#popular}}{{#image}}        <div class="image image366" data-original="{{#image366x152}}{{image366x152}}{{/image366x152}}{{^image366x152}}{{image210x}}{{/image366x152}}"></div>    {{/image}}{{^image}}    <div class="image image366" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_84x81.png) center no-repeat"></div>    {{/image}}{{/popular}}{{#community_page}}{{#image}}    <div class="image image246" data-original="{{#image246x266}}{{image246x266}}{{/image246x266}}{{^image246x266}}{{image300x}}{{/image246x266}}"></div>    {{/image}}{{^image}}    <div class="image image246" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_84x81.png) center no-repeat"></div>    {{/image}}{{/community_page}}</a>    <div class="share-post-placeholder"></div>    <div class="headline-container">    {{#is_tw_post}}{{/is_tw_post}}{{^is_tw_post}}{{#is_direct_link}}        <a href="{{postLink}}" class="link-out {{#is_tw_post}}tweet-post{{/is_tw_post}}">    {{/is_direct_link}}{{^is_direct_link}}        <a href="{{postLink}}" class="link-in">    {{/is_direct_link}}{{#frontpage_headline}}            <h4 class="headline">{{frontpage_headline}}</h4>    {{/frontpage_headline}}{{^frontpage_headline}}            <h4 class="headline">{{headline}}</h4>    {{/frontpage_headline}}    </a>    {{/is_tw_post}}</div>    {{#blog}}{{#original_user_subsite}}    <span class="author-name" target="_blank">{{#original_user_subsite.logo}}<!--img  class="author-avatar" src="{{original_user_subsite.logo}}" width="22"  height="22" nopin="nopin"--> {{/original_user_subsite.logo}}By {{original_user_subsite.title}}</span>    {{/original_user_subsite}}{{/blog}}{{#popular}}    <!-- {{#original_user_subsite}}        <span class="author-name" target="_blank">{{#original_user_subsite.logo}}img  class="author-avatar" src="{{original_user_subsite.logo}}" width="22"  height="22" nopin="nopin" {{/original_user_subsite.logo}} By {{original_user_subsite.title}}</span>        {{/original_user_subsite}} -->    {{/popular}}</article>'),
'video': Hogan.compile('<article class="clearfix video {{#_align_right}}right-align{{/_align_right}}">{{#splash}}        {{#video}}    {{#is_tw_post}}<div class="divider">{{/is_tw_post}}            <iframe{{#vine_video}} class="vine-embed"{{/vine_video}} src="{{splash_filtered_video_url}}" width="100%" height="{{#iframe_height}}{{splash_height_math}}{{/iframe_height}}{{^iframe_height}}316{{/iframe_height}}" frameborder="0"></iframe>            {{#is_tw_post}}</div>{{/is_tw_post}}        {{/video}}    {{/splash}}{{^splash}}        {{#is_tw_post}}{{#is_edited}}{{#is_direct_link}}            <a href="{{postLink}}" class="link-out {{#is_tw_post}}tweet-post{{/is_tw_post}}">        {{/is_direct_link}}{{^is_direct_link}}            <a href="{{postLink}}" class="link-in">        {{/is_direct_link}}{{/is_edited}}{{/is_tw_post}}{{^is_tw_post}}{{#is_direct_link}}        <a href="{{postLink}}" class="link-out {{#is_tw_post}}tweet-post{{/is_tw_post}}">        {{/is_direct_link}}{{^is_direct_link}}        <a href="{{postLink}}" class="link-in">        {{/is_direct_link}}{{/is_tw_post}}{{#giant_splash}}{{#giant_splash_image}}        <div class="image giant-splash-size" style="background-image: url({{giant_splash_image}});"><div class="giant-splash-image-overlay"></div></div>        {{/giant_splash_image}}{{^giant_splash_image}}    <div class="image giant-splash-size" style="background-color: #5F9EA0"><div class="giant-splash-image-overlay"></div></div>        {{/giant_splash_image}}{{/giant_splash}}{{#splash}}{{#image}}            <div class="image image528" data-original="{{#image960x400}}{{image960x400}}{{/image960x400}}{{^image960x400}}{{image980x}}{{/image960x400}}"></div>        {{/image}}{{^image}}        <div class="image image528" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_226x218.png) center no-repeat"></div>        {{/image}}{{/splash}}{{#news}}{{#image}}    <!-- <div class="image image254" data-original="{{#image397x306}}{{image397x306}}{{/image397x306}}{{^image397x306}}{{image300x}}{{/image397x306}}"></div> -->            <div class="image image254" style="background-image: url({{#image397x306}}{{image397x306}}{{/image397x306}}{{^image397x306}}{{image300x}}{{/image397x306}})"></div>        {{/image}}{{^image}}    <div class="image image254" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_226x218.png) center no-repeat"></div>        {{/image}}{{/news}}{{#tagged}}{{^splash}}{{#image}}        <!-- <div class="image image252" data-original="{{#image397x306}}{{image397x306}}{{/image397x306}}{{^image397x306}}{{image300x}}{{/image397x306}}"></div> -->                <div class="image image252" style="background-image: url({{#image397x306}}{{image397x306}}{{/image397x306}}{{^image397x306}}{{image300x}}{{/image397x306}})"></div>        {{/image}}{{^image}}        <div class="image image252" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_226x218.png) center no-repeat"></div>        {{/image}}{{/splash}}{{/tagged}}{{#blog}}{{#image}}        <div class="image image366" data-original="{{#image366x152}}{{image366x152}}{{/image366x152}}{{^image366x152}}{{image210x}}{{/image366x152}}"></div>        {{/image}}{{^image}}    <div class="image image366" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_169x162.png) center no-repeat"></div>        {{/image}}{{/blog}}{{#related}}{{#image}}        <div class="image image84" data-original="{{image300x}}"></div>        {{/image}}{{^image}}    <div class="image image84" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_84x81.png) center no-repeat"></div>        {{/image}}{{/related}}{{#popular}}{{#image}}        <div class="image image366" data-original="{{#image366x152}}{{image366x152}}{{/image366x152}}{{^image366x152}}{{image210x}}{{/image366x152}}"></div>        {{/image}}{{^image}}    <div class="image image366" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_84x81.png) center no-repeat"></div>        {{/image}}{{/popular}}{{#community_page}}{{#image}}    <div class="image image246" data-original="{{#image246x266}}{{image246x266}}{{/image246x266}}{{^image246x266}}{{image300x}}{{/image246x266}}"></div>        {{/image}}{{^image}}    <div class="image image246" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_84x81.png) center no-repeat"></div>        {{/image}}{{/community_page}}</a>{{/splash}}    <div class="share-post-placeholder"></div>    <div class="headline-container">    {{#is_tw_post}}{{/is_tw_post}}{{^is_tw_post}}{{#is_direct_link}}        <a href="{{postLink}}" class="link-out {{#is_tw_post}}tweet-post{{/is_tw_post}}">    {{/is_direct_link}}{{^is_direct_link}}        <a href="{{postLink}}" class="link-in">    {{/is_direct_link}}{{#frontpage_headline}}            <h4 class="headline">{{frontpage_headline}}</h4>    {{/frontpage_headline}}{{^frontpage_headline}}            <h4 class="headline">{{headline}}</h4>    {{/frontpage_headline}}    </a>    {{/is_tw_post}}</div>    {{#is_tw_post}}{{#is_edited}}    <div class="collapse-tweet-info" {{^collapse_twitter_info}}style="display: none"{{/collapse_twitter_info}}>            <span class="default"><i class="providers tw-sm"></i></span> In response to <a href="http://twitter.com/{{#author_screen_name}}{{author_screen_name}}{{/author_screen_name}}/status/{{provider_post_id}}" target="_blank">{{author_name}}</a>        </div>        <div class="expand-tweet-info" {{#collapse_twitter_info}}style="display: none"{{/collapse_twitter_info}}>            <div class="author-head clearfix">            <a href="https://twitter.com/intent/user?screen_name=@{{author_screen_name}}" target="_blank" class="user tw-user">                <img src="{{author_avatar}}" width="20" height="20" alt="@{{author_screen_name}}">                <div class="name">{{author_name}} <span class="screen">@{{author_screen_name}}</span></div>            </a>            </div>            <div class="text">                <h4>                    {{#twitter_headline}}{{{twitter_headline}}}{{/twitter_headline}}                    {{^twitter_headline}}{{headline}}{{/twitter_headline}}                </h4>            </div>            <div class="widget-details clearfix">                <div class="pull-left"><a href="http://twitter.com/{{#author_screen_name}}{{author_screen_name}}{{/author_screen_name}}/status/{{provider_post_id}}" class="created_ts default" target="_blank"><span class="providers tw-sm"></span> <span class="widget-date">{{#twitter_formated_date}}{{twitter_formated_date}}{{/twitter_formated_date}}                    {{^twitter_formated_date}}{{formated_updated_ts}}{{/twitter_formated_date}}</span></a></div>                <div class="pull-right">                    <a href="https://twitter.com/intent/tweet?in_reply_to={{provider_post_id}}" target="_blank" style="margin-right: 4px; position: relative; top: -1px" title="Reply" class="tw-reply"><span class="icons reply"></span></a>                    <a href="https://twitter.com/intent/retweet?tweet_id={{provider_post_id}}" target="_blank" style="margin-right: 4px; position: relative; top: -3px" title="ReTweet" class="tw-reTweet"><span class="icons retweet"></span></a>                    <a href="https://twitter.com/intent/favorite?tweet_id={{provider_post_id}}" target="_blank" title="Favorite" class="tw-favorite"><span class="icons favorite"></span></a>                </div>            </div>        </div>    {{/is_edited}}{{/is_tw_post}}    {{#is_body}}<div class="body clearfix">{{{brief}}}{{#has_more}}<br />    {{#is_direct_link}}            <a href="{{original_url}}" target="_blank" class="read-more link-out">    {{/is_direct_link}}{{^is_direct_link}}            <a href="{{post_url}}" class="read-more link-in">    {{/is_direct_link}}            Read more...            </a>          {{/has_more}}</div>    {{/is_body}}    {{#blog}}{{#original_user_subsite}}    <span class="author-name" target="_blank">{{#original_user_subsite.logo}}<!--img  class="author-avatar" src="{{original_user_subsite.logo}}" width="22"  height="22" nopin="nopin"--> {{/original_user_subsite.logo}}By {{original_user_subsite.title}}</span>    {{/original_user_subsite}}{{/blog}}{{#popular}}    <!-- {{#original_user_subsite}}        <span class="author-name" target="_blank">{{#original_user_subsite.logo}}img  class="author-avatar" src="{{original_user_subsite.logo}}" width="22"  height="22" nopin="nopin" {{/original_user_subsite.logo}} By {{original_user_subsite.title}}</span>        {{/original_user_subsite}} -->    {{/popular}}</article>'),
'page': Hogan.compile('<article class="clearfix page {{#_align_right}}right-align{{/_align_right}}">    {{#is_tw_post}}{{#is_edited}}{{#is_direct_link}}            <a href="{{postLink}}" class="link-out {{#is_tw_post}}tweet-post{{/is_tw_post}}">    {{/is_direct_link}}{{^is_direct_link}}            <a href="{{postLink}}" class="link-in">    {{/is_direct_link}}{{/is_edited}}{{/is_tw_post}}{{^is_tw_post}}{{#is_direct_link}}        <a href="{{postLink}}" class="link-out {{#is_tw_post}}tweet-post{{/is_tw_post}}">    {{/is_direct_link}}{{^is_direct_link}}        <a href="{{postLink}}" class="link-in">    {{/is_direct_link}}{{/is_tw_post}}{{#giant_splash}}{{#giant_splash_image}}        <div class="image giant-splash-size" style="background-image: url({{giant_splash_image}});"><div class="giant-splash-image-overlay"></div></div>    {{/giant_splash_image}}{{^giant_splash_image}}    <div class="image giant-splash-size" style="background-color: #5F9EA0"><div class="giant-splash-image-overlay"></div></div>    {{/giant_splash_image}}{{/giant_splash}}{{#splash}}{{#image}}            <div class="image image528" data-original="{{#image960x400}}{{image960x400}}{{/image960x400}}{{^image960x400}}{{image980x}}{{/image960x400}}"></div>    {{/image}}{{^image}}        <div class="image image528" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_226x218.png) center no-repeat"></div>    {{/image}}{{/splash}}{{#news}}{{#image}}    <!-- <div class="image image254" data-original="{{#image397x306}}{{image397x306}}{{/image397x306}}{{^image397x306}}{{image300x}}{{/image397x306}}"></div> -->        <div class="image image254" style="background-image: url({{#image397x306}}{{image397x306}}{{/image397x306}}{{^image397x306}}{{image300x}}{{/image397x306}})"></div>    {{/image}}{{^image}}    <div class="image image254" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_226x218.png) center no-repeat"></div>    {{/image}}{{/news}}{{#tagged}}{{^splash}}{{#image}}        <!-- <div class="image image252" data-original="{{#image397x306}}{{image397x306}}{{/image397x306}}{{^image397x306}}{{image300x}}{{/image397x306}}"></div> -->            <div class="image image252" style="background-image: url({{#image397x306}}{{image397x306}}{{/image397x306}}{{^image397x306}}{{image300x}}{{/image397x306}})"></div>    {{/image}}{{^image}}        <div class="image image252" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_226x218.png) center no-repeat"></div>    {{/image}}{{/splash}}{{/tagged}}{{#blog}}{{#image}}        <div class="image image366" data-original="{{#image366x152}}{{image366x152}}{{/image366x152}}{{^image366x152}}{{image210x}}{{/image366x152}}"></div>    {{/image}}{{^image}}    <div class="image image366" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_169x162.png) center no-repeat"></div>    {{/image}}{{/blog}}{{#related}}{{#image}}        <div class="image image84" data-original="{{image300x}}"></div>    {{/image}}{{^image}}    <div class="image image84" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_84x81.png) center no-repeat"></div>    {{/image}}{{/related}}{{#popular}}{{#image}}        <div class="image image366" data-original="{{#image366x152}}{{image366x152}}{{/image366x152}}{{^image366x152}}{{image210x}}{{/image366x152}}"></div>    {{/image}}{{^image}}    <div class="image image366" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_84x81.png) center no-repeat"></div>    {{/image}}{{/popular}}{{#community_page}}{{#image}}    <div class="image image246" data-original="{{#image246x266}}{{image246x266}}{{/image246x266}}{{^image246x266}}{{image300x}}{{/image246x266}}"></div>    {{/image}}{{^image}}    <div class="image image246" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_84x81.png) center no-repeat"></div>    {{/image}}{{/community_page}}</a>    <div class="headline-container">    {{#is_tw_post}}{{/is_tw_post}}{{^is_tw_post}}{{#is_direct_link}}        <a href="{{postLink}}" class="link-out {{#is_tw_post}}tweet-post{{/is_tw_post}}">    {{/is_direct_link}}{{^is_direct_link}}        <a href="{{postLink}}" class="link-in">    {{/is_direct_link}}{{#frontpage_headline}}            <h4 class="headline">{{frontpage_headline}}</h4>    {{/frontpage_headline}}{{^frontpage_headline}}            <h4 class="headline">{{headline}}</h4>    {{/frontpage_headline}}    </a>    {{/is_tw_post}}</div>    {{#is_tw_post}}{{^blog}}        <div class="collapse-tweet-info" {{^collapse_twitter_info}}style="display: none"{{/collapse_twitter_info}}>                <span class="default"><i class="providers tw-sm"></i></span> In response to <a href="http://twitter.com/{{#author_screen_name}}{{author_screen_name}}{{/author_screen_name}}/status/{{provider_post_id}}" target="_blank">{{author_name}}</a>            </div>            <div class="expand-tweet-info" {{#collapse_twitter_info}}style="display: none"{{/collapse_twitter_info}}>                <div class="author-head clearfix">                <a href="https://twitter.com/intent/user?screen_name=@{{author_screen_name}}" target="_blank" class="user tw-user">                    <img src="{{author_avatar}}" width="20" height="20" alt="@{{author_screen_name}}">                    <div class="name">{{author_name}} <span class="screen">@{{author_screen_name}}</span></div>                </a>                </div>                <div class="text">                    <h4>                        {{#twitter_headline}}{{{twitter_headline}}}{{/twitter_headline}}                        {{^twitter_headline}}{{headline}}{{/twitter_headline}}                    </h4>                </div>                <div class="widget-details clearfix">                    <div class="pull-left"><a href="http://twitter.com/{{#author_screen_name}}{{author_screen_name}}{{/author_screen_name}}/status/{{provider_post_id}}" class="created_ts default" target="_blank"><span class="providers tw-sm"></span> <span class="widget-date">{{#twitter_formated_date}}{{twitter_formated_date}}{{/twitter_formated_date}}                        {{^twitter_formated_date}}{{formated_updated_ts}}{{/twitter_formated_date}}</span></a></div>                    <div class="pull-right">                        <a href="https://twitter.com/intent/tweet?in_reply_to={{provider_post_id}}" target="_blank" style="margin-right: 4px; position: relative; top: -1px" title="Reply" class="tw-reply"><span class="icons reply"></span></a>                        <a href="https://twitter.com/intent/retweet?tweet_id={{provider_post_id}}" target="_blank" style="margin-right: 4px; position: relative; top: -3px" title="ReTweet" class="tw-reTweet"><span class="icons retweet"></span></a>                        <a href="https://twitter.com/intent/favorite?tweet_id={{provider_post_id}}" target="_blank" title="Favorite" class="tw-favorite"><span class="icons favorite"></span></a>                    </div>                </div>            </div>    {{/blog}}{{/is_tw_post}}    {{#is_body}}<div class="body clearfix">{{{brief}}}{{#has_more}}<br />    {{#is_direct_link}}            <a href="{{original_url}}" target="_blank" class="read-more link-out">    {{/is_direct_link}}{{^is_direct_link}}            <a href="{{post_url}}" class="read-more link-in">    {{/is_direct_link}}            Read more...            </a>          {{/has_more}}</div>    {{/is_body}}    {{#blog}}{{#original_user_subsite}}    <span class="author-name" target="_blank">{{#original_user_subsite.logo}}<!--img  class="author-avatar" src="{{original_user_subsite.logo}}" width="22"  height="22" nopin="nopin"--> {{/original_user_subsite.logo}}By {{original_user_subsite.title}}</span>    {{/original_user_subsite}}{{/blog}}{{#popular}}    <!-- {{#original_user_subsite}}        <span class="author-name" target="_blank">{{#original_user_subsite.logo}}img  class="author-avatar" src="{{original_user_subsite.logo}}" width="22"  height="22" nopin="nopin" {{/original_user_subsite.logo}} By {{original_user_subsite.title}}</span>        {{/original_user_subsite}} -->    {{/popular}}</article>'),
'image': Hogan.compile('<article class="clearfix photo {{#_align_right}}right-align{{/_align_right}} {{#top_type}}{{top_type}}-article{{/top_type}}">    {{#is_tw_post}}{{#is_edited}}{{#is_direct_link}}            <a href="{{postLink}}" class="link-out {{#is_tw_post}}tweet-post{{/is_tw_post}}">    {{/is_direct_link}}{{^is_direct_link}}            <a href="{{postLink}}" class="link-in">    {{/is_direct_link}}{{/is_edited}}{{/is_tw_post}}{{^is_tw_post}}{{#is_direct_link}}        <a href="{{postLink}}" class="link-out {{#is_tw_post}}tweet-post{{/is_tw_post}}">    {{/is_direct_link}}{{^is_direct_link}}        <a href="{{postLink}}" class="link-in">    {{/is_direct_link}}{{/is_tw_post}}{{#giant_splash}}{{#giant_splash_image}}        <div class="image giant-splash-size" style="background-image: url({{giant_splash_image}});"><div class="giant-splash-image-overlay"></div></div>    {{/giant_splash_image}}{{^giant_splash_image}}    <div class="image giant-splash-size" style="background-color: #5F9EA0"><div class="giant-splash-image-overlay"></div></div>    {{/giant_splash_image}}{{/giant_splash}}{{#splash}}{{#image}}            <div class="image image528" data-original="{{#image960x400}}{{image960x400}}{{/image960x400}}{{^image960x400}}{{image980x}}{{/image960x400}}"></div>    {{/image}}{{^image}}        <div class="image image528" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_226x218.png) center no-repeat"></div>    {{/image}}{{/splash}}{{#news}}{{#image}}    <!-- <div class="image image254" data-original="{{#image397x306}}{{image397x306}}{{/image397x306}}{{^image397x306}}{{image300x}}{{/image397x306}}"></div> -->        <div class="image image254" style="background-image: url({{#image397x306}}{{image397x306}}{{/image397x306}}{{^image397x306}}{{image300x}}{{/image397x306}})"></div>    {{/image}}{{^image}}    <div class="image image254" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_226x218.png) center no-repeat"></div>    {{/image}}{{/news}}{{#tagged}}{{^splash}}{{#image}}        <!-- <div class="image image252" data-original="{{#image397x306}}{{image397x306}}{{/image397x306}}{{^image397x306}}{{image300x}}{{/image397x306}}"></div> -->            <div class="image image252" style="background-image: url({{#image397x306}}{{image397x306}}{{/image397x306}}{{^image397x306}}{{image300x}}{{/image397x306}})"></div>    {{/image}}{{^image}}        <div class="image image252" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_226x218.png) center no-repeat"></div>    {{/image}}{{/splash}}{{/tagged}}{{#blog}}{{#image}}        <div class="image image366" data-original="{{#image366x152}}{{image366x152}}{{/image366x152}}{{^image366x152}}{{image210x}}{{/image366x152}}"></div>    {{/image}}{{^image}}    <div class="image image366" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_169x162.png) center no-repeat"></div>    {{/image}}{{/blog}}{{#related}}{{#image}}        <div class="image image84" data-original="{{image300x}}"></div>    {{/image}}{{^image}}    <div class="image image84" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_84x81.png) center no-repeat"></div>    {{/image}}{{/related}}{{#popular}}{{#image}}        <div class="image image366" data-original="{{#image366x152}}{{image366x152}}{{/image366x152}}{{^image366x152}}{{image210x}}{{/image366x152}}"></div>    {{/image}}{{^image}}    <div class="image image366" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_84x81.png) center no-repeat"></div>    {{/image}}{{/popular}}{{#community_page}}{{#image}}    <div class="image image246" data-original="{{#image246x266}}{{image246x266}}{{/image246x266}}{{^image246x266}}{{image300x}}{{/image246x266}}"></div>    {{/image}}{{^image}}    <div class="image image246" style="background: #b3b3b3 url(/static/img/whitelabel/dodo/logos/dodo_bird_84x81.png) center no-repeat"></div>    {{/image}}{{/community_page}}</a>    {{#is_tw_post}}{{^blog}}        <div class="collapse-tweet-info" {{^collapse_twitter_info}}style="display: none"{{/collapse_twitter_info}}>                <span class="default"><i class="providers tw-sm"></i></span> In response to <a href="http://twitter.com/{{#author_screen_name}}{{author_screen_name}}{{/author_screen_name}}/status/{{provider_post_id}}" target="_blank">{{author_name}}</a>            </div>            <div class="expand-tweet-info" {{#collapse_twitter_info}}style="display: none"{{/collapse_twitter_info}}>                <div class="author-head clearfix">                <a href="https://twitter.com/intent/user?screen_name=@{{author_screen_name}}" target="_blank" class="user tw-user">                    <img src="{{author_avatar}}" width="20" height="20" alt="@{{author_screen_name}}">                    <div class="name">{{author_name}} <span class="screen">@{{author_screen_name}}</span></div>                </a>                </div>                <div class="text">                    <h4>                        {{#twitter_headline}}{{{twitter_headline}}}{{/twitter_headline}}                        {{^twitter_headline}}{{headline}}{{/twitter_headline}}                    </h4>                </div>                <div class="widget-details clearfix">                    <div class="pull-left"><a href="http://twitter.com/{{#author_screen_name}}{{author_screen_name}}{{/author_screen_name}}/status/{{provider_post_id}}" class="created_ts default" target="_blank"><span class="providers tw-sm"></span> <span class="widget-date">{{#twitter_formated_date}}{{twitter_formated_date}}{{/twitter_formated_date}}                        {{^twitter_formated_date}}{{formated_updated_ts}}{{/twitter_formated_date}}</span></a></div>                    <div class="pull-right">                        <a href="https://twitter.com/intent/tweet?in_reply_to={{provider_post_id}}" target="_blank" style="margin-right: 4px; position: relative; top: -1px" title="Reply" class="tw-reply"><span class="icons reply"></span></a>                        <a href="https://twitter.com/intent/retweet?tweet_id={{provider_post_id}}" target="_blank" style="margin-right: 4px; position: relative; top: -3px" title="ReTweet" class="tw-reTweet"><span class="icons retweet"></span></a>                        <a href="https://twitter.com/intent/favorite?tweet_id={{provider_post_id}}" target="_blank" title="Favorite" class="tw-favorite"><span class="icons favorite"></span></a>                    </div>                </div>            </div>    {{/blog}}{{/is_tw_post}}    <div class="share-post-placeholder"></div>    <div class="headline-container">    {{#is_tw_post}}{{/is_tw_post}}{{^is_tw_post}}{{#is_direct_link}}        <a href="{{postLink}}" class="link-out {{#is_tw_post}}tweet-post{{/is_tw_post}}">    {{/is_direct_link}}{{^is_direct_link}}        <a href="{{postLink}}" class="link-in">    {{/is_direct_link}}{{#frontpage_headline}}            <h4 class="headline">{{frontpage_headline}}</h4>    {{/frontpage_headline}}{{^frontpage_headline}}            <h4 class="headline">{{headline}}</h4>    {{/frontpage_headline}}    </a>    {{/is_tw_post}}</div>    {{#blog}}{{#original_user_subsite}}    <span class="author-name" target="_blank">{{#original_user_subsite.logo}}<!--img  class="author-avatar" src="{{original_user_subsite.logo}}" width="22"  height="22" nopin="nopin"--> {{/original_user_subsite.logo}}By {{original_user_subsite.title}}</span>    {{/original_user_subsite}}{{/blog}}{{#popular}}    <!-- {{#original_user_subsite}}        <span class="author-name" target="_blank">{{#original_user_subsite.logo}}img  class="author-avatar" src="{{original_user_subsite.logo}}" width="22"  height="22" nopin="nopin" {{/original_user_subsite.logo}} By {{original_user_subsite.title}}</span>        {{/original_user_subsite}} -->    {{/popular}}</article>')
};
});
</script>
    <script type="text/javascript">
define('widgets/templates/post_page_base', ['hogan_with_filters'], function (Hogan) {
return {
'image': Hogan.compile('<div class="article-content" id="article-content">    <article class="photo clearfix {{^display_giant_splash}}no-splash{{/display_giant_splash}}">{{^display_giant_splash}}            {{#image}}<div class="article-media">            {{#original_url}}    <a href="{{#original_url}}{{ original_url }}{{/original_url}}" target="rm_out">            {{/original_url}}{{#image640x364}}            <img src="{{image640x364}}" data-height="364" />            {{/image640x364}}{{^image640x364}}            <img src="{{image}}" data-height="{{image_height}}" />            {{/image640x364}}{{#original_url}}    </a>            {{/original_url}}    {{#photo_credit}}<div class="article-photo-credit">{{{photo_credit}}}</div>{{/photo_credit}}            </div>            {{/image}}            {{#is_tw_post}}{{#is_edited}}        <div class="headline-container"><h1 class="headline">{{headline}}</h1></div>            {{/is_edited}}{{^is_edited}}{{#twitter_headline}}	    <div class="headline-container"><h1 class="headline twitter-headline">{{{twitter_headline}}}</h1></div>            {{/twitter_headline}}{{/is_edited}}{{/is_tw_post}}{{^is_tw_post}}    <div class="headline-container"><h1 class="headline">{{headline}}</h1></div>            {{/is_tw_post}}        {{/display_giant_splash}}        <div class="clearfix">            {{#original_user_subsite}}<div class="author-module">                {{#original_user_subsite.logo}}<img src="{{original_user_subsite.logo}}" class="author-photo" nopin = "nopin" />{{/original_user_subsite.logo}}                <span class="author-name">By <a href="{{original_user_subsite.get_uri}}">{{original_user_subsite.title}}</a></span>                <div class="post-date">{{us_formated_full_created_ts}}</div>                <div class="fb-like" data-href="https://www.facebook.com/thedodosite" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false" style="vertical-align: middle; display: inline-block; border:none; overflow:hidden; width:295px; height:25px;"></div>            </div>            {{/original_user_subsite}}            <div class="top-share-placeholder share-buttons">                <a href="https://www.facebook.com/sharer/sharer.php?u={{post_url}}" data-track-share="Facebook" class="share share-fb"><i class="icons-share fb"></i></a>                <a href="https://twitter.com/intent/tweet?url={{post_url}}" data-track-share="Twitter" class="share share-tw"><i class="icons-share tw"></i></a>                <div class="buttons-fade">                    <a href="#" data-track-share="Email" class="share share-email show-buttons"><i class="icons-share em"></i></a>                    <a href="https://plus.google.com/share?url={{post_url}}" data-track-share="GooglePlus" class="share share-googleplus"><i class="icons-share gp"></i></a>                    <a href="https://www.tumblr.com/share/link?url={{post_url}}" data-track-share="Tumblr" class="share share-tumblr"><i class="icons-share tl"></i></a>                    <a href="#" data-track-share="Pinterest" class="share share-pinterest show-buttons"><i class="icons-share pt"></i></a>                    <a href="http://www.reddit.com/submit?url={{post_url}}" data-track-share="Reddit" class="share share-reddit"><i class="icons-share rd"></i></a>                </div>            </div>        </div>{{#display_disclaimer}}            <div class="disclaimer">                <div class="text">                    <p>This post was created by a member of the Dodo Community, where anyone can post fascinating stories, photos, videos and more. </p>                </div>                <div class="link">                    <a href="/core/in"> Join the Dodo Community here</a>                </div>            </div>        {{/display_disclaimer}}        <div class="article-body">                {{#body}}{{{description}}}{{/body}}        </div>        <div class="share-placeholder"></div>        <div class="share-buttons share-links">            <a class="repost" href="#"><i class="icons-share rp"></i> Repost</a>            <div class="fb-like" data-href="https://www.facebook.com/thedodosite" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>        </div>        <div class="tags">Topics: {{#formatted_tags}}<a href="/tag/{{name}}">{{display_name}}</a> {{/formatted_tags}}</div>        {{#original_user_subsite}}<div class="author-module-bottom clearfix">            {{#original_user_subsite.logo}}<img src="{{original_user_subsite.logo}}" nopin = "nopin" class="author-photo" />{{/original_user_subsite.logo}}            <span class="author-bio">{{{about_html}}}</span>        </div>        {{/original_user_subsite}}        <div class="community-comments-wrp"></div>        <div class="private-comments-wrp"></div>    </article></div>'),
'slideshow': Hogan.compile('<div class="article-content" id="article-content">    <article class="slideshow {{#_align_right}}right-align{{/_align_right}} {{^display_giant_splash}}no-splash{{/display_giant_splash}}">{{^display_giant_splash}}            {{#image}}<div class="article-media">            {{#original_url}}    <a href="{{#original_url}}{{ original_url }}{{/original_url}}" target="rm_out">            {{/original_url}}{{#image640x364}}            <img src="{{image640x364}}" data-height="364" />            {{/image640x364}}{{^image640x364}}            <img src="{{image}}" data-height="{{image_height}}" />            {{/image640x364}}{{#original_url}}    </a>            {{/original_url}}    {{#photo_credit}}<div class="article-photo-credit">{{{photo_credit}}}</div>{{/photo_credit}}            </div>            {{/image}}            {{#is_tw_post}}{{#is_edited}}        <div class="headline-container"><h1 class="headline">{{headline}}</h1></div>            {{/is_edited}}{{^is_edited}}{{#twitter_headline}}	    <div class="headline-container"><h1 class="headline twitter-headline">{{{twitter_headline}}}</h1></div>            {{/twitter_headline}}{{/is_edited}}{{/is_tw_post}}{{^is_tw_post}}    <div class="headline-container"><h1 class="headline">{{headline}}</h1></div>            {{/is_tw_post}}        {{/display_giant_splash}}{{#is_slideshow_list}}            <div class="clearfix">                {{#original_user_subsite}}<div class="author-module">                    {{#original_user_subsite.logo}}<img src="{{original_user_subsite.logo}}" class="author-photo" nopin = "nopin" />{{/original_user_subsite.logo}}                    <span class="author-name">By <a href="{{original_user_subsite.get_uri}}">{{original_user_subsite.title}}</a></span>                    <div class="post-date">{{us_formated_full_created_ts}}</div>                    <div class="fb-like" data-href="https://www.facebook.com/thedodosite" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false" style="vertical-align: middle; display: inline-block; border:none; overflow:hidden; width:295px; height:25px;"></div>                </div>                {{/original_user_subsite}}                <div class="top-share-placeholder share-buttons">                    <a href="https://www.facebook.com/sharer/sharer.php?u={{post_url}}" data-track-share="Facebook" class="share share-fb"><i class="icons-share fb"></i></a>                    <a href="https://twitter.com/intent/tweet?url={{post_url}}" data-track-share="Twitter" class="share share-tw"><i class="icons-share tw"></i></a>                    <div class="buttons-fade">                        <a href="#" data-track-share="Email" class="share share-email show-buttons"><i class="icons-share em"></i></a>                        <a href="https://plus.google.com/share?url={{post_url}}" data-track-share="GooglePlus" class="share share-googleplus"><i class="icons-share gp"></i></a>                        <a href="https://www.tumblr.com/share/link?url={{post_url}}" data-track-share="Tumblr" class="share share-tumblr"><i class="icons-share tl"></i></a>                        <a href="#" data-track-share="Pinterest" class="share share-pinterest show-buttons"><i class="icons-share pt"></i></a>                        <a href="http://www.reddit.com/submit?url={{post_url}}" data-track-share="Reddit" class="share share-reddit"><i class="icons-share rd"></i></a>                    </div>                </div>            </div>            <div class="article-body">                    {{#body}}{{{description}}}{{/body}}            </div>            <div class="article-media">            {{#slideshow}}    <ul class="slideshow-list">            {{#slides}}        <li>            {{#is_slide_image}}                <p>{{{image_caption}}}</p>                            {{#credit_url}}<a href="{{credit_url}}" target="_blank">{{/credit_url}}                                <img src="{{image980x}}" alt="{{#credit_domain}}{{credit_domain}}{{/credit_domain}}" />                            {{#credit_url}}</a>{{/credit_url}}            {{#credit_url}}                <div class="credit clearfix">                                <img src="https://plus.google.com/_/favicon?domain={{credit_domain}}" width="16" height="16" title="{{credit_domain}}">                                <a href="{{credit_url}}" class="favicon original_url" target="_blank">{{credit_domain}}</a>                            </div>            {{/credit_url}}                {{#image_description}}<p>{{{image_description}}}</p>{{/image_description}}            {{/is_slide_image}}{{#is_slide_video}}                <p>{{{image_caption}}}</p>                            <iframe src="{{entity.video}}" width="100%" height="{{#use_square}}822{{/use_square}}{{^use_square}}500{{/use_square}}" frameborder="0"></iframe>            {{#credit_url}}                <div class="credit clearfix">                                <img src="https://plus.google.com/_/favicon?domain={{credit_domain}}" width="16" height="16" title="{{credit_domain}}">                                <a href="{{credit_url}}" class="favicon original_url" target="_blank">{{credit_domain}}</a>                            </div>            {{/credit_url}}                {{#image_description}}<p>{{{image_description}}}</p>{{/image_description}}            {{/is_slide_video}}{{#is_slide_tweet}}                <p>{{{image_caption}}}</p>                            <blockquote class="twitter-tweet"><p>{{entity.tweet_text}}</p> &mdash; {{entity.author_name}} (@{{entity.author_screen_name}}) <a href="https://twitter.com/{{entity.author_screen_name}}/statuses/{{entity.provider_post_id}}">{{entity.created_ts}}</a></blockquote>                            <p>{{#image_description}}<p>{{{image_description}}}</p>{{/image_description}}</p>            {{/is_slide_tweet}}        </li>            {{/slides}}    </ul>            {{/slideshow}}</div>            {{#conclusion}}<div class="article-conclusion">{{{conclusion}}}</div>{{/conclusion}}{{/is_slideshow_list}}{{#is_slideshow_slider}}            <div class="clearfix">                {{#original_user_subsite}}<div class="author-module">                    {{#original_user_subsite.logo}}<img src="{{original_user_subsite.logo}}" class="author-photo" nopin = "nopin" />{{/original_user_subsite.logo}}                    <span class="author-name">By <a href="{{original_user_subsite.get_uri}}">{{original_user_subsite.title}}</a></span>                    <div class="post-date">{{us_formated_full_created_ts}}</div>                    <div class="fb-like" data-href="https://www.facebook.com/thedodosite" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false" style="vertical-align: middle; display: inline-block; border:none; overflow:hidden; width:295px; height:25px;"></div>                </div>                {{/original_user_subsite}}                <div class="top-share-placeholder share-buttons">                    <a href="https://www.facebook.com/sharer/sharer.php?u={{post_url}}" data-track-share="Facebook" class="share share-fb"><i class="icons-share fb"></i></a>                    <a href="https://twitter.com/intent/tweet?url={{post_url}}" data-track-share="Twitter" class="share share-tw"><i class="icons-share tw"></i></a>                    <div class="buttons-fade">                        <a href="#" data-track-share="Email" class="share share-email show-buttons"><i class="icons-share em"></i></a>                        <a href="https://plus.google.com/share?url={{post_url}}" data-track-share="GooglePlus" class="share share-googleplus"><i class="icons-share gp"></i></a>                        <a href="https://www.tumblr.com/share/link?url={{post_url}}" data-track-share="Tumblr" class="share share-tumblr"><i class="icons-share tl"></i></a>                        <a href="#" data-track-share="Pinterest" class="share share-pinterest show-buttons"><i class="icons-share pt"></i></a>                        <a href="http://www.reddit.com/submit?url={{post_url}}" data-track-share="Reddit" class="share share-reddit"><i class="icons-share rd"></i></a>                    </div>                </div>            </div>            <div class="article-media">            {{#slide_image}}    <div class="slideshow-slider">                    <a href="{{#slide_image_url}}{{slide_image_url}}{{/slide_image_url}}"                        {{^slide_image_url}}class="linkin"{{/slide_image_url}} target="_blank">                        <img src="{{slide_image}}" />                    </a>                    <img id="img-pre-loader" src="/static/img/loaders/squares-circle.gif" class="hide loading" />                    <span class="prev-slide">prev</span>                    <span class="next-slide">next</span>                    <div class="article-caption">                        {{#image_caption}}{{{image_caption}}}{{/image_caption}}                    </div>                </div>            {{/slide_image}}    <div class="thumbnails-wrapper">                    <div class="slideshow-wrapper">                        <ul class="slideshow-items" style="{{#slideshow_width}}width:{{slideshow_width}}px{{/slideshow_width}}">            {{#slideshow}}{{#slides}}                <li {{slide_active}}><a href="{{image}}" style="background-image: url({{image35x35}});"></a></li>            {{/slides}}{{/slideshow}}            </ul>                    </div>                </div>            </div>            {{#conclusion}}<div class="article-conclusion">{{{conclusion}}}</div>{{/conclusion}}            <div class="post-share-data favicon clearfix">            {{#original_domain}}{{^is_instagram_post}}        <img src="{{favicon_url}}" width="16" height="16" title="{{original_domain}}">                    <a href="{{original_url}}" class="favicon original_url" target="_blank">{{original_domain}}</a>            {{/is_instagram_post}}{{/original_domain}}</div>            <div class="article-body">                    {{#body}}{{{description}}}{{/body}}            </div>        {{/is_slideshow_slider}}        <div class="share-placeholder"></div>        <div class="share-buttons share-links">            <a class="repost" href="#"><i class="icons-share rp"></i> Repost</a>            <div class="fb-like" data-href="https://www.facebook.com/thedodosite" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>        </div>        <div class="tags">Topics: {{#formatted_tags}}<a href="/tag/{{name}}">{{display_name}}</a> {{/formatted_tags}}</div>        {{#original_user_subsite}}<div class="author-module-bottom clearfix">            {{#original_user_subsite.logo}}<img src="{{original_user_subsite.logo}}" nopin = "nopin" class="author-photo" />{{/original_user_subsite.logo}}            <span class="author-bio">{{{about_html}}}</span>        </div>        {{/original_user_subsite}}    </article></div>'),
'video': Hogan.compile('<div class="article-content" id="article-content">    <article class="video {{#_align_right}}right-align{{/_align_right}} {{^display_giant_splash}}no-splash{{/display_giant_splash}}">{{^display_giant_splash}}            {{#image}}<div class="article-media">            {{#original_url}}    <a href="{{#original_url}}{{ original_url }}{{/original_url}}" target="rm_out">            {{/original_url}}{{#image640x364}}            <img src="{{image640x364}}" data-height="364" />            {{/image640x364}}{{^image640x364}}            <img src="{{image}}" data-height="{{image_height}}" />            {{/image640x364}}{{#original_url}}    </a>            {{/original_url}}    {{#photo_credit}}<div class="article-photo-credit">{{{photo_credit}}}</div>{{/photo_credit}}            </div>            {{/image}}            {{#is_tw_post}}{{#is_edited}}        <div class="headline-container"><h1 class="headline">{{headline}}</h1></div>            {{/is_edited}}{{^is_edited}}{{#twitter_headline}}	    <div class="headline-container"><h1 class="headline twitter-headline">{{{twitter_headline}}}</h1></div>            {{/twitter_headline}}{{/is_edited}}{{/is_tw_post}}{{^is_tw_post}}    <div class="headline-container"><h1 class="headline">{{headline}}</h1></div>            {{/is_tw_post}}        {{/display_giant_splash}}        {{#original_user_subsite}}<div class="author-module">            {{#original_user_subsite.logo}}<img src="{{original_user_subsite.logo}}" class="author-photo" nopin = "nopin" />{{/original_user_subsite.logo}}            <span class="author-name">By <a href="{{original_user_subsite.get_uri}}">{{original_user_subsite.title}}</a></span>            <div class="post-date">{{us_formated_full_created_ts}}</div>            <div class="fb-like" data-href="https://www.facebook.com/thedodosite" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false" style="vertical-align: middle; display: inline-block; border:none; overflow:hidden; width:295px; height:25px;"></div>        </div>        {{/original_user_subsite}}        {{#display_disclaimer}}            <div class="disclaimer">                <div class="text">                    <p>This post was created by a member of the Dodo Community, where anyone can post fascinating stories, photos, videos and more. </p>                </div>                <div class="link">                    <a href="/core/in"> Join the Dodo Community here</a>                </div>            </div>        {{/display_disclaimer}}        {{#video}}<div class="article-media clearfix">            <iframe{{#vine_video}} class="vine-embed"{{/vine_video}} src="" width="100%" height="500" frameborder="0"></iframe>        </div>        {{/video}}        <div class="article-body">                {{#body}}{{{description}}}{{/body}}        </div>        <div class="share-placeholder"></div>        <div class="share-buttons share-links">            <a class="repost" href="#"><i class="icons-share rp"></i> Repost</a>            <div class="fb-like" data-href="https://www.facebook.com/thedodosite" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>        </div>        <div class="tags">Topics: {{#formatted_tags}}<a href="/tag/{{name}}">{{display_name}}</a> {{/formatted_tags}}</div>        {{#original_user_subsite}}<div class="author-module-bottom clearfix">            {{#original_user_subsite.logo}}<img src="{{original_user_subsite.logo}}" nopin = "nopin" class="author-photo" />{{/original_user_subsite.logo}}            <span class="author-bio">{{{about_html}}}</span>        </div>        {{/original_user_subsite}}    </article></div>'),
'page': Hogan.compile('<div class="article-content" id="article-content">    <article class="page clearfix {{^display_giant_splash}}no-splash{{/display_giant_splash}}">        {{#is_tw_post}}{{#is_edited}}        <div class="headline-container"><h1 class="headline">{{headline}}</h1></div>        {{/is_edited}}{{^is_edited}}{{#twitter_headline}}	    <div class="headline-container"><h1 class="headline twitter-headline">{{{twitter_headline}}}</h1></div>        {{/twitter_headline}}{{/is_edited}}{{/is_tw_post}}{{^is_tw_post}}    <div class="headline-container"><h1 class="headline">{{headline}}</h1></div>        {{/is_tw_post}}        <div class="clearfix">            {{#original_user_subsite}}<div class="author-module">                {{#original_user_subsite.logo}}<img src="{{original_user_subsite.logo}}" class="author-photo" nopin = "nopin" />{{/original_user_subsite.logo}}                <span class="author-name">By <a href="{{original_user_subsite.get_uri}}">{{original_user_subsite.title}}</a></span>                <div class="post-date">{{us_formated_full_created_ts}}</div>                <div class="fb-like" data-href="https://www.facebook.com/thedodosite" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false" style="vertical-align: middle; display: inline-block; border:none; overflow:hidden; width:295px; height:25px;"></div>            </div>            {{/original_user_subsite}}            <div class="top-share-placeholder share-buttons">                <a href="https://www.facebook.com/sharer/sharer.php?u={{post_url}}" data-track-share="Facebook" class="share share-fb"><i class="icons-share fb"></i></a>                <a href="https://twitter.com/intent/tweet?url={{post_url}}" data-track-share="Twitter" class="share share-tw"><i class="icons-share tw"></i></a>                <div class="buttons-fade">                    <a href="#" data-track-share="Email" class="share share-email show-buttons"><i class="icons-share em"></i></a>                    <a href="https://plus.google.com/share?url={{post_url}}" data-track-share="GooglePlus" class="share share-googleplus"><i class="icons-share gp"></i></a>                    <a href="https://www.tumblr.com/share/link?url={{post_url}}" data-track-share="Tumblr" class="share share-tumblr"><i class="icons-share tl"></i></a>                    <a href="#" data-track-share="Pinterest" class="share share-pinterest show-buttons"><i class="icons-share pt"></i></a>                    <a href="http://www.reddit.com/submit?url={{post_url}}" data-track-share="Reddit" class="share share-reddit"><i class="icons-share rd"></i></a>                </div>            </div>        </div>{{#display_disclaimer}}            <div class="disclaimer">                <div class="text">                    <p>This post was created by a member of the Dodo Community, where anyone can post fascinating stories, photos, videos and more. </p>                </div>                <div class="link">                    <a href="/core/in"> Join the Dodo Community here</a>                </div>            </div>        {{/display_disclaimer}}        <div class="article-body">                {{#body}}{{{description}}}{{/body}}        </div>        <div class="share-placeholder"></div>        <div class="share-buttons share-links">            <a class="repost" href="#"><i class="icons-share rp"></i> Repost</a>            <div class="fb-like" data-href="https://www.facebook.com/thedodosite" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>        </div>        <div class="tags">Topics: {{#formatted_tags}}<a href="/tag/{{name}}">{{display_name}}</a> {{/formatted_tags}}</div>        {{#original_user_subsite}}<div class="author-module-bottom clearfix">            {{#original_user_subsite.logo}}<img src="{{original_user_subsite.logo}}" nopin = "nopin" class="author-photo" />{{/original_user_subsite.logo}}            <span class="author-bio">{{{about_html}}}</span>        </div>        {{/original_user_subsite}}    </article></div>')
};
});
</script>

    <script type="text/javascript">
    (function () {
        var Settings = {
              site: {"status": 0, "logo": "https://pbs.twimg.com/profile_images/529307205648924672/Z_vpRp8u_bigger.jpeg", "bitly": {"login": "thedodo", "api_key": "R_5e27b28b4e2840529abe3e01dd47b2eb"}, "owner_data": {"is_active": true, "twitter_id": 1604444052, "twitter_name": "dodo"}, "about_html": "For the love of animals.", "sharing_post_texts": {"default_twitter_text_template": "{{Post_Title}} via {{Post_Twitter_Username}} @RebelMouse", "og_image_frontpage": "https://media.rbl.ms/image?u=%2Fmedia%2FB5QMz8iCAAAQeA6.jpg%3Amedium\u0026ho=https%3A%2F%2Fpbs.twimg.com\u0026s=812\u0026h=0bbea70129ce93d06527135cbb39a672d0cf0aa19689bf1f8e09482f00b061f9\u0026size=origin\u0026c=3619836782", "email_title_template": "{{Post_Title}}", "variables": {"Site_Twitter_Username": "@dodo", "Whitelabel_Site_Twitter_Username": "@dodo", "Site_Title": "The Dodo", "Signed_in_User": ""}, "twitter_text_template": "{{Post_Title}} via @dodo", "site_id": 376394, "customized": true, "email_text_template": "Hey, found this on The Dodo and thought you would like it:{{Post_Link}}\n{{Signed_in_User}}", "facebook_desc_template": "For the love of animals. Pass it on.", "og_image_source": 0, "community_twitter_text_template": "{{Post_Title}} by {{Post_Twitter_Username}} via @dodo", "defaults_wo_variables": {"Post_Twitter_Username": "{{Post_Title}} via {{Site_Twitter_Username}}", "Site_Twitter_Username": "{{Post_Title}} via {{Whitelabel_Site_Twitter_Username}}", "ForPaid": "{{Post_Title}}"}, "og_image_uploaded": "", "facebook_title_template": "{{Post_Title}}"}, "post_image_settings": {"origin_file_size": "2000x5000", "ratios": {"246x266": {"sizes": ["246x266"], "order": 3, "title": "tall"}, "202x156": {"sizes": ["202x156", "397x306"], "order": 0, "title": "wide"}, "960x400": {"sizes": ["960x400", "366x152"], "order": 2, "title": "superwide"}, "528x304": {"sizes": ["528x304", "640x364", "1042x600", "1216x700"], "order": 1, "title": "wider"}}, "crop_required": true}, "paid_features": {"enable_twitter_mention_stats": true, "stopped_due_payment_failed": false, "twitter_share_template": true, "sponsored_content": true, "enable_bad_words": false, "allow_custom_theme_on_roar_layout": false, "enterprise": true, "is_paid": true}, "pages": [{"status": 3, "isPublic": false, "page_settings": {"open_in_new_tab": false}, "tags": [""], "url": "Original", "site_id": 376394, "about_html": "Non-aggregated content for Google News", "isUnlisted": true, "order": 1, "isStage": true, "isPrivate": false, "title": "Original", "url_header_image": "", "type": 0, "id": 403664}, {"status": 2, "isPublic": true, "linkout": false, "page_settings": {"open_in_new_tab": false}, "tags": [""], "url": "http://www.thedodo.com/tag/caged", "site_id": 376394, "about_html": "https://www.thedodo.com/tag/caged", "isUnlisted": false, "order": 2, "isStage": false, "isPrivate": false, "title": "Caged", "url_header_image": "", "type": 2, "id": 385043}, {"status": 2, "isPublic": true, "linkout": false, "page_settings": {"open_in_new_tab": false}, "tags": ["SeaWorld"], "url": "http://www.thedodo.com/tag/seaworld/", "site_id": 376394, "about_html": "", "isUnlisted": false, "order": 3, "isStage": false, "isPrivate": false, "title": "SeaWorld", "url_header_image": "", "type": 2, "id": 328508}, {"status": 2, "isPublic": true, "linkout": false, "page_settings": {"open_in_new_tab": false}, "tags": [""], "url": "http://www.thedodo.com/tag/politics", "site_id": 376394, "about_html": "", "isUnlisted": false, "order": 4, "isStage": false, "isPrivate": false, "title": "Politics", "url_header_image": "", "type": 2, "id": 385044}, {"status": 2, "isPublic": true, "linkout": false, "page_settings": {"open_in_new_tab": false}, "tags": [""], "url": "http://www.thedodo.com/tag/wildlife", "site_id": 376394, "about_html": "", "isUnlisted": false, "order": 5, "isStage": false, "isPrivate": false, "title": "Wildlife", "url_header_image": "", "type": 2, "id": 385045}, {"status": 3, "isPublic": false, "page_settings": {"open_in_new_tab": false}, "tags": ["zoos"], "url": "http://www.thedodo.com/tag/zoos", "site_id": 376394, "about_html": "", "isUnlisted": true, "order": 6, "isStage": true, "isPrivate": false, "title": "Zoos", "url_header_image": "", "type": 2, "id": 328510}, {"status": 3, "isPublic": false, "page_settings": {"open_in_new_tab": false}, "tags": ["circuses"], "url": "http://www.thedodo.com/tag/circuses", "site_id": 376394, "about_html": "", "isUnlisted": true, "order": 7, "isStage": true, "isPrivate": false, "title": "Circuses", "url_header_image": "", "type": 2, "id": 328511}, {"status": 2, "isPublic": true, "linkout": false, "page_settings": {"open_in_new_tab": false}, "tags": [""], "url": "http://www.thedodo.com/tag/companions", "site_id": 376394, "about_html": "", "isUnlisted": false, "order": 8, "isStage": false, "isPrivate": false, "title": "Companions", "url_header_image": "", "type": 2, "id": 385046}, {"status": 3, "isPublic": false, "page_settings": {"open_in_new_tab": false}, "tags": ["pets"], "url": "http://www.thedodo.com/tag/pets", "site_id": 376394, "about_html": "https://www.thedodo.com/tag/pets", "isUnlisted": true, "order": 9, "isStage": true, "isPrivate": false, "title": "Pets", "url_header_image": "", "type": 2, "id": 328512}, {"status": 2, "isPublic": true, "linkout": false, "page_settings": {"open_in_new_tab": false}, "tags": ["poaching"], "url": "http://www.thedodo.com/tag/poaching", "site_id": 376394, "about_html": "", "isUnlisted": false, "order": 10, "isStage": false, "isPrivate": false, "title": "Poaching", "url_header_image": "", "type": 2, "id": 328509}, {"status": 3, "isPublic": false, "page_settings": {"open_in_new_tab": false}, "tags": [""], "url": "http://www.thedodo.com/tag/lifestyle", "site_id": 376394, "about_html": "", "isUnlisted": true, "order": 11, "isStage": true, "isPrivate": false, "title": "Lifestyle", "url_header_image": "", "type": 2, "id": 385047}, {"status": 1, "isPublic": false, "page_settings": {"open_in_new_tab": false}, "tags": [""], "url": "http://", "site_id": 376394, "about_html": "", "isUnlisted": false, "order": 12, "isStage": false, "isPrivate": true, "title": "Help Animals", "url_header_image": "", "type": 0, "id": 340795}, {"status": 2, "isPublic": true, "linkout": false, "page_settings": {"open_in_new_tab": false}, "tags": ["dodo heroes"], "url": "http://www.thedodo.com/tag/dodo%20heroes", "site_id": 376394, "about_html": "", "isUnlisted": false, "order": 13, "isStage": false, "isPrivate": false, "title": "Dodo Heroes", "url_header_image": "", "type": 2, "id": 328513}, {"status": 3, "isPublic": false, "page_settings": {"open_in_new_tab": false}, "tags": [""], "url": "DisneyBears", "site_id": 376394, "about_html": "", "isUnlisted": true, "order": 14, "isStage": true, "isPrivate": false, "title": "DisneyBears", "url_header_image": "", "type": 0, "id": 298451}, {"status": 2, "isPublic": true, "linkout": false, "page_settings": {"open_in_new_tab": false}, "tags": [""], "url": "http://www.thedodo.com/tag/pure%20cute", "site_id": 376394, "about_html": "", "isUnlisted": false, "order": 15, "isStage": false, "isPrivate": false, "title": "Pure Cute", "url_header_image": "", "type": 2, "id": 385048}, {"status": 3, "isPublic": false, "page_settings": {"open_in_new_tab": false}, "tags": ["#SnowDog"], "url": "SnowDogs", "site_id": 376394, "about_html": "Why do dogs love the snow? Share your photos, videos and tweets with #SnowDog.", "isUnlisted": true, "order": 16, "isStage": true, "isPrivate": false, "title": "SnowDogs", "url_header_image": "", "type": 0, "id": 252176}, {"status": 2, "isPublic": true, "linkout": false, "page_settings": {"open_in_new_tab": false}, "tags": [""], "url": "community", "site_id": 376394, "about_html": "", "isUnlisted": false, "order": 17, "isStage": false, "isPrivate": false, "title": "community", "url_header_image": "", "type": 0, "id": 229919}, {"status": 3, "isPublic": false, "page_settings": {"open_in_new_tab": false}, "tags": [""], "url": "http://www.thedodo.com/community/", "site_id": 376394, "about_html": "", "isUnlisted": true, "order": 18, "isStage": true, "isPrivate": false, "title": "Dodo Community", "url_header_image": "", "type": 2, "id": 385049}, {"status": 3, "isPublic": false, "page_settings": {"open_in_new_tab": false}, "tags": [""], "url": "More", "site_id": 376394, "about_html": "", "isUnlisted": true, "order": 19, "isStage": true, "isPrivate": false, "title": "More", "url_header_image": "", "type": 0, "id": 287642}, {"status": 3, "isPublic": false, "page_settings": {"open_in_new_tab": false}, "tags": [""], "url": "news", "site_id": 376394, "about_html": "", "isUnlisted": true, "order": 20, "isStage": true, "isPrivate": false, "title": "news", "url_header_image": "", "type": 0, "id": 229918}, {"status": 3, "isPublic": false, "page_settings": {"open_in_new_tab": false}, "tags": [""], "url": "archive", "site_id": 376394, "about_html": "", "isUnlisted": true, "order": 21, "isStage": true, "isPrivate": false, "title": "archive", "url_header_image": "", "type": 0, "id": 274523}, {"status": 3, "isPublic": false, "page_settings": {"open_in_new_tab": false}, "tags": [""], "url": "bears", "site_id": 376394, "about_html": "", "isUnlisted": true, "order": 22, "isStage": true, "isPrivate": false, "title": "bears", "url_header_image": "https://static.rbl.ms/static/img/whitelabel/dodo/disney-bears-header.png", "type": 0, "id": 298150}, {"status": 3, "isPublic": false, "page_settings": {"open_in_new_tab": false}, "tags": [""], "url": "R29Animals", "site_id": 376394, "about_html": "", "isUnlisted": true, "order": 23, "isStage": true, "isPrivate": false, "title": "R29Animals", "url_header_image": "https://static.rbl.ms/static/img/whitelabel/dodo/refinery29-header.jpg", "type": 0, "id": 319097}, {"status": 3, "isPublic": false, "page_settings": {"open_in_new_tab": false}, "tags": [""], "url": "popular", "site_id": 376394, "about_html": "", "isUnlisted": true, "order": 24, "isStage": true, "isPrivate": false, "title": "popular", "url_header_image": "", "type": 0, "id": 328516}, {"status": 3, "isPublic": false, "page_settings": {"open_in_new_tab": false}, "tags": [""], "url": "Facebook", "site_id": 376394, "about_html": "", "isUnlisted": true, "order": 25, "isStage": true, "isPrivate": false, "title": "Facebook", "url_header_image": "", "type": 0, "id": 331923}], "meta_description": "", "name": "thedodolive", "title": "The Dodo", "whitelabel_settings": {"users_notifications_customized": {"1": {"transform_urls_to_whitelabel_urls": ["confirm_email_link"], "enabled": false, "template_path": "email/users/whitelabel/confirmation_{}.html", "context_variables": ["confirm_email_link"], "subject": "Confirm your email"}, "2": {"transform_urls_to_whitelabel_urls": ["link"], "enabled": true, "template_path": "email/admin_roar.html", "context_variables": ["inviter", "type", "link", "sitename"], "subject": "Join {{roar_template_vars.sitename}} as an admin"}}, "url_to_promote": "https://thedodo.com", "server_templates": "whitelabel/", "show_river_widget": false, "path_to_sites": "/community/", "site_id": 376394, "iden": "dodo", "zones": [{"count": 1, "source": "main", "width": 6, "title": "Splash!!", "cells": [{"width": 6, "height": 2}], "type": "splash", "id": "splash", "continues_to": "maingrid"}, {"width": 4, "continues_from": "splash", "source": "main", "title": "Grid", "cells": [{"width": 4, "height": 2}, {"width": 2, "height": 2}, {"width": 2, "height": 2}, {"width": 2, "height": 2}, {"width": 2, "height": 1}, {"width": 1, "height": 1}, {"width": 1, "height": 1}, {"width": 2, "height": 1}, {"width": 2, "height": 1}, {"width": 1, "height": 1}, {"width": 1, "height": 1}, {"width": 2, "height": 1}, {"width": 2, "height": 1}, {"width": 1, "height": 1}, {"width": 1, "height": 1}], "type": "grid", "id": "maingrid", "source_offset": 1, "repeat_group": 1}, {"width": 2, "title": "Blog Posts List", "height": 10, "source": "blog", "type": "list", "repeat_group": 1}, {"width": 6, "title": "Big Carousel", "height": 2, "source": "popular", "type": "carousel", "repeat_group": 1}], "sources": [{"getter": "FRONTPAGE_POSTS", "id": "main"}, {"getter": "FRONTPAGE_POSTS", "id": "blog", "subpage_name": "Community"}, {"getter": "POPULAR_POSTS", "id": "popular"}], "recaptcha_enabled": true, "post_types": ["Advice", "News", "Community"], "post_image_settings": {"origin_file_size": "2000x5000", "ratios": {"246x266": {"sizes": ["246x266"], "order": 3, "title": "tall"}, "202x156": {"sizes": ["202x156", "397x306"], "order": 0, "title": "wide"}, "960x400": {"sizes": ["960x400", "366x152"], "order": 2, "title": "superwide"}, "528x304": {"sizes": ["528x304", "640x364", "1042x600", "1216x700"], "order": 1, "title": "wider"}}, "crop_required": true}, "template_vars": {"email_intro": "Hey, found this on The Dodo and thought you would like it: ", "twitter": "dodo", "privacy_policy_url": "/privacy-policy/", "title_patterns": {"postpage": "{site_title} - {headline}", "subpage": "{site_title} - {subpage_title}", "frontpage": "{site_title}"}, "login_form": {"width": 224, "logo_url": "/static/img/whitelabel/dodo/logo-339x74.png", "height": 77}, "sitename_friends_n": "The Dodo", "congratulations_subtitle": "We are now building your site and will redirect to it in seconds, once it is ready.", "page_card": {"site_id": "1604444052", "site_name": "dodo"}, "meta_description": "Everything Animals", "display_domain": "thedodo.com/community", "sitename": "The Dodo", "welcome_page": {"logo_height": 29, "logo_url": "/static/img/logos/rebelmouse.png", "logo_width": 179}, "display_description": "thedodo.com/community/username will be your Dodo page.", "site_made_congratulations": "Your page is ready now! \u003cspan class=\"checkout-at\"\u003eCheck out your new site and share the news:\u003c/span\u003e", "congratulations_title": "\u003cdiv class=\"mouse-signup\"\u003e\u003c/div\u003e", "newsletter_subscribed_headline": "You're subscribed!", "check_age": false, "additional_signup_info": "\u003cdiv class=\"content\"\u003e\u003cdiv class=\"title\"\u003eWhy Join The Dodo?\u003c/div\u003e\u003cp\u003eBecause you care deeply about animals \u0026ndash; and have great ideas, photos, videos, Vines, etc. that you want to share with the world. Join other community members like \u003ca href=\"https://www.thedodo.com/michelle-obama-pandas-bring-na-487667231.html\" target=\"_blank\"\u003eFirst Lady Michelle Obama\u003c/a\u003e, \u003ca href=\"https://www.thedodo.com/community/BillMaher/cats-dont-belong-in-laboratori-393150091.html\" target=\"_blank\"\u003eBill Maher\u003c/a\u003e, \u003ca href=\"https://www.thedodo.com/community/ariannahuffington/on-the-importance-of-appreciat-387999900.html\" target=\"_blank\"\u003eArianna Huffington\u003c/a\u003e, \"The Cove\" director \u003ca href=\"https://www.thedodo.com/community/louiepsihoyos/\" target=\"_blank\"\u003eLouie Psihoyos\u003c/a\u003e, \"Blackfish\" director \u003ca href=https://www.thedodo.com/community/gabrielacowperthwaite/\" target=\"_blank\"\u003eGabriela Cowperthwaite\u003c/a\u003e, \u003ca href=\"https://www.thedodo.com/community/ricobarry/\" target=\"_blank\"\u003eRic O'Barry\u003c/a\u003e, \u003ca href=\"https://www.thedodo.com/your-cat-the-ultimate-wingman-406772516.html\" target=\"_blank\"\u003eMichael Showalter\u003c/a\u003e, \u003ca href=\"https://www.thedodo.com/greenwald-the-dogs-you-rescue--389145041.html\" target=\"_blank\"\u003eGlenn Greenwald\u003c/a\u003e, \u003ca href=\"https://www.thedodo.com/thanks-to-mayor-de-blasio-nycs-474308577.html\" target=\"_blank\"\u003ePink\u003c/a\u003e, primatologist \u003ca href=\"https://www.thedodo.com/community/FransDeWaal/bonobos-learn-empathy-from-the-386737528.html\" target=\"_blank\"\u003eFrans De Waal\u003c/a\u003e, and CNN's \u003ca href=\"https://www.thedodo.com/community/JakeTapper/a-cat-lovers-complicated-histo-391631885.html\" target=\"_blank\"\u003eJake Tapper\u003c/a\u003e.\u003c/p\u003e \u003cp\u003eThe Dodo's editors will hand-select their favorite posts and feature them on the main site.\u003c/p\u003e\u003c/div\u003e", "signup_name": "Join the Dodo!", "terms_of_service_url": "/terms-of-service/", "share_text": "Love animal news? Join me on @Dodo and check me out at ", "name": "dodo", "newsletter_subscribed_text": "Want to post on The Dodo? Just one more step to join the Community and get your own Dodo page"}, "main_menu": [{"default": true, "title": "Home", "url": "/", "type": 0, "history": true, "active": true, "id": "home", "visibility": true, "order": 0}, {"submenu": [{"permission_required": {"on": "parent_site", "permission": "delete_draft"}, "history": true, "ico": "draft-post", "title": "Drafts", "url": "/core/drafts", "login_required": true, "type": 0, "id": "drafts", "visibility": true, "order": 0}], "login_required": true, "title": "My Feed: The River", "url": "/core/dashboard", "activate_events": ["loadFrontPage"], "history": true, "type": 0, "id": "river", "visibility": true, "order": 1}, {"login_required": true, "title": "My Page", "url": "/community/{{site_name}}", "history": true, "type": 0, "id": "my_page", "visibility": true, "order": 1}, {"permission_required": {"on": "parent_site", "permission": "publish_post"}, "title": "Submissions", "url": "/core/submissions", "login_required": true, "type": 0, "id": "submissions", "visibility": true, "order": 149}, {"submenu": [{"provider": "facebook", "ico": "facebook", "title": "Add Facebook", "url": "/core/users/login/facebook/", "login_required": true, "type": 0, "id": "add-facebook", "visibility": true, "order": 151}, {"provider": "twitter", "ico": "twitter", "title": "Add Twitter", "url": "/core/users/login/twitter/", "login_required": true, "type": 0, "id": "add-twitter", "visibility": true, "order": 152}], "title": "Add accounts", "url": "", "section": true, "login_required": true, "type": 0, "id": "social", "visibility": true, "order": 150}, {"submenu": [{"title": "iPhone", "url": "https://itunes.apple.com/us/app/the-dodo/id892926735?mt=8", "visibility": true, "id": "iphone-app", "type": 0, "order": 152}, {"title": "Android", "url": "https://play.google.com/store/apps/details?id=com.rebelmouse.android.thedodo", "visibility": true, "id": "android-app", "type": 0, "order": 153}], "title": "Get the Apps", "url": "", "section": true, "type": 0, "id": "get-apps", "visibility": true, "order": 151}, {"show_divider": true, "title": "About", "url": "/about-the-dodo-387320140.html", "visibility": true, "id": "about", "type": 0, "order": 154}, {"title": "Log Out", "url": "/core/users/logout", "login_required": true, "visibility": true, "id": "logout", "type": 0, "order": 155}, {"title": "Log In", "url": "/core/in", "login_required": false, "visibility": true, "id": "login", "type": 0, "order": 156}], "posts_api": "whitelabel", "email_confirmed_link": "https://thedodo.com/community/", "APNS_CONF": {"cert": "/usr/local/etc/pushkeyDodo.pem", "is_sandbox": false}, "use_river": true, "use_workflow": false, "front_templates": "whitelabel/", "community_notifications_customized": {"1": {"enabled": false, "context_variables": ["site_title", "twittername", "site_url", "sharer", "unsubscribe_link", "subscribe_url"], "promote_main_site": false, "subject": "{{site_title}} is now on {{whitelabel_site_name}}!", "html_template": "\n    \u003cp\u003e{{site_title}} is now on {{whitelabel_site_name}}.\u003c/p\u003e\n    \u003cp\u003eYou follow {{site_title}} on Twitter as @{{twittername}} and now you can also check out their front page here: \u003ca href=\"{{site_url}}\"\u003e{{site_name}}\u003c/a\u003e\u003c/p\u003e\n    \u003cp\u003e{{sharer}}!\u003c/p\u003e\n    \u003cp\u003eLove their updates? Just \u003ca href=\"{{subscribe_url}}\"\u003eclick here to subscribe\u003c/a\u003e to their daily Rebel Alerts and get their posts in your inbox.\u003c/p\u003e\n    \u003cp style=\"color: gray; font-size: 90%;\"\u003eWant to stop receiving these emails? Click \u003ca style=\"text-decoration:none;\" href=\"{{unsubscribe_link}}\"\u003ehere\u003c/a\u003e\u003c/p\u003e\n", "transform_urls_to_whitelabel_urls": ["unsubscribe_link", "subscribe_url"]}, "2": {"enabled": false, "context_variables": ["site_title", "user_name", "site_url", "sharer", "unsubscribe_link", "subscribe_url"], "promote_main_site": false, "subject": "{{site_title}} is now on {{whitelabel_site_name}}!", "html_template": "\n    \u003cp\u003e{{site_title}} is now on {{whitelabel_site_name}}.\u003c/p\u003e\n    \u003cp\u003eYou and {{user_name}} are friends on Facebook and now you can also check out their front page here: \u003ca href=\"{{site_url}}\"\u003e{{site_name}}\u003c/a\u003e\u003c/p\u003e\n    \u003cp\u003e{{sharer}}!\u003c/p\u003e\n    \u003cp\u003eLove their updates? Just \u003ca href=\"{{subscribe_url}}\"\u003eclick here to subscribe\u003c/a\u003e to their daily Rebel Alerts and get their posts in your inbox.\u003c/p\u003e\n    \u003cp style=\"color: gray; font-size: 90%;\"\u003eWant to stop receiving these emails? Click \u003ca style=\"text-decoration:none;\" href=\"{{unsubscribe_link}}\"\u003ehere\u003c/a\u003e\u003c/p\u003e\n", "transform_urls_to_whitelabel_urls": ["unsubscribe_link", "subscribe_url"]}, "3": {"enabled": false, "context_variables": ["site_title", "instagramname", "site_url", "unsubscribe_link", "subscribe_url"], "promote_main_site": false, "subject": "{{site_title}} is now on {{whitelabel_site_name}}!", "html_template": "\n    \u003cp\u003e{{site_title}} is now on {{whitelabel_site_name}}.\u003c/p\u003e\n    \u003cp\u003eYou follow {{site_title}} on Instagram as {{instagramname}} but now you can also check out their front page here: \u003ca href=\"{{site_url}}\"\u003e{{site_name}}\u003c/a\u003e\u003c/p\u003e\n    \u003cp\u003eLove their updates? Just \u003ca href=\"{{subscribe_url}}\"\u003eclick here to subscribe\u003c/a\u003e to their daily Rebel Alerts and get their posts in your inbox.\u003c/p\u003e\n    \u003cp style=\"color: gray; font-size: 90%;\"\u003eWant to stop receiving these emails? Click \u003ca style=\"text-decoration:none;\" href=\"{{unsubscribe_link}}\"\u003ehere\u003c/a\u003e\u003c/p\u003e\n", "transform_urls_to_whitelabel_urls": ["unsubscribe_link", "subscribe_url"]}, "4": {"transform_urls_to_whitelabel_urls": ["unsubscribe_link"], "enabled": false, "template_path": "email/post_unfreeze.html", "context_variables": ["domain", "site_logo", "site_title", "site_url", "post_url", "post_headline", "site_description", "unsubscribe_link"], "subject": "Your post is now unfrozen"}, "5": {"from_email": "RebelMouse Team \u003cpowered@rebelmouse.com\u003e", "enabled": false, "template_path": "email/mailchimp/mailchimp_campaign_added.html", "context_variables": ["current_day", "mailchimp_account", "title", "unsub_link"], "subject": "You've got a new MailChimp campaign for {{current_day}}"}, "6": {"from_email": "RebelMouse Team \u003cpowered@rebelmouse.com\u003e", "enabled": false, "template_path": "email/payment/power_domain.html", "context_variables": ["pointed_domain", "site_url", "site_logo", "title", "site_title", "username"], "subject": "{{username}}: Welcome to Rebel Prime Time"}, "7": {"from_email": "RebelMouse Team \u003cpowered@rebelmouse.com\u003e", "enabled": false, "template_path": "email/payment/mailchimp_connected.html", "context_variables": ["site_url", "site_logo", "title", "site_title"], "subject": "{{site_title}}: You've connected MailChimp to your RebelMouse"}, "9": {"template_path": "email/welcome_{}.html", "enabled": true, "context_variables": ["username_or_site_name", "site_url", "subscriptions_link", "unsubscribe_link", "dashboard_link", "site_logo", "site_name", "registered_from"], "subject": "Welcome to the Dodo Community!"}, "10": {"enabled": true, "template_path": "email/community/whitelabel/post_repost_{}.html", "context_variables": ["interaction", "post_headline", "acted_site_name", "short_post_url"], "subject": "Your post was featured on {{acted_site_name}}'s Dodo Page!"}, "11": {"enabled": false, "template_path": "email/post_interaction.html", "context_variables": ["interaction", "post_headline", "acted_site_name", "user_name"], "subject": "Your post was liked by {{acted_site_name}}"}, "12": {"enabled": true, "template_path": "email/community/whitelabel/post_feature_{}.html", "context_variables": ["interaction", "post_headline", "acted_site_name", "short_post_url"], "subject": "Your post was featured on The Dodo!"}, "13": {"enabled": true, "template_path": "email/unread_river.html", "context_variables": ["river_events", "user_name", "unsubscribe_link", "dashboard_main", "topic", "roar_name"], "subject": "{{ topic }}"}}, "domains": ["www.thedodo.com", "thedodo.com"], "GCM_CONF": {"api_key": "AIzaSyCiWgv5C8TdJ52mWBZXGL_IGkn6BR81r6g"}, "mail_settings": {"mail_logo": "/static/img/whitelabel/dodo/dodo-logo.png?2", "gif_logo": "/static/img/email/welcome/logo.gif", "stats_mail": "stats@thedodo.com", "from": "Team Dodo \u003ccommunity@thedodo.com\u003e", "small_logo": "/static/img/whitelabel/dodo/dodo-logo.png?2"}, "signup_settings": {"quick_signup": true, "redirect_after_signup": true, "create_feeds": false}, "css_path": "../whitelabel/dodo/"}, "settings": {"auto_update_on_new_content": false, "permalink_view_by_default": false, "post_approval_instagram": false, "exclude_from_search": false, "instagram_shout_out_enabled": false, "tweet_shout_out_enabled": false, "dont_check_tokens_dupes": false, "enabled_friends_notifications": false, "adult_content": false, "rebelalerts_disabled": false, "use_custom_shortener": true, "open_links_in_same_tab": false, "favorites_to_drafts_instagram": false, "media_direct_links_out": false, "site_title_as_home_tab_title": false, "serverside_rendering_only": false, "full_content_from_rss": false, "post_approval_twitter": false, "use_customized_subscription_template": false, "favorites_to_drafts": false}, "id": 376394, "meta_keyword": "", "is_roar": true, "sharing_texts": {"og_image": "https://media.rbl.ms/image?u=%2Fmedia%2FB5QMz8iCAAAQeA6.jpg%3Amedium\u0026ho=https%3A%2F%2Fpbs.twimg.com\u0026s=812\u0026h=0bbea70129ce93d06527135cbb39a672d0cf0aa19689bf1f8e09482f00b061f9\u0026size=origin\u0026c=3619836782", "facebook_subpage_title_template": "{{Subpage_Title}} on {{Site_Title}}'s site", "facebook_title": "The Dodo: For the love of animals", "email_text_template": "\nCheck out {{Site_Title}}'s awesome social front page: {{Site_Link}}\n{{Signed_in_User}}", "twitter_subpage_text_template": "You've got to see {{Site_Twitter_Username}}'s {{Subpage_Title}} page on @RebelMouse {{Subpage_Link}}", "variables": {"Embed_Url": "", "Subpage_Title": "", "Subpage_Link": "", "Site_Title": "The Dodo", "Signed_in_User": "", "Site_Twitter_Username": "@dodo", "Site_Link": "https://www.thedodo.com/", "Site_Bio": "For the love of animals."}, "site_id": 376394, "email_subpage_title_template": "You've got to see {{Site_Title}}'s Front Page", "image_id": 0, "facebook_desc_template": "Pass it on!", "default_subpage_twitter_text_template": "{{Subpage_Title}} on {{Site_Title}}'s site", "facebook_desc": "Pass it on!", "default_twitter_text_template": "You've got to see {{Site_Title}}'s front page on @RebelMouse", "latest_post_image": "https://media.rbl.ms/image?u=%2Fmedia%2FB5QMz8iCAAAQeA6.jpg%3Amedium\u0026ho=https%3A%2F%2Fpbs.twimg.com\u0026s=812\u0026h=0bbea70129ce93d06527135cbb39a672d0cf0aa19689bf1f8e09482f00b061f9\u0026size=origin\u0026c=3619836782", "email_title_template": "You've got to see {{Site_Title}}'s front page", "facebook_subpage_desc_template": "{{Site_Bio}}", "twitter_text_template": "You've got to see {{Site_Twitter_Username}}'s front page on @RebelMouse", "customized": true, "email_subpage_text_template": "\nCheck out the {{Subpage_Title}} page on {{Site_Title}}'s awesome site:\n{{Subpage_Link}}\n{{Signed_in_User}}", "facebook_site_name": "The Dodo", "og_image_source": 0, "og_image_uploaded": "", "facebook_title_template": "The Dodo: For the love of animals"}, "head_custom_js": "", "is_roar_subsite": false, "owner_id": 152996}
            , ServerSideRendering: true
            , is_custom_domain: true
            , domain_site_name: "thedodo.com"
            , providers: {"instagram": {"auth_url": "/core/users/login/instagram/", "name": "instagram"}, "twitter": {"auth_url": "/core/users/login/twitter/", "name": "twitter"}, "googleplus": {"auth_url": "/core/users/login/googleplus/", "name": "googleplus"}, "linkedin": {"auth_url": "/core/users/login/linkedin/", "name": "linkedin"}, "stocktwits": {"auth_url": "/core/users/login/stocktwits/", "name": "stocktwits"}, "giphy": {"auth_url": "/core/users/login/giphy/", "name": "giphy"}, "facebook": {"auth_url": "/core/users/login/facebook/", "name": "facebook"}, "flickr": {"auth_url": "/core/users/login/flickr/", "name": "flickr"}}
            , is_community_site: false
            , is_whitelabel_site: true
            , is_post_page: false
            , giphy_api: {"url": "https://api.giphy.com/v1/gifs/search", "key": "M5NtWWMQpa9BC"}
            , use_river: true
        }
        define('settings', function () {
            return Settings;
        });
    })();
    </script>
    <script>
    var currentUrl = location.protocol + '//' + location.host + location.pathname;
    switch (currentUrl) {
        case "https://www.thedodo.com/":
        case "https://www.thedodo.com":
            (function() {
            var _fbq = window._fbq || (window._fbq = []);
            if (!_fbq.loaded) {
            var fbds = document.createElement('script');
            fbds.async = true;
            fbds.src = '//connect.facebook.net/en_US/fbds.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(fbds, s);
            _fbq.loaded = true;
            }
            _fbq.push(['addPixelId', '720822821302970']);
            })();
            window._fbq = window._fbq || [];
            window._fbq.push(["track", "PixelInitialized", {}]);
            console.log("thedodo.com");
            break;
        case "https://www.thedodo.com/cat-living-in-home-depot-for-1-401344728.html":
        case "https://www.thedodo.com/community/BobComis/the-last-pig-459345722.html":
        case "https://www.thedodo.com/seaworld-cited-by-usda-for-vio-442662091.html":
        case "https://www.thedodo.com/steve-irwins-daughter-becomes--454345897.html":
        case "https://www.thedodo.com/community/RoseMcCoy/why-i-got-arrested-for-protest-386811176.html":
            (function() {
            var _fbq = window._fbq || (window._fbq = []);
            if (!_fbq.loaded) {
            var fbds = document.createElement('script');
            fbds.async = true;
            fbds.src = '//connect.facebook.net/en_US/fbds.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(fbds, s);
            _fbq.loaded = true;
            }
            _fbq.push(['addPixelId', '720822821302970']);
            })();
            window._fbq = window._fbq || [];
            window._fbq.push(["track", "PixelInitialized", {}]);
            console.log("individual pages");
            break;
    }
    </script>

    <!--[if IE]>
        <script type="text/javascript" src="https://static.rbl.ms/static/js-build/libs/html5shiv/html5shiv.js"></script>
    <![endif]-->
<script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="lazyload" src="https://static.rbl.ms/static/js-build/libs/jquery/plugins/jquery.lazyload.js?v=3bc7fdd8aa0e53b2dd399d73fbe21cae"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="backbone" src="https://static.rbl.ms/static/js-build/libs/backbone/backbone.js?v=84b3ec11450a23f96f08a97aa140ab3a"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="sprintf" src="https://static.rbl.ms/static/js-build/libs/sprintf/sprintf.js?v=d3457b5ee96e1d79e0a140f969bd2690"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="jquery.scrollDepth" src="https://static.rbl.ms/static/js-build/libs/jquery/plugins/jquery.scrolldepth.js?v=142692a5410ba18f5519fd4cbebcd42c"></script></head>

<body class="logged-out-user">
    
    <div id="curtain" class="curtain"></div>
    
<div class="mobile-top-banner"></div>
<div class="main-wrapper">
  <div class="menu-overlay"></div>
  <div class="topbar">
    <button class="menu-show-toggle"></button>
    <a href="/" class="show-logo"></a>
    
    <nav id="navbar-nav" class="nav-wrp">
        <ul id="navbar-ul" class="nav-menu clearfix">
            <li><a class="title " href="http://www.thedodo.com/tag/caged">Caged</a>
</li><li><a class="title " href="http://www.thedodo.com/tag/seaworld/">SeaWorld</a>
</li><li><a class="title " href="http://www.thedodo.com/tag/politics">Politics</a>
</li><li><a class="title " href="http://www.thedodo.com/tag/wildlife">Wildlife</a>
</li><li><a class="title " href="http://www.thedodo.com/tag/companions">Companions</a>
</li><li><a class="title " href="http://www.thedodo.com/tag/poaching">Poaching</a>
</li><li><a class="title " href="http://www.thedodo.com/tag/dodo%20heroes">Dodo Heroes</a>
</li><li><a class="title " href="http://www.thedodo.com/tag/pure%20cute">Pure Cute</a>
</li><li><a class="title " href="/community">community</a>
</li>
        </ul>
    </nav>
    
    
</div>
<div class="topbar-fake"></div>
  <nav class="menu-global">
    <a href="/" class="site-logo"></a>
    <div class="main-menu-wrapper">
        <ul id="main-menu" class="main-menu">
        </ul>
        
    </div>
</nav>

  <div class="post-edit-mode"></div>
  <div class="main">
  
<div class="content">
    <div class="article-content no-splash clearfix">
        <h1>The Dodo Privacy Policy</h1>
        <p>Welcome to The Dodo! The Dodo.com, Inc. (The Dodo, we, us, or our) has prepared this Privacy Policy to describe to you our practices regarding the Personal Information (as defined below) we collect from users of our website, located at www.TheDodo.com (the Site) and online services (Services).</p>
        <p><strong>A Note to Users Outside of the United States</strong>. If you are a non U.S. user of the Site or Services, by visiting the Site and/or providing us with information, you acknowledge and agree that your Personal Information may be processed for the purposes identified in the Privacy Policy.  In addition, your Personal Information may be processed in the country in which it was collected and in other countries, including the United States, where laws regarding processing of Personal Information may be less stringent than the laws in your country.  By providing your information, you consent to such transfer.</p>
        <p>So we are clear about the terminology we are using, when we use the phrase Personal Information in this Privacy Policy, we mean information that allows someone to identify or contact you, including, for example, your name, address, telephone number, e-mail address, as well as any other non-public information about you that is associated with or linked to any of the foregoing information. When we use the phrase Anonymous Information in this Privacy Policy, we mean information that is not associated with or linked to your Personal Information. Anonymous Information does not enable identification of or contact with individual persons.</p>

        <h3>Children.</h3>
        <p>Our Services and Site are not directed to children and children are not eligible to use our Services.  Protecting the privacy of children is very important to us.  We do not collect or maintain Personal Information from people we actually know are under 13 years of age, and no part of our Site or Services is designed to attract people under 13 years of age. If we later learn that a user is under 13 years of age, we will take steps to remove that user's Personal Information from our databases and to prevent the user from utilizing the Site and the Services.</p>

        <h3>How We Collect Information.</h3>
        <h4>Personal Information</h4>
        <p>In general, the Personal Information we gather enables us to provide the Services to you and helps us learn more about the use of the Site and/or Services.  We collect Personal Information that you submit to us voluntarily at registration and in the course of your use of the Site and/or Services. To use certain features of the Site, we require you to create an Account by providing your name, email address, and a password. When you communicate with us by sending us an email, we will collect and store any information that is contained in your communications with us. Any information you choose to provide for our use should reflect how much you want other Users to know about you. You can choose not to provide us with certain information, but this may limit the features of the Site or Services you are able to use.</p>

        <p>We understand, however, that the most important thing we have is your content. When you share content (text, images, photographs, messages, comments or any other kind of content that is not your e-mail address) as part of our Services, other users will be able to see it, including anonymous visitors to the Site. Please remember this and be thoughtful about what you transmit. Most of the information you provide us is information you are asking us to make public.</p>

        <p>You may register with us through a third party social networking website (SNS), such as Facebook, using your existing account and log-in credentials on such site. When you click on Connect with us, or a similar connection on the Services, you will be prompted to enter your SNS credentials for the SNS.  By proceeding, you are granting us and our Services access to your information and you are agreeing to the Facebook or other SNSs Terms of Use in your use of the Services.  In this case, we receive information from Facebook or another SNS to make it easier for you to create an Account with us.  Any information that we collect from your Facebook or other SNS account may depend on the privacy settings you have with that SNS, so please consult the SNSs privacy and data practices.  You have the option to disable Facebook Connect at any time by logging into your Account or reviewing the appropriate settings from within your account settings on the applicable SNS.</p>

        <h4>Anonymous Information</h4>
        <p>We collect the following types of Anonymous Information:</p>
        <ul>
            <li>Information Collected by Our Servers.  To make our Site and Services more useful to you, our servers (which may be hosted by a third party service provider) collect information from you, including your browser type, operating system, Internet Protocol (IP) address (a number that is automatically assigned to your computer when you use the Internet, which may vary from session to session), domain name, and/or a date/time stamp for your visit.</li>
            <li>Log Files.  As is true of most websites, we gather certain information automatically and store it in log files.  This information includes IP addresses, browser type, Internet service provider (ISP), referring/exit pages, operating system, date/time stamp, and clickstream data.  We use this information to analyze trends, administer the Site, track users movements around the Site, gather demographic information about our user base as a whole, and better tailor our Services to our users needs.  For example, some of the information may be collected so that when you visit the Site or the Services again, it will recognize you and the information could then be used to serve advertisements and other information appropriate to your interests.  Except as noted in this Privacy Policy, we do not link this automatically-collected data to Personal Information.</li>
            <li>Cookies.  Like many online services, we use cookies to collect information.  Cookies are small pieces of information that a website sends to your computers hard drive while you are viewing the website.  We may use both session Cookies (which expire once you close your web browser) and persistent Cookies (which stay on your computer until you delete them) to provide you with a more personal and interactive experience on our Site.  This type of information is collected to make the Site more useful to you and to tailor the experience with us to meet your special interests and needs.  If you decide at any time that you no longer wish to accept cookies from our Service for any of the purposes described above, then you can instruct your browser, by changing its settings, to stop accepting cookies or to prompt you before accepting a cookie from the websites you visit. Consult your browsers technical information. If you do not accept cookies, however, you may not be able to use all portions of the Service or all functionality of the Service. If you have any questions about how to disable or modify cookies, please let us know at the contact information provided below.</li>
            <li>Collection of Information by Advertisers.  We may use third parties to serve ads on the Site.  Certain third parties may automatically collect information about your visits to this and other websites, your IP address, your ISP, the browser you use to visit our Site (but not your name, address, e-mail address or telephone number).  They do this by using Cookies or other technologies.  Information collected may be used, among other things, to deliver advertising targeted to your interests and to better understand the usage and visitation of our Site and the other sites tracked by these third parties.  This policy does not apply to, and we are not responsible for, Cookies or pixel tags in third party ads, and we encourage you to check the privacy policies of advertisers and/or ad services to learn about their use of Cookies and other technologies.  If you would like more information about this practice and to know your choices about not having this information used by these companies, click here: http://www.aboutads.info/choices.</li>
        </ul>

        <h4>Disclosure  Third Party Cookies</h4>
        <p>We use Google Analytics and other third party services to help analyze how users use the Site.  Such third party services use Cookies to collect information such as how often users visit the Site, what pages they visit, and what other sites they used prior to coming to the Site. We use the information we get from those third parties to improve our Site and Services. For example, Google Analytics collects only the IP address assigned to you on the date you visit the Site, rather than your name or other personally identifying information.  We do not combine the information generated through the use of Google Analytics with your Personal Information. Although Google Analytics plants a persistent Cookie on your web browser to identify you as a unique user the next time you visit the Site, the Cookie cannot be used by anyone but Google.  Googles ability to use and share information collected by Google Analytics about your visits to the Site is restricted by the Google Analytics Terms of Use and the Google Privacy Policy.</p>

        <h3>How We Use Information.</h3>
        <h4>Personal Information</h4>
        <p>We will use your Personal Information to:</p>
        <ul>
            <li>Provide you with Services, including personalizing the Services for you;</li>
            <li>Market our products and services to you that we believe may be of interest to you. For example, we allow advertisers to choose the characteristics of users who will see their advertisements and we may use the attributes we have collected to select the appropriate audience for those advertisements;</li>
            <li>Respond to your requests, resolve disputes and/or troubleshoot problems;</li>
            <li>Improve the quality of the Site and the Services; and</li>
            <li>Communicate with you about the Site and the Services.</li>
        </ul>

        <p>We may also use your Personal Information to create Anonymous Information records by excluding information that makes the information personally identifiable to you.</p>

        <p>We will communicate with you primarily in the form of emails. You can manage the frequency and/or opt out of receiving these communications by changing your settings on the Site and/or clicking the Unsubscribe link at the bottom of each email. Please note that even if you unsubscribe or opt-out, we may still send you Site and Services related communications (e.g., emails related to your account or the Site).</p>

        <h4>Anonymous Information</h4>
        <p>We may use Cookies to keep track of logins and personalize your experience (including by tailoring content to you). We may use other Anonymous Information for our business purposes, including to enhance the Site or Services, improve the content of our software, and customize the Site or Services to you. We may also use your Anonymous Information to contact you, notify you of new content, and/or market our products and services to you on our Site or through our Services.</p>


        <h3>How We Disclose Information.</h3>
        <h4>Personal Information</h4>
        <p>We also disclose certain Personal Information:</p>
        <ul>
            <li>To third party vendors who help us provide the Services or the Site;</li>
            <li>To third parties to whom you ask us to send Personal Information;</li>
            <li>To a parent company, any subsidiaries, joint ventures, or other companies under a common control (collectively, Affiliates), in which case we will require our Affiliates to honor this Privacy Policy;
            </li><li>In connection with or during negotiation of any merger, financing, acquisition or dissolution, transaction or proceeding involving sale, transfer, divestiture, or disclosure of all or a portion of our business or assets.  In the event of an insolvency, bankruptcy, or receivership, Personal Information may also be transferred as a business asset. If another company acquires our company, business, or assets, that company will possess the Personal Information collected by us and will assume the rights and obligations regarding your Personal Information as described in this Privacy Policy; or</li>
            <li>If we believe in good faith that such disclosure is necessary to (a) resolve disputes, investigate problems, or enforce our Terms of Use; (b) comply with relevant laws or to respond to requests from law enforcement or other government officials relating to investigations or alleged illegal activity, in which case we can (and you authorize us to) disclose Personal Information without subpoenas or warrants served on us; or (c) protect and defend our rights or property or the rights and property of you or third parties.</li>
        </ul>

        <p>When you submit information to us for public areas of our Services, we may make it publicly available on our Site, through our Services or on other media and services for our business purposes.</p>

        <p>Some of our Services may enable you to post content to SNSs (e.g., Facebook or Twitter).  If you choose to do this, we will provide information to such SNSs in accordance with your elections.  You acknowledge and agree that you are solely responsible for your use of those websites and that it is your responsibility to review the terms of use and privacy policy of the third party provider of such SNSs.  We will not be responsible or liable for: (i) the availability or accuracy of such SNSs; (ii) the content, products or services on or availability of such SNSs; or (iii) your use of any such SNSs.</p>

        <h4>Anonymous Information</h4>
        <p>We reserve the right to disclose Anonymous Information publicly without restriction.</p>

        <h3>Controlling Your Information.</h3>
        <p>You can review and/or change certain of your Personal Information by logging into the Site and accessing your Account. You authorize us to use and disclose any new or modified information that you provide in accordance with this Privacy Policy, and you agree that we are under no obligation to delete or modify information that you have previously chosen to provide us.</p>

        <p>Upon your request, we will close your Account. We may retain your Personal Information to comply with laws, prevent fraud, resolve disputes, troubleshoot problems, assist with any investigations, enforce our Terms of Use, and take other actions otherwise permitted by law.</p>

        <h3>Information Disclosed to Third Parties</h3>
        <p>This Privacy Policy addresses only our use and disclosure of information we collect from and/or about you on the Site and Services. If you disclose information to others, or authorize us to do the same under this Privacy Policy, the use and disclosure restrictions contained in this Privacy Policy will not apply to any third party. We do not control the privacy policies of third parties, and you are subject to the privacy policies of those third parties where applicable.</p>

        <p>The Site may contain content or links to other websites that are not owned or controlled by us. We have no control over, do not review and are not responsible for the privacy policies of or content displayed on such other websites. When you click on such a link, you will leave our Site and go to another site.  During this process, another entity may collect Personal Information or Anonymous Information from you. The Site may also contain links to other websites controlled by us but which operates under different privacy policies. Please review the privacy policy of any new site you visit.</p>

        <h3>Changes to this Privacy Policy.</h3>
        <p>This Privacy Policy may be updated from time to time for any reason.  We will notify you of any changes to our Privacy Policy by posting the new Privacy Policy here, and we will change the Last Updated date above.  You should consult this Privacy Policy regularly for any changes.</p>

        <h3>Questions:</h3>
        <p>Please email us at <a href="mailto:privacy@thedodo.com">privacy@thedodo.com</a></p>

        <p>This Policy was last revised: January 3, 2014.</p>
    </div>
    <div class="full-width-module">
        <div class="community-title">
            <p>From the <strong>Dodo community</strong></p>
        </div>
        <div class="blog-section"><div class="widget" elid="899061356"><article class="clearfix photo  community-article">
            <a href="https://www.thedodo.com/community/MarcBekoff/sandra-orangutan-declared-a-pe-899018745.html" class="link-out ">
            <div class="image image366" data-original="https://assets.rbl.ms/464622/366x152.jpg"></div>
    </a>
        <div class="share-post-placeholder"></div>
    <div class="headline-container">
            <a href="https://www.thedodo.com/community/MarcBekoff/sandra-orangutan-declared-a-pe-899018745.html" class="link-out ">
                <h4 class="headline">Sandra Orangutan Declared A Person With A Right To Freedom</h4>
        </a>
    </div>
        <span class="author-name" target="_blank"><!--img  class="author-avatar" src="https://media3cdn.r.worldssl.net/i/?u=%2FQsCM8m1.jpg&amp;h=http%3A%2F%2Fi.imgur.com&amp;c=3228309788" width="22"  height="22" nopin="nopin"--> By Marc Bekoff</span>
    </article>
</div><div class="widget" elid="899061019"><article class="clearfix photo  community-article">
            <a href="https://www.thedodo.com/community/WaynePacelle/wolves-get-justice-court-ends--898974054.html" class="link-out ">
            <div class="image image366" data-original="https://assets.rbl.ms/464600/366x152.jpg"></div>
    </a>
        <div class="share-post-placeholder"></div>
    <div class="headline-container">
            <a href="https://www.thedodo.com/community/WaynePacelle/wolves-get-justice-court-ends--898974054.html" class="link-out ">
                <h4 class="headline">Wolves Get Justice: Court Ends Trophy Hunting And Commercial Trapping</h4>
        </a>
    </div>
        <span class="author-name" target="_blank"><!--img  class="author-avatar" src="https://assets.rbl.ms/179991/210x.jpg" width="22"  height="22" nopin="nopin"--> By Wayne Pacelle</span>
    </article>
</div><div class="widget" elid="899060213"><article class="clearfix photo  community-article">
            <a href="https://www.thedodo.com/community/godsake2/disturbing-facts-found-in-seaw-882961343.html" class="link-out ">
            <div class="image image366" data-original="https://assets.rbl.ms/464628/366x152.jpg"></div>
    </a>
        <div class="share-post-placeholder"></div>
    <div class="headline-container">
            <a href="https://www.thedodo.com/community/godsake2/disturbing-facts-found-in-seaw-882961343.html" class="link-out ">
                <h4 class="headline">Disturbing Facts From SeaWorld's Own Research</h4>
        </a>
    </div>
        <span class="author-name" target="_blank"><!--img  class="author-avatar" src="https://assets.rbl.ms/455184/210x.jpg" width="22"  height="22" nopin="nopin"--> By CCTS</span>
    </article>
</div><div class="widget" elid="899059491"><article class="clearfix photo  community-article">
            <a href="https://www.thedodo.com/community/booksforanimallovers/front-lines-of-animal-rescue-798796182.html" class="link-out ">
            <div class="image image366" data-original="https://assets.rbl.ms/464636/366x152.jpg"></div>
    </a>
        <div class="share-post-placeholder"></div>
    <div class="headline-container">
            <a href="https://www.thedodo.com/community/booksforanimallovers/front-lines-of-animal-rescue-798796182.html" class="link-out ">
                <h4 class="headline">Two Memoirs Trace The Pipelines Of Animal Slaughter</h4>
        </a>
    </div>
        <span class="author-name" target="_blank"><!--img  class="author-avatar" src="https://s3.amazonaws.com/assets.rbl.ms/398569/210x.jpg" width="22"  height="22" nopin="nopin"--> By Jeremy N. Townsend</span>
    </article>
</div><div class="widget" elid="899059346"><article class="clearfix photo  community-article">
            <a href="https://www.thedodo.com/community/SharlaStone/facts-and-folklore-setting-the-838824004.html" class="link-out ">
            <div class="image image366" data-original="https://assets.rbl.ms/464641/366x152.jpg"></div>
    </a>
        <div class="share-post-placeholder"></div>
    <div class="headline-container">
            <a href="https://www.thedodo.com/community/SharlaStone/facts-and-folklore-setting-the-838824004.html" class="link-out ">
                <h4 class="headline">Facts And Folklore: Setting The Record Straight On Black Cats</h4>
        </a>
    </div>
        <span class="author-name" target="_blank"><!--img  class="author-avatar" src="https://assets.rbl.ms/427207/210x.jpg" width="22"  height="22" nopin="nopin"--> By Sharla Stone</span>
    </article>
</div><div class="widget" elid="897324392"><article class="clearfix photo  community-article">
            <a href="https://www.thedodo.com/community/EmilyDeschanel/emily-deschanel-my-top-5-vegan-897316495.html" class="link-out ">
            <div class="image image366" data-original="https://assets.rbl.ms/463617/366x152.jpg"></div>
    </a>
        <div class="share-post-placeholder"></div>
    <div class="headline-container">
            <a href="https://www.thedodo.com/community/EmilyDeschanel/emily-deschanel-my-top-5-vegan-897316495.html" class="link-out ">
                <h4 class="headline">Emily Deschanel: My Top 5 Vegan Gifts</h4>
        </a>
    </div>
        <span class="author-name" target="_blank"><!--img  class="author-avatar" src="https://assets.rbl.ms/463481/210x.jpg" width="22"  height="22" nopin="nopin"--> By Emily Deschanel</span>
    </article>
</div><div class="widget" elid="897385594"><article class="clearfix photo  community-article">
            <a href="https://www.thedodo.com/community/MarcBekoff/do-cows-moo-get-me-the-hell-ou-897379040.html" class="link-out ">
            <div class="image image366" data-original="https://assets.rbl.ms/463586/366x152.jpg"></div>
    </a>
        <div class="share-post-placeholder"></div>
    <div class="headline-container">
            <a href="https://www.thedodo.com/community/MarcBekoff/do-cows-moo-get-me-the-hell-ou-897379040.html" class="link-out ">
                <h4 class="headline">Do Cows Moo "Get Me The Hell Out Of Here" On Factory Farms?</h4>
        </a>
    </div>
        <span class="author-name" target="_blank"><!--img  class="author-avatar" src="https://media3cdn.r.worldssl.net/i/?u=%2FQsCM8m1.jpg&amp;h=http%3A%2F%2Fi.imgur.com&amp;c=3228309788" width="22"  height="22" nopin="nopin"--> By Marc Bekoff</span>
    </article>
</div><div class="widget" elid="897385542"><article class="clearfix photo  community-article">
            <a href="https://www.thedodo.com/community/Chaka/ten-ways-dogs-make-themselves--866430823.html" class="link-out ">
            <div class="image image366" data-original="https://assets.rbl.ms/445083/366x152.jpg"></div>
    </a>
        <div class="share-post-placeholder"></div>
    <div class="headline-container">
            <a href="https://www.thedodo.com/community/Chaka/ten-ways-dogs-make-themselves--866430823.html" class="link-out ">
                <h4 class="headline">10 Ways Dogs Make Themselves Useful During The Holidays</h4>
        </a>
    </div>
        <span class="author-name" target="_blank"><!--img  class="author-avatar" src="https://assets.rbl.ms/444467/210x.jpg" width="22"  height="22" nopin="nopin"--> By Chaka</span>
    </article>
</div></div>
    </div>
</div>

  <div class="footer">
    <div class="title">
        <p>Brought to you by</p>
    </div>
    <div class="logo"></div>
    <ul class="navigation pull-left">
        <li><a href="https://www.thedodo.com/about-the-dodo-387320140.html">About</a></li>
        <li><a href="https://www.thedodo.com/contact-us-427475587.html">Contact</a></li>
        <li><a href="/core/in/">Sign Up</a></li>
        <li><a href="/privacy-policy/">Privacy Policy</a></li>
        <li><a href="/terms-of-service/">Terms of Use</a></li>
        <li><a href="https://www.thedodo.com/the-dodo-is-hiring-419137723.html">Careers</a></li>
    </ul>
    <ul class="navigation pull-right">
        <li>Powered by <a href="https://www.rebelmouse.com" target="_blank">RebelMouse</a></li>
    </ul>
</div>

<div id="fb-root"></div>
<script type="text/javascript">
(function (d, s, id) {
    var js,
        fjs = d.getElementsByTagName(s)[0];

    if (d.getElementById(id)) {
        return;
    }
    js = d.createElement(s);
    js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.0&appId=565862726865595";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script>

<script type="text/javascript">
    !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
</script>
  </div>
</div>
<script>
require(['jquery','lazyload'], function ($) {
    $(function () {
        $('.image').each(function () {
            $(this).lazyload();
        });
    });
});
</script>

    

<script type="text/javascript">
define("consts",[],function(){return{TRACKING_ACTIONS:{visit:{welcome:"Welcome",congratulations:"Congratulations"},links:{click_out:"Click Out",click_in:"Click In",click_join_on_embed:"Join RM on Embeds",click_share_on_embed:"Share RM on Embeds",click_share_on_powered_embed:"Share RM on Powered Embeds",log_in_facebook:"Log In Facebook",log_in_twitter:"Log In Twitter",log_in_google:"Log In Google",download_android_app:"Download Android App",download_ios_app:"Download iOs App",click_frontpage:"Click Frontpage"},share_buttons:{click_top_header:"Click Top Header",click_left_menu:"Click Left Menu"},topbar_buttons:{click_topbar:"Click"},signup:{completed:"Completed"},signup_buttons:{click:"Click"},signup_sticky_buttons:{click:"Click"},free_embeds_promo:{click_follow_site:"Click Follow Site",click_social_provider:"Click Social Providers"},signin_buttons:{click:"Click"},share:{click_congratulation:"Shared in Congratulation",click_post:"Shared from Permalink",click_post_frontpage:"Shared on Frontpage",click_post_petition:"Shared on Petition",click_post_hover_image:"Shared on hover",click_post_draft:"Shared on Draft"},power_site:{screen1:"Open Lightbox",done:"Completed Powering Site",confirmation:"Reached Confirmation"},post:{click_add:"Saved on Add post",click_edit:"Saved on Edit post",click_restick:"Saved on Repost",click_save_draft:"Saved on Draft",click_bookmarklet:"Saved on Bookmarklet"},app_banner:{click_android:"Clicked on view on Google Play",click_ios:"Clicked on view on Apple Store"},wix:{component_deleted:"Component deleted"}},SHARE_POST_IN_EMBED_DIRECTLY_GET_ARG:"__rmid",REGISTERED_FROM:{REBELMOUSE:0,WIX:1},TIMEOUTS:{NOTIFICATION_FEED:3e4},SITE_SUBSCRIBE:{button:"Get Alerts",placeholder:"Enter Email",message:"Success! Look out for an email from RebelAlerts@rebelmouse.com to confirm your subscription.",enterprise_message:"Success! Look out for an email to confirm your subscription."},SHARE_PANEL_MESSAGES:{TWITTER:["Calling all Rebels! {{#users}}My @RebelMouse features {{users}}!{{/users}}{{^users}}Check out my @RebelMouse featuring the stuff I love!{{/users}} Join me at {{link}}","{{#one_user}}My Rebel of the Day is {{users}}{{/one_user}}{{^one_user}}My top {{users_count}} Rebels: {{users}}{{/one_user}}! Check out my @RebelMouse site and create yours. {{link}}","Catch some of my favorites from the web from {{users}} and share yours! {{link}}","Great stuff from some of my favorite people {{users}}. Take a look and join us! {{link}}","{{users}} are rocking my @RebelMouse! Join the party at {{link}}","My @RebelMouse features the awesome {{users}}. Join the fun! {{link}}","#RebelSpotlight: {{users}} are featured on my site. Check them out! {{link}}","Great new posts by {{users}} on my @RebelMouse site. Check it and join in {{link}}","Updates from {{users}} caught my eye. Have a look and share your favs too! {{link}}"],TWITTERTAGS:[["Interested in {{hashtags.0}}? Check out my @RebelMouse! {{link}}","Interested in {{hashtags.0}}? Check out my site! {{link}}","I'm sharing great {{hashtags.0}} posts on my site. Come take a look: {{link}}","I'm sharing great {{hashtags.0}} content on my site. Come take a look: {{link}}","Posting great {{hashtags.0}} content on my site, join in! {{link}}","Posting great {{hashtags.0}} content on my @RebelMouse, join in! {{link}}","Posting great {{hashtags.0}} content on my site, come take a look! {{link}}","Posting great {{hashtags.0}} content on my @RebelMouse, come take a look! {{link}}"],["My @RebelMouse is full of all things {{hashtags.0}} and {{hashtags.1}}, check it out! {{link}}"],["{{hashtags_str}}; that's what my site is all about. {{link}}","Interested in {{hashtags_str}}? I feature those on this site! {{link}}","Need ideas on {{hashtags_str}}? Come take inspiration from my site! {{link}} ","Interested in {{hashtags_str}}? They're featured here! {{link}}","Like all things {{hashtags_str}}? Have a look at this site! {{link}}","Enjoy all things {{hashtags_str}}? You'll love this site! {{link}}"]]},HIDE_PANEL_EXPIRED_TIME:864e5,REDACTOREJS_SETTING:{html:{air:!0,buttonSource:!0,addMedia:!1,placeHolder:"Start writing...",linkSize:2e3,airButtons:["source","html","formatting","bold","italic","underline","deleted","link","excerpt","|","unorderedlist","orderedlist","blockquote"],allowedTags:["a","abbr","acronym","address","area","b","bdo","big","blockquote","br","button","caption","center","cite","code","col","colgroup","dd","del","dfn","dir","div","dl","dt","em","fieldset","font","form","h1","h2","h3","h4","h5","h6","hr","i","iframe","img","input","ins","kbd","label","legend","li","map","menu","ol","optgroup","option","p","pre","q","s","samp","select","small","span","strike","strong","sub","sup","table","tbody","td","textarea","tfoot","th","thead","tr","tt","u","ul","var","wbr"],cleanup:!1,convertDivs:!1,convertLinks:!1,convertVideoLinks:!1,observeImages:!0,formattingTags:["p","h1","h2","h3","h4"],buttons:["source","html","bold","italic","underline","deleted","unorderedlist","orderedlist","link","excerpt","blockquote","removeformat","image","|","source"]},body:{air:!0,addMedia:!0,placeHolder:"Start writing...",linkSize:2e3,airButtons:["formatting","bold","italic","underline","deleted","link","excerpt","|","unorderedlist","orderedlist","blockquote"]},photo_credit:{air:!0,placeHolder:"",airButtons:["bold","italic","link","underline"]},image_caption:{air:!0,placeHolder:"",airButtons:["bold","italic","underline","deleted","link","|","unorderedlist","orderedlist","blockquote"]},image_description:{air:!0,placeHolder:"",airButtons:["bold","italic","underline","deleted","link","|","unorderedlist","orderedlist","blockquote"]},conclusion:{air:!0,placeHolder:"",linkSize:2e3,airButtons:["bold","italic","underline","deleted","link","|","unorderedlist","orderedlist","blockquote"]}},SITE_MENU:{sites:{id:"sites",url:"/",title:"",class_name:"site-name-item",order:0,visibility:!0,"default":!0,active:!1,dropdown:!0,history:!0,login_required:!0,type:0,submenu:[]},add_post:{id:"addPost",url:"#",title:"Add Post",order:1,visibility:!0,login_required:!0,type:0,submenu:[]},dashboard:{id:"dashboard",url:"/core/dashboard/",title:"Dashboard",order:6,section:!0,show_divider:!1,visibility:!0,"default":!1,active:!1,history:!0,login_required:!0,type:3,submenu:[]},logout:{id:"logout",url:"/core/users/logout",title:"Log Out",order:151,visibility:!0,login_required:!0,type:0},login:{id:"login",url:"/core/in",title:"Log In",order:148,visibility:!0,login_required:!1,type:0},about:{id:"about",url:"/welcome/about.html",title:"About",order:153,visibility:!0,login_required:!1,type:5},customers:{id:"customers",url:"https://www.rebelmouse.com/inspiration/",title:"Customers",order:154,visibility:!0,login_required:!1,type:0},blog:{id:"blog",url:"http://blog.rebelmouse.com",title:"Blog",order:155,visibility:!0,login_required:!1,type:0},press:{id:"press",url:"https://about.rebelmouse.com/press/",title:"Press",order:156,visibility:!0,login_required:!1,type:0},help:{id:"help",url:"http://help.rebelmouse.com/",title:"Help",order:157,visibility:!0,login_required:!1,type:0},about_rebelmouse:{id:"about-rebelmouse",url:" /welcome/about-rebelmouse.html",title:"About RebelMouse",order:161,visibility:!0,login_required:!0,type:0,paid_features:{permission_required:"enterprise"}},rebel_roar:{id:"rebel_roar",url:" /welcome/upgrade.html",title:"Upgrade to Rebel Roar",order:159,visibility:!0,login_required:!0,type:0,paid_features:{permission_required:"!enterprise"}},contact_us:{id:"contact-us",url:"/welcome/about.html#contacts-text",title:"Contact Us",order:160,visibility:!0,login_required:!1,type:5},product:{id:"product",url:"#",title:"Product",order:150,section:!0,show_divider:!1,visibility:!0,"default":!1,active:!1,history:!1,login_required:!1,type:3,submenu:[{id:"rebel_x",url:"/welcome/rebel-x.html",title:"Rebel X",order:0,visibility:!0,login_required:!1,history:!1,type:0},{id:"rebel_roar",url:"/welcome/rebel-roar.html",title:"Rebel Roar",order:1,visibility:!0,login_required:!1,history:!1,type:0},{id:"rebel_explore",url:"/welcome/individuals.html",title:"Rebel Explore",order:2,visibility:!0,login_required:!1,history:!1,type:0}]}}}});var Hogan={};(function(e){function u(e){return e=String(e===null||e===undefined?"":e),o.test(e)?e.replace(t,"&amp;").replace(n,"&lt;").replace(r,"&gt;").replace(i,"&#39;").replace(s,"&quot;"):e}e.Template=function f(e,t,n){e&&(this.r=e),this.c=n,this.text=t||""},e.Template.prototype={r:function(e,t,n){return""},v:u,render:function(t,n,r){return this.ri([t],n||{},r)},ri:function(e,t,n){return this.r(e,t,n)},rp:function(e,t,n,r){var i=n[e];return i?(this.c&&typeof i=="string"&&(i=this.c.compile(i)),i.ri(t,n,r)):""},rs:function(e,t,n){var r="",i=e[e.length-1];if(!a(i))return r=n(e,t);for(var s=0;s<i.length;s++)e.push(i[s]),r+=n(e,t),e.pop();return r},s:function(e,t,n,r,i,s,o){var u;return a(e)&&e.length===0?!1:(typeof e=="function"&&(e=this.ls(e,t,n,r,i,s,o)),u=!!e,!r&&u&&t&&t.push(typeof e=="object"?e:t[t.length-1]),u)},d:function(e,t,n,r){var i=e.split("."),s=this.f(i[0],t,n,r),o=null;if(e==="."&&a(t[t.length-2]))return t[t.length-1];for(var u=1;u<i.length;u++)s&&typeof s=="object"&&i[u]in s?(o=s,s=s[i[u]]):s="";return r&&!s?!1:(!r&&typeof s=="function"&&(t.push(o),s=this.lv(s,t,n),t.pop()),s)},f:function(e,t,n,r){var i=!1,s=null,o=!1;for(var u=t.length-1;u>=0;u--){s=t[u];if(s&&typeof s=="object"&&e in s){i=s[e],o=!0;break}}return o?(!r&&typeof i=="function"&&(i=this.lv(i,t,n)),i):r?!1:""},ho:function(e,t,n,r,i){var s=this.c,o=e.call(t,r,function(e){return s.compile(e,{delimiters:i}).render(t,n)}),u=s.compile(o.toString(),{delimiters:i}).render(t,n);return this.b=u,!1},b:"",ls:function(e,t,n,r,i,s,o){var u=t[t.length-1],a=null;if(!r&&this.c&&e.length>0)return this.ho(e,u,n,this.text.substring(i,s),o);a=e.call(u);if(typeof a=="function"){if(r)return!0;if(this.c)return this.ho(a,u,n,this.text.substring(i,s),o)}return a},lv:function(e,t,n){var r=t[t.length-1],i=e.call(r);return typeof i=="function"&&(i=i.call(r)),i=i.toString(),this.c&&~i.indexOf("{{")?this.c.compile(i).render(r,n):i}};var t=/&/g,n=/</g,r=/>/g,i=/\'/g,s=/\"/g,o=/[&<>\"\']/,a=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}})(typeof exports!="undefined"?exports:Hogan),function(e){function u(e){e.n.substr(e.n.length-1)==="}"&&(e.n=e.n.substring(0,e.n.length-1))}function a(e){return e.trim?e.trim():e.replace(/^\s*|\s*$/g,"")}function f(e,t,n){if(t.charAt(n)!=e.charAt(0))return!1;for(var r=1,i=e.length;r<i;r++)if(t.charAt(n+r)!=e.charAt(r))return!1;return!0}function l(e,t,n,r){var i=[],s=null,o=null;while(e.length>0){o=e.shift();if(o.tag=="#"||o.tag=="^"||c(o,r))n.push(o),o.nodes=l(e,o.tag,n,r),i.push(o);else{if(o.tag=="/"){if(n.length===0)throw new Error("Closing tag without opener: /"+o.n);s=n.pop();if(o.n!=s.n&&!h(o.n,s.n,r))throw new Error("Nesting error: "+s.n+" vs. "+o.n);return s.end=o.i,i}i.push(o)}}if(n.length>0)throw new Error("missing closing tag: "+n.pop().n);return i}function c(e,t){for(var n=0,r=t.length;n<r;n++)if(t[n].o==e.n)return e.tag="#",!0}function h(e,t,n){for(var r=0,i=n.length;r<i;r++)if(n[r].c==e&&n[r].o==t)return!0}function p(e){return'i = i || "";var b = i + "";var _ = this;'+m(e)+"return b;"}function d(e){return e.replace(s,"\\\\").replace(n,'\\"').replace(r,"\\n").replace(i,"\\r")}function v(e){return~e.indexOf(".")?"d":"f"}function m(e){var t="";for(var n=0,r=e.length;n<r;n++){var i=e[n].tag;i=="#"?t+=g(e[n].nodes,e[n].n,v(e[n].n),e[n].i,e[n].end,e[n].otag+" "+e[n].ctag):i=="^"?t+=y(e[n].nodes,e[n].n,v(e[n].n)):i=="<"||i==">"?t+=b(e[n]):i=="{"||i=="&"?t+=w(e[n].n,v(e[n].n)):i=="\n"?t+=S('"\\n"'+(e.length-1==n?"":" + i")):i=="_v"?t+=E(e[n].n,v(e[n].n)):i===undefined&&(t+=S('"'+d(e[n])+'"'))}return t}function g(e,t,n,r,i,s){return"if(_.s(_."+n+'("'+d(t)+'",c,p,1),'+"c,p,0,"+r+","+i+', "'+s+'")){'+"b += _.rs(c,p,"+'function(c,p){ var b = "";'+m(e)+"return b;});c.pop();}"+'else{b += _.b; _.b = ""};'}function y(e,t,n){return"if (!_.s(_."+n+'("'+d(t)+'",c,p,1),c,p,1,0,0,"")){'+m(e)+"};"}function b(e){return'b += _.rp("'+d(e.n)+'",c,p,"'+(e.indent||"")+'");'}function w(e,t){return"b += (_."+t+'("'+d(e)+'",c,p,0));'}function E(e,t){return"b += (_.v(_."+t+'("'+d(e)+'",c,p,0)));'}function S(e){return"b += "+e+";"}var t=/\S/,n=/\"/g,r=/\n/g,i=/\r/g,s=/\\/g,o={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};e.scan=function(n,r){function S(){v.length>0&&(m.push(new String(v)),v="")}function x(){var e=!0;for(var n=b;n<m.length;n++){e=m[n].tag&&o[m[n].tag]<o._v||!m[n].tag&&m[n].match(t)===null;if(!e)return!1}return e}function T(e,t){S();if(e&&x())for(var n=b,r;n<m.length;n++)m[n].tag||((r=m[n+1])&&r.tag==">"&&(r.indent=m[n].toString()),m.splice(n,1));else t||m.push({tag:"\n"});g=!1,b=m.length}function N(e,t){var n="="+E,r=e.indexOf(n,t),i=a(e.substring(e.indexOf("=",t)+1,r)).split(" ");return w=i[0],E=i[1],r+n.length-1}var i=n.length,s=0,l=1,c=2,h=s,p=null,d=null,v="",m=[],g=!1,y=0,b=0,w="{{",E="}}";r&&(r=r.split(" "),w=r[0],E=r[1]);for(y=0;y<i;y++)h==s?f(w,n,y)?(--y,S(),h=l):n.charAt(y)=="\n"?T(g):v+=n.charAt(y):h==l?(y+=w.length-1,d=o[n.charAt(y+1)],p=d?n.charAt(y+1):"_v",p=="="?(y=N(n,y),h=s):(d&&y++,h=c),g=y):f(E,n,y)?(m.push({tag:p,n:a(v),otag:w,ctag:E,i:p=="/"?g-E.length:y+w.length}),v="",y+=E.length-1,h=s,p=="{"&&(E=="}}"?y++:u(m[m.length-1]))):v+=n.charAt(y);return T(g,!0),m},e.generate=function(t,n,r){return r.asString?"function(c,p,i){"+t+";}":new e.Template(new Function("c","p","i",t),n,e)},e.parse=function(e,t){return t=t||{},l(e,"",[],t.sectionTags||[])},e.cache={},e.compile=function(e,t){t=t||{};var n=e+"||"+!!t.asString,r=this.cache[n];return r?r:(r=this.generate(p(this.parse(this.scan(e,t.delimiters),t)),e,t),this.cache[n]=r)}}(typeof exports!="undefined"?exports:Hogan),typeof define=="function"&&define.amd&&define("hogan",Hogan),define("utils/whitelabel_settings",["settings","underscore"],function(e,t){e=e||{};var n=e.whitelabel_settings,r=e.site||{},i=r.whitelabel_settings,s=n||i||{};return t.extend(s,{getTemplateVars:function(){return s.template_vars||{}}})}),define("utils",["backbone","underscore","jquery","settings","consts","hogan","utils/whitelabel_settings"],function(e,t,n,r,i,s,o){function u(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}}var a={toInt:function(e){return parseInt(e,10)},isNum:function(e){return/\d/ig.test(e)},escapeRegexSpecials:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\\\$&")},browser:function(){var e=window||{},t=u(e.navigator.userAgent),n={};return t.browser&&(n[t.browser]=!0,n.version=t.version),n.chrome?n.webkit=!0:n.webkit&&(n.safari=!0),n},timeSince:function(e){var t=new Date,n=(t.getTime()-e.getTime())/1e3,r,i,s;if(n<60)return parseInt(n,10)+"s";if(n<3600)return parseInt(n/60,10)+"m";if(n<=86400)return parseInt(n/3600,10)+"h";if(n>86400)return r=e.getDate(),i=e.toDateString().match(/ [a-zA-Z]*/)[0].replace(" ",""),s=e.getFullYear()===t.getFullYear()?"":" "+e.getFullYear(),r+" "+i+s},uid:function(e){function r(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}e=e||8;var n=Math.ceil(e/4);return t.times(n,r).join("").substr(0,e)},setIframeHeight:function(e,t){function a(){u=e.$(t||"iframe");if(!u.length||!u[0].contentWindow)return!1;o=n(u[0].contentWindow.document.body),i=o.outerHeight(!0),i!==s&&u.outerHeight(s=i),setTimeout(a,r)}var r=500,i,s,o,u=e.$(t||"iframe");u.on("load",a)},checkTransitionsSupport:function(){var e=document.createElement("div"),t=!1,n=["perspectiveProperty","WebkitPerspective"];for(var r=n.length-1;r>=0;r--)t=t?t:e.style[n[r]]!==undefined;if(t){var i=document.createElement("style");i.textContent="@media (-webkit-transform-3d){#test3d{height:3px}}",document.getElementsByTagName("head")[0].appendChild(i),e.id="test3d",document.body.appendChild(e),t=e.offsetHeight===3,i.parentNode.removeChild(i),e.parentNode.removeChild(e)}return t},capitalize:function(e){return e[0].toUpperCase()+e.slice(1,e.length)},lightSanitize:function(e){function s(){var e=[].slice.call(arguments,0);return t.reduce(e,function(e,t){return e.replace(t,"")})}var n=/<\/?iframe.*?>/ig,r=/<img.*?>/gi,i=/<\/?script.*?>/gi;return e&&s(e,n,r,i)},truncateString:function(e,t){return e.length<=t?e:e.substring(0,t)+""},extractLinks:function(e){return e.match(/(([a-z]+:\/\/)?(([a-z0-9\-]+\.)+([a-z]{2}|aero|arpa|biz|com|coop|edu|gov|info|int|jobs|mil|museum|name|nato|net|org|pro|travel|local|internal))(:[0-9]{1,5})?(\/[a-z0-9_\-\.~]+)*(\/([a-z0-9_\-\.]*)(\?[a-z0-9+_\-\.%=&amp;]*)?)?(#[a-zA-Z0-9!$&'()*+.=-_~:@/?]*)?)(\s+|$)/gi)},setBeforeunload:function(e){window.onbeforeunload=function(t){return t=t||window.event,t&&(t.returnValue=e),e}},encodeHTMLTags:function(e){return e&&e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")||""},decodeHTMLTags:function(e){return e&&e.replace(/&amp\;/g,"&").replace(/&quot\;/g,'"').replace(/&\#39\;/g,"'").replace(/&lt\;/g,"<").replace(/&gt\;/g,">")||""},safeTags:function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")},htmlize:function(e){return e=e||"",e=e.replace(/\n/g,"<br>"),e=e.replace(/(\b(https?|ftp|file):\/\/([-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|]))/ig,'<a href="$1" target="_blank">$3</a>'),e=e.replace(/((\s|^|<br>)(@\w{1,16}))/ig,function(e,t,n,r){return r.length<=16?n+'<a class="tw-intent" href="https://twitter.com/intent/user?screen_name='+r+'">'+r+"</a>":t}),e},decodeText:function(e){return t.map(n.parseHTML(e),function(e){return n(e).text()}).join("")},removeTags:function(e){return(e+""||"").replace(/(<([^>]+)>)/ig,"")},buildPostUrl:function(e){var t=e.basename?e.basename+"-":"",n=e.type==="slideshow"?"-s"+(e.slideshow.active_slide||0):"";return t+e.id+n+".html"},buildEmbeddedPostUrl:function(e){var t=a.buildPostUrl(e.toJSON?e.toJSON():e),n=(r.referrer||"").replace(new RegExp("[?&]"+i.SHARE_POST_IN_EMBED_DIRECTLY_GET_ARG+"=[^&]+"),"");return n+(/\?/.test(n)?"&":"?")+i.SHARE_POST_IN_EMBED_DIRECTLY_GET_ARG+"="+t},removeBeforeunload:function(){window.onbeforeunload=null},getReferrerURL:function(){return r.inEmbed?document.referrer:window.location.href||document.referrer},getSiteUrl:function(e){var t=r.parent_site||{};return r.is_whitelabel_site?t.id===e.id?"/":o.path_to_sites+e.name:"/"+(r.is_custom_domain?"":e.name)},getRootPath:function(){var e="";return r.is_custom_domain?e=r.is_community_site?"community/"+window.location.pathname.split("/")[2]:r.site.parent_id?r.site.name.toLowerCase():"":e=window.location.pathname.split("/")[1],(e?"/":"")+e+"/"},getHeadline:function(t){return t instanceof e.Model&&(t=t.toJSON()),t.headline?t.headline:t.provider_id===2&&t.twitter_headline?a.decodeText(t.twitter_headline):""},hasHeadline:function(t){return t instanceof e.Model&&(t=t.toJSON()),t.headline?!0:t.provider_id===2&&t.twitter_headline?!0:!1},postLink:function(){var e=r.site.embed_settings&&r.site.embed_settings.share_origin,n=r.site.embed_settings&&r.site.embed_settings.embed_as_origin,i=r.inEmbed&&r.is_paid_domain&&r.referrer,s=typeof this.original_url=="undefined"||this.provider_id===0&&this.original_url==="",o=t.isUndefined(this.is_direct_link)?this.original_url:this.is_direct_link?this.original_url:this.post_url;return i&&(o=a.buildEmbeddedPostUrl(this)),e&&(o=t.isString(e)?e:this.original_url||this.post_url),i&&n&&s&&(o=a.buildEmbeddedPostUrl(this)),o||""},forceRequire:function(e,t){t=t||function(){},require.undef(e),require([e],t)},localeNumber:function(e){var t=String(e).split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g," "),t.join(".")},tweetText:function(e){var t=114;if(e.length>t){var n=e.length,r=e.split(" "),i,s;while(n>t)i=r.pop(),n-=i.length+1,i==="{{link}}"&&(s=!0);e=r.join(" ")+"",s&&(e+=" {{link}}")}return e},hasScroll:function(e){var t=n(e);return e.prop("scrollHeight")>t.height()},filters:{localeNumber:function(){return function(e,t){return e=t(e),a.localeNumber(e)}},splash_filtered_video_url:function(){return this.splash_video&&this.splash_video.replace(/\/cp\~instance\=rebelmouse/gi,"").replace(/https?\:\/\//i,"//")},favicon_url:function(){return this.favicon||"https://www.google.com/s2/u/0/favicons?domain="+this.original_domain},original_domain:function(){var e=this.original_url&&this.original_url.match(/:\/\/(.[^\/]+)/)||"";return e&&e[1]||!1},screen_name:function(){return this.provider_id===2&&"@"+this.author_screen_name||""},canBeRemoved:function(){return(!!this.splash||!!this.giant_splash)&&!this.removable_media},thumb_height_math:function(){var e=this.use_300x_image?300:210,t=this.use_300x_image?this.thumb_height_300x:this.thumb_height_210x;return Math.floor(t*(this.real_widget_width/e))},thumb_video_image_height:function(){var e=this.video_image_height||[157,223];return this.use_300x_image?e[1]:e[0]},image_height:function(){return this.width>783?Math.floor(this.height*(783/this.width)):this.height},splash_height_math:function(){var e=this.size,t=this.heights,n=this.activeColSize,r=function(t){return Math.min.apply(Math,[t,e])};return!t||this.giant_splash?Math.abs(this.splash_height||this.height):n?t[r(this.activeColSize)]||this.height:Math.abs(t[1]||this.height)},is_headline:function(){return this.headline?this.headline:this.preview||!1},is_body:function(){return this.body?this.body:this.preview||!1},has_more:function(){return/<hr>/.test(this.body)},vine_video:function(){return this.type==="video"&&/vine\.co/.test(this.video)},slideshowCount:function(){return this.slideshow&&!!this.slideshow.slides.length||!1},is_slideshow_slider:function(){return this.slideshow_type===0},is_slideshow_list:function(){return this.slideshow_type===1},is_slide_image:function(){return this.type===0},is_slide_video:function(){return this.type===1},is_slide_tweet:function(){return this.type===2},get_share_text:function(){var e="";return t.isEmpty(this.headline)?t.isEmpty(this.body)?t.isEmpty(this.twitter_headline)||(e=this.twitter_headline):e=this.body:e=this.headline,e},postLink:function(){return a.postLink.apply(this,arguments)},share_url:function(){var e=a.postLink.apply(this,arguments);return e?encodeURIComponent(e):!1},email_body:function(){var e=decodeURIComponent(this.share_url()||""),t=(o.getTemplateVars().email_intro||"Hey, found this on RebelMouse and thought you would like it:")+" ",n=(/\?/.test(e)?"&":"?")+"xrs=RebelMouse_email",r=t+" \r\n"+decodeURIComponent(this.share_url()||"")+n+"\r\n"+(this.body&&this.body.replace(/(<([^>]+)>)/ig,"").replace(/[^\w\s]/gi,"")||""),i=350;return encodeURIComponent(r.length>i?r.substr(0,i)+"...":r)},hashtags:function(){if(!this.headline&&!this.twitter_headline||r.site.twitter_share_template)return!1;var e=a.decodeText(this.twitter_headline)||this.headline,t=n.trim(e).split(" "),i=[],s=0;if(!t.length)return!1;for(;s<t.length;s++)t[s].match(/^#(\w+)$/)&&i.push(RegExp.$1);return i.join(",")||!1},tw_share_headline:function(){var e=a.decodeText(this.get_share_text()),t=new RegExp("#([^\\s]*)","g");return this.is_frozen&&(e="Highlight: "+e),e=r.site.twitter_share_template?s.compile(r.site.twitter_share_template).render(this):e.replace("'","'").replace(t,"").replace(/\s+(?= )/g,""),encodeURIComponent(e)},tweetText:function(){return function(e,t){return a.tweetText(t(e))}},via:function(){if(r.site.twitter_share_template||!r.site.providers)return!1;var e=r.site.owner_id===r.user.id,t=r.providers.twitter.user_name,n=r.site.owner_data&&r.site.owner_data.twitter_name||"";if(!e&&n&&!/RebelMouse/.test(n)&&this.is_custom_post)return encodeURIComponent(n+"'s rebelmouse");if(!e&&this.is_tw_post){if(t&&t===this.author_screen_name)return encodeURIComponent(t+"'s rebelmouse");if(this.author_screen_name)return encodeURIComponent(this.author_screen_name)}if(e&&t&&t.toLowerCase()!=="rebelmouse"){if(!this.is_tw_post)return"RebelMouse";if(t===this.author_screen_name)return"RebelMouse";if(this.author_screen_name)return encodeURIComponent(this.author_screen_name)}return"RebelMouse"},via_share:function(){var e=r.site.owner_id===r.user.id,t=r.site.owner_data;if(!e&&t&&this.is_custom_post)return t.twitter_name+"'s rebelmouse";if(!e&&this.is_tw_post){if(t&&t.twitter_name===this.author_screen_name)return t.twitter_name+"'s rebelmouse";if(this.author_screen_name)return this.author_screen_name}if(e&&t&&t.twitter_name&&t.twitter_name.toLowerCase()!=="rebelmouse"){if(!this.is_tw_post)return"RebelMouse";if(t.twitter_name===this.author_screen_name)return"RebelMouse";if(this.author_screen_name)return this.author_screen_name}return"RebelMouse"},share_headline:function(){var e=this.get_share_text();return encodeURIComponent(e.replace("'","\\'"))},share_image:function(){return this.type==="slideshow"&&this.slideshowCount()?this.slideshow.slides&&encodeURIComponent(this.slideshow.slides[0].image210x)||"":this.image210x&&encodeURIComponent(this.image210x)||""},image_thumb:function(){return this.splash||this.giant_splash?this.image980x||this.image||!1:(a.is_mobile||this.use_300x_image?this.image300x:this.image210x)||this.image980x||this.image||!1},resized_height:function(){var e=720,t=0;return this.width>e?(t=this.width/e,parseInt(this.height/t,10)):this.height},slide_thumbnail:function(){return this.image35x35||this.image210x||this.image980x||!1},slide_image:function(){var e=this.slideshow.slides,t=this.slideshow.active_slide||0;return e[t].image980x||e[t].image||!1},slide_thumb:function(){var e=this.slide_210x||"/static/img/bg/transparent.gif";return this.use_300x_image&&this.slide_300x||e},slide_caption:function(){var e=this.slideshow.slides,t=e[this.active_slide]&&this.active_slide||0;return e[t].caption||!1},slide_video:function(){return this.video||!1},published_by:function(){return this._is_river?this.author_screen_name&&this.author_screen_name.toLowerCase()===this._site_name.toLowerCase()||this.author_name&&this.author_name.toLowerCase()===this._site_name.toLowerCase()?!1:!0:!1},can_show_hover_card:function(){return a.hasHeadline(this)||this.show_image},can_show_hover_card_headline:function(){return a.getHeadline(this)||!1},post_headline:function(){return a.getHeadline(this)},frozen_until:function(){var e=this.unfreeze_at&&this.unfreeze_at[this.subpageId?this.subpageId:0];return t.isUndefined(e)?"until you unfreeze it":"for next "+a.format_date_until(e)},formated_created_ts:function(){return a.pretty_date(this.created_ts)},formated_full_created_ts:function(){return a.format_full_date(this.created_ts)},twitter_formated_date:function(){return this.twitter_info&&a.pretty_date(this.twitter_info.date_ts)||a.pretty_date(this.created_ts)},post_timestamp:function(){function u(e){return e<10?"0"+e:e}var e=new Date(this.created_ts*1e3),t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),i=e.getHours(),s=e.getMinutes(),o=e.getSeconds();return u(i)+":"+u(s)},post_datestamp:function(){function u(e){return e<10?"0"+e:e}var e=new Date(this.created_ts*1e3),t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),i=e.getHours(),s=e.getMinutes(),o=e.getSeconds();return t+"/"+u(n)+"/"+u(r)}},parse_url:function(e){var t=document.createElement("a");return t.href=e,{source:e,protocol:t.protocol.replace(":",""),host:t.hostname,port:t.port,origin:t.protocol+"//"+t.hostname+t.pathname,query:t.search,params:function(){var e={},n=t.search.replace(/^\?/,"").split("&"),r=n.length,i=0,s;for(;i<r;i++){if(!n[i])continue;s=n[i].split("="),e[s[0]]=s[1]}return e}(),file:(t.pathname.match(/\/([^\/?#]+)$/i)||["",""])[1],hash:t.hash.replace("#",""),path:t.pathname.replace(/^([^\/])/,"/$1"),relative:(t.href.match(/tps?:\/\/[^\/]+(.+)/)||["",""])[1],segments:t.pathname.replace(/^\//,"").split("/")}},setEndOfContenteditable:function(e){var t,n;document.createRange?(t=document.createRange(),t.selectNodeContents(e),t.collapse(!1),n=window.getSelection(),n.removeAllRanges(),n.addRange(t)):document.selection&&(t=document.body.createTextRange(),t.moveToElementText(e),t.collapse(!1),t.select())},pretty_date:function(e){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=new Date,r=Math.round(n.getTime()/1e3),i=new Date(e*1e3),s=Math.round(r-e),o=Math.floor(s/86400);if(o!==0)return n.getFullYear()===i.getFullYear()?i.getDate()+" "+t[i.getMonth()]:i.getDate()+" "+t[i.getMonth()]+" "+i.getFullYear();if(s<10)return"just now";if(s<60)return s+" seconds ago";if(s<120)return"a minute ago";if(s<3600)return Math.floor(s/60)+" minutes ago";if(s<7200)return"an hour ago";if(s<86400)return Math.floor(s/3600)+" hours ago"},getDayDifference:function(e){var t=+(new Date),n=e*1e3,r=864e5;return Math.floor((t-n)/r)},format_date_until:function(e){function i(e){return parseInt(e,10)===1?"":"s"}var t=Math.round(e- +(new Date)/1e3),n,r;return t<60?t+" second"+i(t):t<3600?(n=Math.floor(t/60),n+" minute"+i(n)):t<86400?(r=Math.floor(t/60/60),r+" hour"+i(r)):t},format_date:function(e){function o(e){return parseInt(e,10)===1?"":"s"}var t=Math.round((new Date).getTime()/1e3)-e,n=new Date(e*1e3),r,i,s=new Array("January","February","March","April","May","June","July","August","September","October","November","December");return t<60?t+" second"+o(t)+" ago":t<3600?(r=Math.floor(t/60),r+" minute"+o(r)+" ago"):t<86400?(i=Math.floor(t/60/60),i+" hour"+o(i)+" ago"):t>86400?n.getFullYear()!==(new Date).getFullYear()?n.getDate()+" "+s[n.getMonth()].substr(0,3)+" "+n.getFullYear():n.getDate()+" "+s[n.getMonth()].substr(0,3):t},format_full_date:function(e){function u(e){return e<10?"0"+e:e}var t=Math.round((new Date).getTime()/1e3)-e,n=new Date(e*1e3),i,s,o=["January","February","March","April","May","June","July","August","September","October","November","December"],a;return r.is_whitelabel_site?a=o[n.getMonth()]+" "+u(n.getDate())+", "+n.getFullYear():a=u(n.getDate())+" "+o[n.getMonth()]+" "+n.getFullYear(),a},formantData:function(e,t){var n="",r=f,i;for(var s=0;s<t.length;s++)i=t.charAt(s),s-1>=0&&t.charAt(s-1)==="\\"?n+=i:r[i]?n+=r[i](e):i!=="\\"&&(n+=i);return n},is_valid_email:function(e){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},is_valid_url:function(e){return/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},is_valid_image_url:function(e){return/^https?:\/\/(?:[a-z0-9\-]+\.)+[a-z0-9]{2,6}(?:\/[^\/#?]+)+\.(?:jpg|gif|png)$/i.test(e)},localeString:function(e,t,n){var r=(""+e).split("."),i="",s,o;t||(t=","),n||n===0||(n=3),s=r[0].length;while(s>n)o=s-n,i=t+r[0].slice(o,s)+i,s=o;return i=r[0].slice(0,s)+i,r[0]=i,r.join(".")},makeHttpsUrl:function(e){return e.replace(/^https?:\/\//i,"https://")},getXhrErrorMessage:function(e,t){var n=t||"Error has occured",r=!1;if(!e||!e.status)return n;try{r=JSON.parse(e.responseText)}catch(i){r=!1}return e.statusText&&(n=e.statusText),r&&r.error&&(n=r.error),n},isSiteEnterprise:function(){return r.site&&r.site.paid_features?r.site.paid_features.enterprise:!1}},f={shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d:function(e){return(e.getDate()<10?"0":"")+e.getDate()},D:function(e){return Date.replaceChars.shortDays[e.getDay()]},j:function(e){return e.getDate()},l:function(e){return Date.replaceChars.longDays[e.getDay()]},N:function(e){return e.getDay()+1},S:function(e){return e.getDate()%10===1&&e.getDate()!==11?"st":e.getDate()%10===2&&e.getDate()!==12?"nd":e.getDate()%10===3&&e.getDate()!==13?"rd":"th"},w:function(e){return e.getDay()},z:function(e){var t=new Date(e.getFullYear(),0,1);return Math.ceil((e-t)/864e5)},W:function(e){var t=new Date(e.getFullYear(),0,1);return Math.ceil(((e-t)/864e5+t.getDay()+1)/7)},F:function(e){return Date.replaceChars.longMonths[e.getMonth()]},m:function(e){return(e.getMonth()<9?"0":"")+(e.getMonth()+1)},M:function(e){return Date.replaceChars.shortMonths[e.getMonth()]},n:function(e){return e.getMonth()+1},t:function(e){var t=new Date;return(new Date(t.getFullYear(),t.getMonth(),0)).getDate()},L:function(e){var t=this.getFullYear();return t%400===0||t%100!==0&&t%4===0},o:function(e){var t=new Date(e.valueOf());return t.setDate(t.getDate()-(e.getDay()+6)%7+3),t.getFullYear()},Y:function(e){return e.getFullYear()},y:function(e){return(""+e.getFullYear()).substr(2)},a:function(e){return e.getHours()<12?"am":"pm"},A:function(e){return e.getHours()<12?"AM":"PM"},B:function(e){return Math.floor(((this.getUTCHours()+1)%24+this.getUTCMinutes()/60+e.getUTCSeconds()/3600)*1e3/24)},g:function(e){return e.getHours()%12||12},G:function(e){return e.getHours()},h:function(e){return((e.getHours()%12||12)<10?"0":"")+(e.getHours()%12||12)},H:function(e){return(e.getHours()<10?"0":"")+e.getHours()},i:function(e){return(e.getMinutes()<10?"0":"")+e.getMinutes()},s:function(e){return(e.getSeconds()<10?"0":"")+e.getSeconds()},u:function(e){var t=e.getMilliseconds();return t<10?"00":(t<100?"0":"")+t},e:function(e){return"Not Yet Supported"},I:function(e){return"Not Yet Supported"},O:function(e){return(-e.getTimezoneOffset()<0?"-":"+")+(Math.abs(e.getTimezoneOffset()/60)<10?"0":"")+Math.abs(e.getTimezoneOffset()/60)+"00"},P:function(e){return(-e.getTimezoneOffset()<0?"-":"+")+(Math.abs(e.getTimezoneOffset()/60)<10?"0":"")+Math.abs(e.getTimezoneOffset()/60)+":00"},T:function(e){var t=e.getMonth();e.setMonth(0);var n=e.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1");return e.setMonth(t),n},Z:function(e){return-e.getTimezoneOffset()*60},c:function(e){return e.format("Y-m-d\\TH:i:sP")},r:function(e){return e.toString()},U:function(e){return e.getTime()/1e3}};return a}),define("widgets/templates/informer",["hogan"],function(e){return e.compile('    <div class="infrms{{#hasCheckboxes}} has-checkboxes{{/hasCheckboxes}}{{#hasOptions}} has-options{{/hasOptions}}{{#hasClasses}} {{classes}}{{/hasClasses}}">        <div class="hdr">{{headline}}</div>        <div class="wrp">            {{#hasMessage}}<div class="data">{{{message}}}</div>{{/hasMessage}}            {{#hasOptions}}                <div class="informer-options">                    {{#options}}                        <div class="informer-options-option">                            {{#title}}<div class="informer-options-option-title">{{{title}}}</div>{{/title}}                            {{#values}}                                <label class="{{type}}">                                    <input type="{{type}}" name="{{name}}" {{#selected}}checked="checked"{{/selected}}>{{{caption}}}                                </label>                            {{/values}}                        </div>                    {{/options}}                </div>            {{/hasOptions}}            {{#hasCheckboxes}}                <div class="informer-checkboxes-title">{{checkboxesTitle}}</div>                <div class="informer-checkboxes">                {{#checkboxes}}                    <div class="informer-checkbox">                        <input type="checkbox" name="{{name}}" id="ifrmr-chck-{{name}}" {{#selected}}checked="checked"{{/selected}}>                        <label class="checkbox" for="ifrmr-chck-{{name}}">{{caption}}</label>                    </div>                {{/checkboxes}}                    <a href="#" class="informer-check-all">Select all</a></li>                </div>            {{/hasCheckboxes}}            <div class="controls">                {{#controls}}                <a href="{{href}}" class="btn {{classes}}">{{name}}</a>                {{/controls}}            </div>        </div>    </div>')}),define("widgets/views/informer",["jquery","underscore","backbone","hogan","utils","widgets/templates/informer"],function(e,t,n,r,i,s){var o={controls:[{name:"OK",href:"#",callback:e.noop},{name:"Cancel",href:"#",callback:e.noop}],safeHTML:!1,headline:"",message:"",type:""};return n.View.extend({className:"informers",events:{"click .controls .btn":"controlEvent","click .informer-check-all":"checkAll","click .informer-check-none":"checkNone"},initialize:function(e){t.bindAll(this,"controlEvent","checkAll","checkNone"),this._content=t.defaults(e,o)},hasCheckboxes:function(){return this.options.checkboxes&&this.options.checkboxes.length},hasOptions:function(){return this.options.options&&this.options.options.length},hasMessage:function(){return!!this.options.message},hasClasses:function(){return!!this.options.classes},checkAll:function(e){this.checkboxes.prop("checked",!0),e.preventDefault()},checkNone:function(e){this.checkboxes.prop("checked",!1),e.preventDefault()},getCheckboxesValues:function(){var e={};return t.each(this.checkboxes,function(t){e[t.name]=t.checked}),e},getOptionsValues:function(){var e={};return t.each(this.choices.filter(":checked"),function(t){e[t.name]=t.value}),e},controlEvent:function(n){var r=e(n.currentTarget),i=r.index(),s={};t.isFunction(this._content.controls[i].callback)&&(this.hasCheckboxes()&&(s.checkboxes=this.getCheckboxesValues()),this.hasOptions()&&(s.options=this.getOptionsValues()),this._content.controls[i].callback.call(this.options.context,s),n.preventDefault()),this._content.controls[i].dont_close||this.remove()},render:function(){return this._content.hasCheckboxes=t.bind(this.hasCheckboxes,this),this._content.hasOptions=t.bind(this.hasOptions,this),this._content.hasMessage=t.bind(this.hasMessage,this),this._content.hasClasses=t.bind(this.hasClasses,this),this.options.messageVars&&(this.options.message=r.compile(this.options.message).render(this.options.messageVars)),this.options.safeHTML&&!this.options.messageVars&&(this.options.message=i.encodeHTMLTags(this.options.message)),this.$el.html(s.render(this._content)).addClass(this.options.type).appendTo("body"),this.checkboxes=this.$(".informer-checkbox input[type=checkbox]"),this.choices=this.$(".informer-options input[type=radio], .informer-options input[type=checkbox]"),this.$el.focus(),this}})}),define("libs/backbone/plugins/sync_processing",["backbone","underscore","utils","widgets/views/informer"],function(e,t,n,r){return function(){var i=function(e,t,i,s){console.error("Error: ",n.getXhrErrorMessage(e)),s&&(new r({type:"error",message:n.getXhrErrorMessage(e),headline:"Oops!!!",controls:[{name:"OK",callback:function(){}}]})).render()},s=function(n,r,i){var s=[].slice.call(arguments,0),o=this;i||(i={});if(this.syncProcessing){t.isFunction(this.syncProcessingCallback)&&this.syncProcessingCallback();if(!i.force)return!1;this.lastXhr&&this.lastXhr.abort()}t.isFunction(this._syncStarted)&&this._syncStarted(),this.syncProcessing=!0;var u=e.sync.apply(this,s);return this.lastXhr=u,u.always(function(){o.syncProcessing=!1,this.lastXhr=null,t.isFunction(this._syncFinished)&&this._syncFinished()}),(i.forceDefaultErrorCallback===!0||!i.forceDefaultErrorCallback&&t.isUndefined(i.error))&&u.fail(this._syncFail),u};return function(){this.syncProcessing=!1,this.sync=s,this.syncProcessingCallback=function(){},this._syncFail=i,this._syncStarted=function(){},this._syncFinished=function(){}}}()}),define("libs/backbone/plugins/notifications",["jquery","underscore","hogan","utils"],function(e,t,n,r){var i=function(){var i=e("<ul></ul>",{id:"notification","class":"notification"}),s=120,o=[],u="notify_",a={message:"",type:"notify",timeout:5e3,safeHTML:!0,persistent:!1};e("body").prepend(i);var f=function(i,s){s=t.isString(i)?s||{}:i,s=e.extend({},a,s||{}),t.isString(i)&&(s.message=i),s.uid=u+ +(new Date),s.messageVars&&(s.message=n.compile(s.message).render(s.messageVars)),s.safeHTML&&!s.messageVars&&(s.message=r.encodeHTMLTags(s.message)),s.$item=e("<li></li>",{html:s.message,"class":"hide "+s.type});if(t.isString(s.link)&&e.trim(s.link.length)>0&&t.isFunction(s.callback)){var o=e('<a class="action-link" href="#">'+s.link+"</a>");s.$item.append(o),o.on("click",function(e){e.preventDefault(),s.callbackContext?s.callback.call(s.callbackContext,e):s.callback.call(s,e)})}return l(s)},l=function(t){var n=new c(t);return i.append(t.$item),o.push(e.extend(t,{instance:n})),o.length>=1&&h()&&i.show(),n},c=function(t){this.remove=function(){var n=this;this.uid=t.uid,this.$item=t.$item,this.$item.remove(),o=e.grep(o,function(e,t){return e.uid!==n.uid}),o.length&&h()||i.hide()}},h=function(){var e=o.slice(-1)[0];return e.$item.removeClass("hide").siblings().addClass("hide"),e.persistent||setTimeout(function(){e.instance.remove()},e.timeout),!0};return function(){this.notify=f}}();return i}),define("libs/backbone/plugins/wrap_error",[],function(){return function(){var e=this.wrapError;this.wrapError=function(t,n,r){return!t&&r.forceDefaultErrorCallback!==!1&&(r.forceDefaultErrorCallback=!0),e(t,n,r)}}}),define("libs/backbone/plugins/layout_manager",["backbone","underscore","libs/backbone/plugins/notifications","libs/backbone/plugins/wrap_error"],function(e,t,n,r){var i={views:{},viewListeners:{},models2Views:{},allCallback:function(){this.trigger.apply(this,arguments)}},s=function(t,r,s){r||(r={}),n.call(t.prototype);var o=new t(r),u=r.model;return i.views[this.cid]?i.views[this.cid].push(o):i.views[this.cid]=[o],u instanceof e.Model&&(i.models2Views[u.cid]?i.models2Views[u.cid].push(o):i.models2Views[u.cid]=[o]),s&&(o._markedAs=s),o.on("all",i.allCallback,this),o},o=function(e,n,r,s){r=r;if(typeof this[r]!="function")throw"Callback should be a function and a method on this view";return t.isUndefined(e)&&console.error("error trace"),typeof e.on=="function"&&s?e.on(n,this[r],s):e.on(n,this[r]),i.viewListeners[this.cid]||(i.viewListeners[this.cid]=[]),i.viewListeners[this.cid].push({object:e,event:n,callback:r,context:s}),this},u=function(n){if(!n||!n.cid)throw"Can't get a View if Model does not exist";if(!(n instanceof e.Model))throw"Model should be an instance of Backbone model";if(t.isArray(i.models2Views[n.cid]))return t.find(i.views[this.cid],function(e){return~t.indexOf(i.models2Views[n.cid],e)&&e},this)},a=function(e,n,r,i){var s=t.isFunction(e)&&e()||e,o=t.keys(n);return this._extraDeps||(this._extraDeps={}),s?function(e){var s=0;return function(){var u=arguments||i;if(s){t.isFunction(r)&&r.apply(e,u);return}s++,require(t.map(o,function(e){return n[e]}),t.bind(function(){var n=[].slice.call(arguments,0);t.each(o,function(e,t){this._extraDeps[e]=n[t]},this),t.isFunction(r)&&r.apply(e,u)},e))}}(this):function(){}},f=function(e,n,r,i,s){this._extraDeps||(this._extraDeps={}),s||(s={});if(e===this){var o=t.isFunction(this.events)&&this.events(),u,a=this.events,f,l=this;this.undelegateEvents(),u=function(){var e=s.args||arguments,n=t.keys(r);if(f)return t.isFunction(i)&&i.apply(this,e);require(t.map(n,function(e){return r[e]}),t.bind(function(){var r=[].slice.call(arguments,0);t.each(n,function(e,t){this._extraDeps[e]=r[t]},this),f=!0,t.isFunction(i)&&i.apply(this,e)},l)),u=""},t.isFunction(this.events)?this.events=function(){var e=a();return e[n]=u,e}:this.events[n]=u,this.delegateEvents()}else{var c="_"+n+"_callback",h=t.keys(r);this[c]=function(){var o=arguments;require(t.map(h,function(e){return r[e]}),t.bind(function(){var r=[].slice.call(arguments,0);t.each(h,function(e,t){this._extraDeps[e]=r[t]},this),this.unwatchEvent(e,n,c),s.callback&&this.watchEvent(e,n,s.callback),i.apply(this,o),delete this[c]},this))},this.watchEvent(e,n,c,this)}},l=function(){t.each(i.viewListeners[this.cid],function(e){e.object.off(e.event,this[e.callback],e.context)},this),delete i.viewListeners[this.cid]},c=function(e,n,r){var s;if(typeof this[r]!="function")throw"Callback should be a function and a method on this view";t.each(i.viewListeners[this.cid],function(t,i){t.object===e&&t.event===n&&t.callback===r&&(s=i,t.object.off(t.event,this[t.callback]))},this),i.viewListeners[this.cid].splice(s,1)},h=function(e){return i.views[this.cid]?e?t.filter(i.views[this.cid],function(t){return t._markedAs===e}):i.views[this.cid]:[]},p=function(){t.each(i.views[this.cid],function(n){n.remove(),n.off("all",i.allCallback),n.model instanceof e.Model&&(i.models2Views[n.model.cid]=t.without(i.models2Views[n.model.cid],n))},this)},d=function(){this.removeAllProduced(),this.removeAllWatchers(),this.undelegateEvents(),this.BBRemove(),delete i.views[this.cid]},v=function(n,r,i){if(!~t.indexOf(["html","prepend","append"],n))throw"Method"+n+" doesn't exists";i||(i={});if(!(r instanceof e.View))throw"view argument should be a Backbone View";i.selector&&this.$(i.selector)[n](r.el),r.trigger("dom:inserted"),r._inserted=!0,t.isFunction(i.callback)&&i.callback()},m=function(e,n){var r=this[e];return this[e]=t.bind(function(){n.apply(this,arguments),r.apply(this,arguments)},this),e};return function(){this.makeInstance=s,this.BBRemove=this.remove,this.remove=d,this.getViewByModel=u,this.getProduced=h,this.lazyLoadOnEvent=f,this.lazyLoad=a,this.removeAllProduced=p,this.watchEvent=o,this.unwatchEvent=c,this._extraDeps={},this.removeAllWatchers=l,this.insertView=function(){var e=[].slice.apply(arguments);return e.unshift("html"),v.apply(this,e),this},this.appendView=function(){var e=[].slice.apply(arguments);return e.unshift("append"),v.apply(this,e),this},this.prependView=function(){var e=[].slice.apply(arguments);return e.unshift("prepend"),v.apply(this,e),this},this._decorate=m,r.call(e)}}),define("utils/settings_methods",["underscore"],function(e){return function(){var t=function(t,n,r){var i=r?r:this.site,s,o,u;return this.sites&&e.isNumber(i)&&(i=e.findWhere(this.sites,{id:i})),e.isString(i)&&(i=this[i]),s=i&&i.permissions||{},o=e.clone(s),this.parent_site&&(u=this.parent_site.permissions||{},e.each(u,function(e,t){e&&(o[t]=e)})),!!(n?o[t]:!this._isCustom()&&o[t])};this._isCustom=function(){return(this.is_custom_domain||this.inEmbed)&&!this._isWhitelabel()},this._isWhitelabel=function(){var e=this.site||{};return!!e.is_roar||!!e.is_roar_subsite},this.is=function(e,t){var n=/^is\_/.test(e);return e=n?e:"is_"+e,t=t||e==="is_custom_domain"||e==="is_paid_domain",!!(t?this[e]:!this._isCustom()&&this[e])},this.getDomain=function(){return this._isCustom()?this.domain_site_name:window.location.protocol+"//"+(this.domain_site_name||window.location.hostname)},this.getSiteURL=function(e){return e&&e.force_paid&&this.is_paid_domain?this.site.domain||this.domain_site_name:this.getDomain()+(this._isCustom()?"":"/"+(this.site.name||""))},e.isUndefined(this.user)&&(this.user={}),this.user.can=e.bind(t,this),this.buildProviderConnectUrl=function(e,t){var n=this.providers[e].auth_url;return n+"?"+t}}}),define("utils/device",[],function(){var e,t,n,r,i,s,o;return function(){var o=navigator.userAgent;e=/Android|webOS|iPhone|iPod|BlackBerry/i.test(o),t=/iPad/i.test(o),s=/Android/i.test(o),i=/iPhone|iPad|iPod/i.test(o),n=/iPhone/i.test(o),r=/iPod/i.test(o)}(),o=!(e||t||n||r),{isMobile:e,isiPad:t,isiPhone:n,isAndroid:s,isiOS:i,isiPod:r,desktop:o}}),define("widgets/models/menu_item",["require","backbone","underscore"],function(e){var t=e("backbone"),n=e("underscore");return t.Model.extend({initialize:function(){this.on("change:submenu",this._makeSubmenu,this),this._makeSubmenu()},_makeSubmenu:function(){var e;this.has("submenu")&&n.isArray(this.get("submenu"))&&(e=new this.collection.constructor(this.get("submenu"),{submenu:!0}),this.set({submenu:e}))}})}),define("widgets/collections/menu",["require","backbone","underscore","widgets/models/menu_item","settings"],function(e){var t=e("backbone"),n=e("underscore"),r=e("widgets/models/menu_item"),i=e("settings");return t.Collection.extend({model:r,initialize:function(e,t){this._isSubmenu=t&&t.submenu,this.on("change:active",this.changeActive,this)},changeActive:function(e,t){if(!t)return;e.get("history")&&this._historyList.push(e),this.each(function(t){t.get("active")&&t.get("id")!==e.get("id")&&t.set({active:!1})},this)},comparator:function(e,t){return e.get("order")<t.get("order")?-1:e.get("order")===t.get("order")?0:1},isSubmenu:function(){return this._isSubmenu},setPreviousActive:function(e){var t=this._historyList.pop(),n=this.get(e);n&&n.set({active:!1}),t&&t.set({active:!0})},getList:function(){var e={login:function(){return n.isUndefined(this.get("login_required"))?!0:n.isUndefined(i.user.is_autorized)&&n.isUndefined(i.is_autorized)?!this.get("login_required"):n.isBoolean(i.is_autorized)&&n.isUndefined(i.user.is_autorized)?i.is_autorized===this.get("login_required"):i.user.is_autorized===this.get("login_required")},provider:function(){if(this.has("provider")){var e=i.providers[this.get("provider")];return e?!e.status:!0}return!0},visibility:function(){return this.get("visibility")},paid_features:function(){var e=this.get("paid_features"),t=/^\!/i;return!e||!i.site.paid_features?!0:(e=e.permission_required,t.test(e)?(e=e.substr(1),!i.site.paid_features[e]):i.site.paid_features[e])},permission:function(){var e=this.get("permission_required"),t=/^\!/i;return e?t.test(e)?(e=e.substr(1),!i.user.can(e.permission,!0,i[e.on])):i.user.can(e.permission,!0,i[e.on]):!0}},t=function(t){return n.all(e,function(e){return e.call(this)},t)};return this.filter(t)},_historyList:[]})}),define("hogan_with_filters",["hogan","underscore","utils"],function(e,t,n){e.filters=n.filters;var r=e.Template.prototype.render,i=function(e,i,s,o){return r.call(this,t.extend({},n.filters,e||{},i||{}),s,o)};return e.Template.prototype.render=i,e}),function(){var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],t=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,n=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,r=typeof location!="undefined"&&location.href,i=r&&location.protocol&&location.protocol.replace(/\:/,""),s=r&&location.hostname,o=r&&(location.port||undefined),u=[];define("text",[],function(){var a,f,l;return typeof window!="undefined"&&window.navigator&&window.document?f=function(e,t){var n=a.createXhr();n.open("GET",e,!0),n.onreadystatechange=function(e){n.readyState===4&&t(n.responseText)},n.send(null)}:typeof process!="undefined"&&process.versions&&!!process.versions.node?(l=require.nodeRequire("fs"),f=function(e,t){var n=l.readFileSync(e,"utf8");n.indexOf("")===0&&(n=n.substring(1)),t(n)}):typeof Packages!="undefined"&&(f=function(e,t){var n="utf-8",r=new java.io.File(e),i=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),n)),o,u,a="";try{o=new java.lang.StringBuffer,u=s.readLine(),u&&u.length()&&u.charAt(0)===65279&&(u=u.substring(1)),o.append(u);while((u=s.readLine())!==null)o.append(i),o.append(u);a=String(o.toString())}finally{s.close()}t(a)}),a={version:"1.0.7",strip:function(e){if(e){e=e.replace(t,"");var r=e.match(n);r&&(e=r[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var t,n,r;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;for(n=0;n<3;n++){r=e[n];try{t=new ActiveXObject(r)}catch(i){}if(t){e=[r];break}}if(!t)throw new Error("createXhr(): XMLHttpRequest not available");return t},get:f,parseName:function(e){var t=!1,n=e.indexOf("."),r=e.substring(0,n),i=e.substring(n+1,e.length);return n=i.indexOf("!"),n!==-1&&(t=i.substring(n+1,i.length),t=t==="strip",i=i.substring(0,n)),{moduleName:r,ext:i,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,n,r){var i=a.xdRegExp.exec(e),s,o,u;return i?(s=i[2],o=i[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===t)&&(!o||o===n)&&(!u&&!o||u===r)):!0},finishLoad:function(e,t,n,r,i){n=t?a.strip(n):n,i.isBuild&&(u[e]=n),r(n)},load:function(e,t,n,u){if(u.isBuild&&!u.inlineText){n();return}var f=a.parseName(e),l=f.moduleName+"."+f.ext,c=t.toUrl(l),h=u&&u.text&&u.text.useXhr||a.useXhr;!r||h(c,i,s,o)?a.get(c,function(t){a.finishLoad(e,f.strip,t,n,u)}):t([l],function(e){a.finishLoad(f.moduleName+"."+f.ext,f.strip,e,n,u)})},write:function(e,t,n,r){if(t in u){var i=a.jsEscape(u[t]);n.asModule(e+"!"+t,"define(function () { return '"+i+"';});\n")}},writeFile:function(e,t,n,r,i){var s=a.parseName(t),o=s.moduleName+"."+s.ext,u=n.toUrl(s.moduleName+"."+s.ext)+".js";a.load(o,n,function(t){var n=function(e){return r(u,e)};n.asModule=function(e,t){return r.asModule(e,u,t)},a.write(e,o,n,i)},i)}},a})}(),define("hgn",["hogan_with_filters","text"],function(e,t){function o(i,s,o,f){var l=f.hgn||{},c=i;c+=l&&l.templateExtension!=null?l.templateExtension:n,t.get(s.toUrl(c),function(t){var n=l.compilationOptions?a({},l.compilationOptions):{};f.isBuild&&(n.asString=!0,r[i]=e.compile(t,n));var s=e.compile(t,n),c=u(s.render,s);c.text=s.text,c.template=s,o(c)})}function u(e,t){return function(){return e.apply(t,arguments)}}function a(e,t){var n;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function f(t,n,o){if(n in r){s||(s=e.compile(i));var u=r[n];o(s.render({pluginName:t,moduleName:n,fn:u}))}}var n=".mustache",r={},i='define("{{pluginName}}!{{moduleName}}", ["hogan_with_filters"], function(hogan){  var tmpl = new hogan.Template({{{fn}}}, "", hogan);  function render(){ return tmpl.render.apply(tmpl, arguments); } render.template = tmpl; return render;});\n',s;return{load:o,write:f}}),define("hgn!widgets/templates/menu/menu_item",["hogan_with_filters"],function(e){function n(){return t.render.apply(t,arguments)}var t=new e.Template(function(e,t,n){n=n||"";var r=n+"",i=this;return i.s(i.f("section",e,t,1),e,t,0,12,44,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return n+='    <strong class="dashboard">',n+="\n",n}),e.pop()):(r+=i.b,i.b=""),i.s(i.f("section",e,t,1),e,t,1,0,0,"")||(r+="    <div ",i.s(i.f("classes",e,t,1),e,t,0,91,110,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return n+='class="',n+=i.v(i.f("classes",e,t,0)),n+='"',n}),e.pop()):(r+=i.b,i.b=""),r+=">",r+="\n"+n,r+='    <a class="link" href="',r+=i.v(i.f("url",e,t,0)),r+='">',r+="\n"),r+="        ",i.s(i.f("ico",e,t,1),e,t,0,189,217,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return n+='<i class="ico ',n+=i.v(i.f("ico",e,t,0)),n+='"></i> ',n}),e.pop()):(r+=i.b,i.b=""),i.s(i.f("thumb",e,t,1),e,t,0,235,287,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return n+='<img height="24" src="',n+=i.v(i.f("thumb",e,t,0)),n+='" class="user-fav">  ',n}),e.pop()):(r+=i.b,i.b=""),r+="\n"+n,r+='        <span class="item-link">',r+=i.v(i.f("title",e,t,0)),r+="</span>",r+="\n"+n,r+="        ",i.s(i.f("hasCounter",e,t,1),e,t,0,370,406,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return n+='<span class="counter hidden"></span>',n}),e.pop()):(r+=i.b,i.b=""),r+="\n"+n,i.s(i.f("section",e,t,1),e,t,1,0,0,"")||(r+="    </a>",r+="\n"),r+="    ",i.s(i.f("dropdown",e,t,1),e,t,0,474,505,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return n+='<i class="icon-angle-down"></i>',n}),e.pop()):(r+=i.b,i.b=""),r+="\n"+n,i.s(i.f("section",e,t,1),e,t,0,531,546,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return n+="    </strong>",n+="\n",n}),e.pop()):(r+=i.b,i.b=""),i.s(i.f("section",e,t,1),e,t,1,0,0,"")||(r+="    </div>",r+="\n"),i.s(i.f("hasSubmenu",e,t,1),e,t,0,611,951,"{{ }}")?(r+=i.rs(e,t,function(e,t){var r="";return r+='    <ul class="mainmenu-sub"',i.s(i.f("active",e,t,1),e,t,1,0,0,"")||(r+=' style="display:none;"'),r+="></ul>",r+="\n"+n,i.s(i.f("hasTogglable",e,t,1),e,t,0,712,933,"{{ }}")?(r+=i.rs(e,t,function(e,t){var r="";return r+='    <div class="toggle-visiblity">',r+="\n"+n,r+='        <a class="hidden show-more" href="#">More <i class="icon-caret-down"></i></a>',r+="\n"+n,r+='        <a class="hidden show-less" href="#">Less <i class="icon-caret-up"></i></a>',r+="\n"+n,r+="    </div>",r+="\n",r}),e.pop()):(r+=i.b,i.b=""),r}),e.pop()):(r+=i.b,i.b=""),r},"",e);return n.template=t,n}),define("utils/legacy_browser",["require","widgets/views/informer"],function(e){var t=e("widgets/views/informer");return{isLegacyUserAgent:function(e){var t=e?new RegExp("MSIE [5.."+e+"]\\.\\d+;"):/MSIE [5..8]\.\d+;/;return t.test(navigator.userAgent)},notifyLegacyBrowser:function(){(new t({type:"error",headline:"Update your browser",message:"Please update your browser version to use this feature",controls:[{name:"OK",callback:function(){}}]})).render()}}}),define("widgets/views/menu/menu_item",["require","jquery","backbone","underscore","settings","hogan_with_filters","hgn!widgets/templates/menu/menu_item","utils/legacy_browser"],function(e){var t=e("jquery"),n=e("backbone"),r=e("underscore"),i=e("settings"),s=e("hogan_with_filters"),o=e("hgn!widgets/templates/menu/menu_item"),u=e("utils/legacy_browser"),a={none:{show:function(){return this.show()},hide:function(){return this.hide()}},slide:{show:function(){return this.slideDown()},hide:function(){return this.sideUp()}}};return n.View.extend({defaults:{counterTimeout:3e4},events:{"click .link":"activateItem","click .icon-angle-down":"toggleDropdown"},initialize:function(){this.watchEvent(this.model,"change:active","render",this),this.watchEvent(this.model,"destroy remove","remove",this),this.model.get("activate_events")&&r.each(this.model.get("activate_events"),function(e){this.watchEvent(this.options.router,"route:"+e,"_activateItem",this)},this),this.model.get("type")===2&&this.model.get("deactivate_events")&&r.each(this.model.get("deactivate_events"),function(e){this.watchEvent(this.options.router,"route:"+e,"_deactivateItem",this)},this);if(this.model.get("counterURL")){var e=n.Model.extend({urlRoot:this.model.get("counterURL")});this.counterModel=new e,this.watchEvent(this.counterModel,"change:count","setTicker",this),this.checkCount()}},getParentModel:function(){return this.options.parentView&&this.options.parentView.model},getParents:function(){var e=[],t=this.options.parentView;while(t){if(!t.model)return e;e.unshift(t.model.get("id")),t=t.options.parentView}return e},setTicker:function(e,t){this.$(".counter").text(t).toggleClass("hidden",!t)},checkCount:function(){var e=this;this.counterModel.fetch({success:function(t){setTimeout(function(){e.checkCount()},e.defaults.counterTimeout)}})},render:function(e,t){var n=this.model.has("section"),u=this.model.get("active"),f=this.model.has("dropdown")&&this.model.get("dropdown"),l=this.model.has("submenu"),c=this.model.get("class_name");return r.isBoolean(t)||(this.$el.html(o(this.model.toJSON(),{url:s.compile(this.model.get("url")).render({site_name:i.user_site?i.user_site.name:""}),hasSubmenu:n||f||l,hasTogglable:this.options.hasTogglable,hasCounter:!!this.model.get("counterURL")})),(u||n)&&this.$("ul").show()),this.$el.toggleClass("divider",!!this.model.get("show_divider")).toggleClass("active",!!u).toggleClass("main-menu-dropdown",f).toggleClass("section",n),r.isBoolean(t)&&t===!1?(this.$("ul").slideUp(),this):(c&&this.$el.addClass(c),r.isBoolean(t)&&a[i.site.whitelabel_settings&&i.site.whitelabel_settings.menu_animation||"none"][t?"show":"hide"].call(this.$("ul")),this)},toggleDropdown:function(e){e&&e.preventDefault(),this.$(".mainmenu-sub").toggle(),this.$el.toggleClass("active")},activateItem:function(e){var i=this.model.get("type"),s=this.model.get("active"),o,a,f=!0;if(s){if(this.options.isCollapsable||r.contains([6],i))return this.model.set("active",!1);if(!r.contains([3,4],i))return}if(i===0)return window.location=t(e.currentTarget).closest("a").attr("href"),e;if(i===1&&e&&r.isFunction(e.preventDefault)){e.preventDefault();if(!u.isLegacyUserAgent()){a=this.getParents(),a.push(this.model.get("id")),this.options.router.trigger("close:menu").trigger("route:"+a.join(":"),this.model.get("id"));return}f=!1,this.options.router.trigger("close:menu"),u.notifyLegacyBrowser()}i===2&&e&&r.isFunction(e.preventDefault)&&(e.preventDefault(),this.options.router.trigger("close:menu").trigger("route:"+this.model.get("trigger_route"),this.model.get("id"))),i===3&&(o=new RegExp(n.history.options.root,"ig"),o.test(this.model.get("url"))&&e&&e.preventDefault()),i===4&&(o=new RegExp(n.history.options.root,"ig"),o.test(this.model.get("url"))&&(e&&e.preventDefault(),this.options.router.trigger("close:menu"),r.delay(r.bind(function(){this.options.router.trigger("route:"+this.model.get("trigger_route"),this.model.get("id"))},this),700))),i===5&&this.options.router.trigger("close:menu").trigger("route:"+this.model.get("trigger_route"),e,this.model.get("id"),this.model.get("url")),f&&this.model.set({active:!0})},_deactivateItem:function(){var e;this.model.get("active")&&(e=this.getParentModel(),this.model.unset("active"),e.set("active",!0))},_activateItem:function(e){this.model.set({active:e?e===this.model.get("id"):!0})}})}),define("widgets/views/menu/main_menu",["require","backbone","underscore","widgets/views/menu/menu_item"],function(e){var t=e("backbone"),n=e("underscore"),r=e("widgets/views/menu/menu_item");return t.View.extend({defaults:{submenuLimit:7,slideSpeed:120},events:{"click .toggle-visiblity a":"toggleVisible"},initialize:function(){this.defaults=n.extend({},this.defaults,this.options),this.watchEvent(this.collection,"reset add","drawMenu",this),this.watchEvent(this.collection,"change:submenu","createSubmenu",this),this.watchEvent(this.router,"route:editPost:content route:editPost:advanced route:addPost","syncActive",this)},drawMenu:function(){this.removeAllProduced();var e=this.collection.getList(),t=this.options.parentView;if(t&&t.model.get("section")&&!e.length)return t.$el.addClass("hidden");n.each(e,function(e,t){this.$el.append(this.makeItemView(e,t).render().el),this.createSubmenu(e,e.get("submenu"))},this)},makeItemView:function(e,t){var n=e.get("submenu"),i=t>this.defaults.submenuLimit&&this.options.parentView,s=e.get("dropdown"),o=this.options.parentView;return this.makeInstance(r,{router:this.router,isCollapsable:this.options.isCollapsable,model:e,parentView:o,hasTogglable:!s&&n&&n.length>this.defaults.submenuLimit,tagName:"li",className:"main-menu-item"+(o&&!o._isDropdown&&i?" togglable":"")})},createSubmenu:function(e,r){if(!(r instanceof t.Collection))return this;var i=this.getViewByModel(e),s=e.get("submenu");if(!s||!i)return this;i._isDropdown=e.get("dropdown"),this.makeInstance(this.constructor,{collection:s,parentView:i,router:this.router,el:i.$("ul")[0]}).render(),n.defer(n.bind(this.initToggleMenu,this))},initToggleMenu:function(){var e=this.$("ul > .active");e.length&&e.hasClass("togglable")?(this.$(".togglable").show(),this.$(".show-less").removeClass("hidden")):(this.$(".togglable").hide(),this.$(".show-more").removeClass("hidden"))},toggleVisible:function(e){e.preventDefault(),this.$(".togglable").slideToggle(this.defaults.slideSpeed),this.$(".show-more").toggleClass("hidden"),this.$(".show-less").toggleClass("hidden")},render:function(){return this.drawMenu(),this},syncActive:function(e){n.each(this.collection.getList(),function(t){t.get("id")===e&&t.set({active:!0})},this)}})}),define("hgn!widgets/templates/light_site_create",["hogan_with_filters"],function(e){function n(){return t.render.apply(t,arguments)}var t=new e.Template(function(e,t,n){n=n||"";var r=n+"",i=this;return r+='<div class="add-new-site-inner">',r+="\n"+n,r+='    <div class="sitename form-inline clearfix"></div>',r+="\n"+n,i.s(i.f("siteCopy",e,t,1),e,t,0,104,272,"{{ }}")?(r+=i.rs(e,t,function(e,t){var r="";return r+='    <div class="clone-site clearfix">',r+="\n"+n,r+='        <div class="sub-title uppercase">Choose a site to copy:</div>',r+="\n"+n,r+='        <div class="clone-site-list"></div>',r+="\n"+n,r+="    </div>",r+="\n",r}),e.pop()):(r+=i.b,i.b=""),r+='    <div class="add-new-site-note"></div>',r+="\n"+n,r+='    <div class="form-actions">',r+="\n"+n,r+='        <a href="#" class="btn btn-primary btn-create">',i.s(i.d("labels.create",e,t,1),e,t,1,0,0,"")||(r+="Launch"),i.s(i.d("labels.create",e,t,1),e,t,0,474,491,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return n+=i.v(i.d("labels.create",e,t,0)),n}),e.pop()):(r+=i.b,i.b=""),r+="</a>",r+="\n"+n,r+='        <a href="#" class="btn btn-cancel">Cancel</a>',r+="\n"+n,r+="    </div>",r+="\n"+n,r+="</div>",r+="\n",r},"",e);return n.template=t,n}),define("hgn!widgets/templates/sitename_checker",["hogan_with_filters"],function(e){function n(){return t.render.apply(t,arguments)}var t=new e.Template(function(e,t,n){n=n||"";var r=n+"",i=this;return r+='<div class="formRow siteNameInput">',r+="\n"+n,r+='    <div class="label">',r+="\n"+n,r+='        <label for="name">',r+="\n"+n,r+="            ",i.s(i.d("custom.display_name",e,t,1),e,t,0,123,146,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return n+=i.v(i.d("custom.display_name",e,t,0)),n}),e.pop()):(r+=i.b,i.b=""),r+="\n"+n,r+="            ",i.s(i.d("custom.display_name",e,t,1),e,t,1,0,0,"")||(r+="Site Name:"),r+="\n"+n,r+="        </label>",r+="\n"+n,r+="    </div>",r+="\n"+n,r+='    <div class="field">',r+="\n"+n,r+='        <div class="sitename-wrp">',r+="\n"+n,r+='            <label class="prefix" for="username">',r+=i.v(i.d("custom.display_domain",e,t,0)),i.s(i.d("custom.display_site_placeholder",e,t,1),e,t,0,439,511,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return n+='<span class="prefix-sitename">',n+=i.v(i.d("custom.display_site_placeholder",e,t,0)),n+="</span>",n}),e.pop()):(r+=i.b,i.b=""),r+="</label>",r+="\n"+n,r+='            <input type="text" class="text" name="name" value="',r+=i.v(i.f("name",e,t,0)),r+='" id="username" placeholder="',r+=i.v(i.d("custom.placeholder",e,t,0)),r+='" pattern="^[A-Za-z0-9_]{2,30}$" required="">',r+="\n"+n,r+="        </div>",r+="\n"+n,r+='        <span id="sitename-availability-status"></span>',r+="\n"+n,r+="        ",i.s(i.d("custom.display_description",e,t,1),e,t,0,834,903,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return n+='<div class="display_description">',n+=i.v(i.d("custom.display_description",e,t,0)),n+="</div>",n}),e.pop()):(r+=i.b,i.b=""),r+="\n"+n,r+="    </div>",r+="\n"+n,r+="</div>",r+="\n",r},"",e);return n.template=t,n}),define("widgets/views/sitename_checker",["jquery","backbone","underscore","settings","hgn!widgets/templates/sitename_checker","utils/whitelabel_settings"],function(e,t,n,r,i,s){return t.View.extend({className:"control-group",name:"sitenameChecker",id:"sitename-input",events:{"keyup #username":"checkInput","keydown #username":"checkStatus"},initialize:function(){this.options.custom=this.options.custom||{},this.choosedSitename=e.trim(this.options.choosedSitename).replace(/\s{2,}/g," ").replace(/[\s]/g,"_").replace(/[^a-zA-Z0-9_]/g,"")||""},checkStatus:function(t){var n=this,r=e(t.currentTarget),i=r.val();this.$("#sitename-availability-status").toggle(i===this._currentName),t.keyCode===13&&(this._currentName=i)&&this.validate(i)&&this.getData(r,i).then(function(e){e.status&&n.trigger("form:submit",t)})},validate:function(e){e||(e=this._currentName);var t=new RegExp("^[a-zA-Z0-9_]{3,}$");return this.setStatus(t.test(e))},checkInput:function(t){var n=e(t.currentTarget),r=n.val();this.checkSitename(n,r),this.options.custom.display_site_placeholder&&this.updatePlaceholder(r)},updatePlaceholder:function(e){this.$(".prefix-sitename").text(e.length?e:this.options.custom.display_site_placeholder)},checkSitename:function(e,t){this.validate(t)&&this.getData(e,t),this._currentName=t},getCurrentSiteName:function(){return this._currentName},render:function(){return this.$el.html(i({name:this.choosedSitename,custom:this.options.custom||s.getTemplateVars()})),this._currentName=this.$("#username").val(),this.choosedSitename&&this.checkSitename(this.$("#username"),this.choosedSitename),this.setFocus(),this},setFocus:function(){var e=this;return n.defer(function(){e.$("input").focus()})},getData:n.debounce(function(e,t){var n=this;return e.addClass("checking"),this.collection.fetch({data:{sitename:t},success:function(t,r){n.setStatus(r.status),e.removeClass("checking")},error:function(){e.removeClass("checking")}})},250),setStatus:function(e){return this.$("#sitename-availability-status").html(e?'<i class="status-ico"></i> This name is available':'<i class="status-ico"></i> Not available').toggleClass("valid",e).show(),this.trigger.call(this,"change:sitenamestatus",this,e),e}})}),define("widgets/collections/sitename_checker",["backbone"],function(e){return e.Collection.extend({url:"/core/community/site/checkname/"})}),define("widgets/views/selector",["jquery","backbone","underscore","hogan"],function(e,t,n,r){return t.View.extend({className:"selector",events:{"click .selected":"toggleDropDown","click .selected-arr-wrp":"toggleDropDown","click ul li":"setActive","click .selector-shadow":"toggleDropDown"},initialize:function(e){e||(e={}),n.bindAll(this,"toggleDropDown","setActive"),this.on("set:active",this.activateItem,this),this._activeField=e.activityField||"active";if(!e.updatedField||n.isEmpty(e.options)||!(e.model&&e.model instanceof t.Model))throw"@widgets/views/selector: updatedField, options and model should be specified"},toggleDropDown:function(){this.$(".selector-list").toggle(),this.$el.toggleClass("inwork"),this.$(".selector-shadow").toggle()},activateItem:function(e){this.updateActive(this.$("li").eq(e))},setActive:function(t){this.updateActive(e(t.currentTarget)),this.toggleDropDown()},updateActive:function(e){var t={},r=e.index();t[this.options.updatedField]=this.options.options[r].id,this.$el.find(".selected").html(e.html()).end().find(".active").removeClass("active"),e.addClass("active"),this.model.set(n.extend(t,{options:this.options.options[r]})),this.model.trigger("selector_changed:"+this.options.updatedField)},render:function(){var e=r.compile('<li class="{{#divider}}divider{{/divider}}{{#active}} active{{/active}}">{{#display_logo}}<img src="{{display_logo}}"  {{#ItemName}}class="{{ItemName}}"{{/ItemName}} width="16"  height="16" />{{/display_logo}} {{#name}}<span class="site-name">{{name}}</span>{{/name}}</li>'),t=r.compile('{{#display_logo}}<img src="{{display_logo}}" {{#ItemName}}class="{{ItemName}}"{{/ItemName}} width="16"  height="16" />{{/display_logo}} <span class="site-name">{{name}}</span>'),i="",s="",o=this;return this.options.options&&n.each(this.options.options,function(n){n.active=n.active||n.id===o.model.get(o.options.updatedField),i+=e.render(n),n[o._activeField]&&(s=t.render(n))}),s||(s=t.render(this.options.options[0])),this.$el.html('<div class="selected">'+s+'</div> <div class="selected-arr-wrp"><span class="icon-caret-down drop-down-arrow"></span></div><ul class="selector-list">'+i+'</ul><div class="selector-shadow"></div>'),this.options.trigger&&this.updateActive(this.$(".active")),this}})}),define("widgets/views/light_site_create",["backbone","jquery","underscore","settings","hgn!widgets/templates/light_site_create","widgets/views/sitename_checker","widgets/collections/sitename_checker","widgets/views/informer","widgets/views/selector","utils"],function(e,t,n,r,i,s,o,u,a,f){function c(e){var n;return e.length<2||e.length>30?n="Sorry, but we provide 2 symbols minimum or 30 symbols maximum for site name":l.test(e)||(n="Name ("+f.removeTags(e)+") includes unallowed characters"),n?(this.remove(),(new u({message:n,type:"error",headline:"Ups!",controls:[{name:"OK",callback:t.noop}]})).render(),!1):!0}var l=/^\w{2,30}$/;return e.View.extend({className:"add-new-site",events:{"click .form-actions .btn":"controlAction"},initialize:function(){n.bindAll(this,"controlAction","submitForm"),this._success=this.options.success,this._cancel=this.options.cancel,this.defaultCloneModel=new e.Model({id:0,display_logo:"/static/img/logos/def-site-logo.png",name:"Choose a clone site",title:"Choose a clone site",options:{id:0},active:!0});var i=t.extend(!0,[],r.sites),s={id:0,display_logo:"/static/img/logos/def-site-logo.png",name:"Select a site",title:"Select a site",active:!0};i.unshift(s),this._siteSelector=this.makeInstance(a,{updatedField:"active",options:i,model:this.defaultCloneModel,className:"selector"})},controlAction:function(e){var r=t(e.currentTarget);return r.index()?(n.isFunction(this._cancel)&&this._cancel.call(this.options.context),this.remove()):this.submitForm(),!1},setFocus:function(){this._siteNameViewInst.setFocus()},submitForm:function(){var r=this;if(!c.call(this,this._siteNameViewInst.getCurrentSiteName()))return;this.$(".btn-primary").addClass("disabled").html("Launching...");var i=this._siteNameViewInst.getCurrentSiteName(),s=this.model instanceof e.Model,o;s&&(o=new e.Model(this.model.toJSON()),o.urlRoot=this.model.urlRoot);var a=s?o:new(e.Model.extend({url:"/core/community/site/create/"}));a.save({name:i,clone:this.defaultCloneModel.get("options").id},{success:function(e,t){s&&r.model.set(t),r._siteNameViewInst.setStatus(1),r.trigger.call(r,"add:site",r.model||e),n.isFunction(r._success)&&r._success.call(r.options.context),console.log("Model save",r,this.model,arguments),r.remove(),s||!r.options.redirect&&window.location.reload()},error:function(e,n){r.$(".btn-primary").removeClass("disabled").html("Launch"),r._siteNameViewInst.setStatus(!1),r.remove();var i=JSON.parse(n.responseText),s=i.error&&i.error||"Error occured";(new u({message:s,type:"error",headline:"Ups!",controls:[{name:"OK",callback:t.noop}]})).render()}})},render:function(){return this.$el.html(i(this.options)),this._siteNameViewInst=this.makeInstance(s,{collection:new o,choosedSitename:this.options.choosedSitename,custom:this.options.labels}).render(),this._siteNameViewInst.on("form:submit",this.submitForm),this.$(".sitename").append(this._siteNameViewInst.el),this.$(".clone-site-list").html(this._siteSelector.render().el),this}})}),define("widgets/managers/menu",["require","backbone","jquery","underscore","settings","utils/device","consts","widgets/collections/menu","widgets/views/menu/main_menu","widgets/views/light_site_create"],function(e){var t=e("backbone"),n=e("jquery"),r=e("underscore"),i=e("settings"),s=e("utils/device"),o=e("consts"),u=e("widgets/collections/menu"),a=e("widgets/views/menu/main_menu"),f=e("widgets/views/light_site_create");return t.View.extend({events:{"click .menu-show, .menu-show-logo":"openMenu","click .menu-overlay, .menu-global .site-logo:not(.dont-close)":"closeMenu","click .topbar .menu-show-toggle":"toggleMenu"},initialize:function(){this.router=this.options.router,this.collection=new u(this.options.menuData||this._generateMenu()),this.router.on("close:menu",this.closeMenu,this),this.router.on("add:menu_item",this.addItem,this),this.router.on("remove:menu_item",this.removeItem,this),this.router.on("deactivate:item",this.collection.setPreviousActive,this.collection),this.router.on("route:launchSite",this.launchSite,this);var t=this;(s.isMobile||s.isIphone)&&e(["jquery","libs/jquery/plugins/jquery.mobile.custom"],function(e){e.event.special.swipe.durationThreshold=100,e.event.special.swipe.horizontalDistanceThreshold=10,t.events["swipe .menu-show, .menu-global, .menu-overlay"]="toggleMenu",t.delegateEvents()})},addItem:function(e,t){var n=this.collection.get(e.id);n?n.set(e):n=this.collection.add(e).get(e.id),n.set({active:!!t})},removeItem:function(e){this.collection.remove(this.collection.get(e.id))},setPreviousActive:function(){},openMenu:function(e){this.toggleMenu.call(this,e,!this.$el.hasClass("menu-opened"))},closeMenu:function(e){this.toggleMenu.call(this,e,!1)},toggleMenu:function(e,t){e&&e.preventDefault(),this.$el.toggleClass("menu-opened",t)},launchSite:function(){this._createSiteInst&&this._createSiteInst.remove(),this._createSiteInst=this.makeInstance(f).render(),this.$el.append(this._createSiteInst.el)},_activeMenuItem:function(e){var t=new RegExp(e,"ig");return t.test(window.location.pathname)},_getCurrentSite:function(){return r.find(i.sites,function(e){return e.current})||i.sites&&i.sites[0]},_getActiveSite:function(){return i.user.can("publish_post",!0)&&i.site||this._getCurrentSite()},_generateMenu:function(){var e=[],n=this,s=this._getActiveSite(),u=this._getCurrentSite(),a=i.domain||"",f={manage_domain:function(){return u?(this.visibility=i.is("custom_domain",!0)&&i.user.can("edit_site",!0),this.url=a+"/"+i.site.name,this):this},add_post:function(){return u?(this.url="/"+s.name+"/?add-post",this):this},drafts:function(){return u?(this.url="/"+s.name+"/?open-drafts",this):this},logout:function(){return this.url=a+this.url,this},login:function(){return this.url=a+this.url,this},solutions:function(){return this.submenu=r.map(this.submenu,function(e){return r.extend(e,{url:a+e.url})}),this},about:function(){return this.url=a+this.url,this},sites:function(){if(!u)return this;this.submenu=r.compact(r.map(i.sites||[],function(e){return s.id===e.id||{id:e.name,url:"/core/community/redirect_current_site/"+e.id,title:e.title,order:e.id,visibility:!0,login_required:!0,history:!1,type:0,thumb:e.logo}})),this.title=s.title,this.thumb=s.logo,this.url="/"+s.name+"/",this.dropdown=i.sites.length>1;if(u.id!==s.id){var e=t.Model.extend({url:"/core/community/set_current_site/"+s.id}),n=new e;n.fetch()}return this},about_rebelmouse:function(){return this.submenu=r.map(this.submenu,function(e){return r.extend(e,{url:a+e.url})}),this},dashboard:function(){if(!s)return this;var e=this;return this.submenu=r.map(i.menu||[],function(t,n){return{id:t.id,order:n,url:t.url||e.url+t.id+"/?site="+s.id,visibility:!0,title:t.name,login_required:!0,counterURL:t.id==="notifications"?"/core/notifications/count/":!1,activate_events:["setPage"],history:!1,trigger_route:"activatePage",prefix_parent_url:!0,type:4}}),this.active=n._activeMenuItem(this.url),this}};return r.each(o.SITE_MENU,function(t,n){var r=f[n];r&&r.call(t),e.push(t)}),e},loadAboutModule:function(){var e=new this._extraDeps.aboutModel({id:i.site.id}),t=this.makeInstance(this._extraDeps.aboutView,{model:e,router:this.router,show_about_module:!0,subscribeTitle:"Get my Newsletter",isEditable:!1,sharePage:!1,showBio:!0});e.fetch(),t.setElement(".menu-global .follower-module").render()},render:function(){return this.lazyLoad(i.is("custom_domain",!0),{aboutView:"widgets/views/frontpage_about_site",aboutModel:"widgets/models/about_site",bootstrap:"bootstrap"},this.loadAboutModule)(),this.makeInstance(a,r.extend({},this.options,{router:this.router,collection:this.collection,el:this.$("#main-menu")[0]})).render(),this}})}),define("libs/backbone/plugins/stats_tracking",["jquery","backbone","underscore","consts","settings"],function(e,t,n,r,i){function l(e){return e.charAt(0).toUpperCase()+e.slice(1).replace(/_([a-z])/g,function(e){return" "+e[1].toUpperCase()})}function c(e,t,r){return n.isObject(r)?n.extend(r,{action:s[e][t]}):r={action:s[e][t],label:r},["record",l(e)+(r.action?" - "+r.action:""),r]}function h(e,t,n,r){var i={eventCategory:e,eventAction:t};return n&&(i.eventLabel=n),r&&(i.hitCallback=r),i}function p(e,t,n,r){typeof window.ga=="function"&&window.ga("send","social",e,t,n),r&&typeof window.ga=="function"&&window.ga("b.send","social",e,t,n)}var s=r.TRACKING_ACTIONS,o,u,a,f;return u=function(e,t,r){var o=e.split("."),u=o[0],a=o[1],f=t,l=1,d=1,v=i.site&&!!i.site.user_google_analytics_id?1:0,m=l+v+d;window._kmq=window._kmq||[],r=r||function(){};if(!s[u]||!s[u][a]){console.error("This tracking action does not exist - check that it is defined.");return}if(n.isObject(t)){if(!t.label){console.error('"Label" field is required - check that it is defined.');return}f=t.label}if(!window.ga||!m)return r();if(u==="share"&&typeof window.ga=="function"){var g=t.share_url||window.location.href,y=t.social_action||"share";p(f,y,g,v)}typeof window.ga=="function"&&window.ga("send","event",h(u,a,f,r)),r=n.after(m,r),v&&typeof window.ga=="function"&&window.ga("b.send","event",h(u,a,f,r)),l&&(n.delay(r,250),window._kmq.push(c(u,a,t)))},f=function(){var t=window.Intercom;typeof t=="function"?(t("reattach_activator"),t("update",window.intercomSettings)):(t=function(){t.c(arguments)},t.q=[],t.c=function(e){t.q.push(e)},window.Intercom=t,e(function(){var e=document.createElement("script"),t;e.type="text/javascript",e.async=!0,e.src="https://static.intercomcdn.com/intercom.v1.js",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)}))},a=function(e,t){var r={},s=1,o=i.site&&!!i.site.user_google_analytics_id?1:0,u=o+s;!e||(r.page=e),t&&typeof t=="function"&&(t=n.after(u,t),r.hitCallback=t),typeof window.ga=="function"&&window.ga("send","pageview",r),o&&typeof window.ga=="function"&&window.ga("b.send","pageview",r)},o=function(e,t){if(!e)return;window._kmq=window._kmq||[],window._kmq.push(["identify",e]),!n.isEmpty(t)&&window._kmq.push(["set",t]),window._kmq.push(["record","Logged in"]),i.intercom_app_id&&!i._isWhitelabel()&&(window.intercomSettings={name:t.name,email:t.email,created_at:t.created_at/1e3,app_id:i.intercom_app_id},i.site.owner_id===i.user.id&&n.extend(window.intercomSettings,{site_name:i.site.name,site_title:i.site.title}),f())},function(){this.trackAction=u,this.trackIdentify=o,this.trackPageview=a}}),define("whitelabel/apps/base",["require","backbone","libs/backbone/plugins/sync_processing","libs/backbone/plugins/layout_manager","settings","utils/settings_methods","widgets/managers/menu","libs/backbone/plugins/stats_tracking","libs/backbone/plugins/notifications"],function(e){var t=e("backbone"),n=e("libs/backbone/plugins/sync_processing"),r=e("libs/backbone/plugins/layout_manager"),i=e("settings"),s=e("utils/settings_methods"),o=e("widgets/managers/menu"),u=e("libs/backbone/plugins/stats_tracking"),a=e("libs/backbone/plugins/notifications");return t=t.noConflict(),n.call(t.Collection.prototype),n.call(t.Model.prototype),r.call(t.View.prototype),u.call(t.View.prototype),a.call(t.View.prototype),s.call(i),t.View.extend({el:"body",initialize:function(){this.menu=this.makeInstance(o,{el:this.$el[0],menuData:i.site.whitelabel_settings.main_menu,router:this.router}).render()}})}),define("whitelabel/widgets/views/horizontal_slider",["jquery","backbone","underscore"],function(e,t,n){var r={itemWidth:177};return t.View.extend({events:{"click .controls":"scrollContent",mouseover:"toggleControls",mouseleave:"toggleControls"},initialize:function(){return this.controls=this.$(".controls"),this.slideHolder=this.$(".slide-holder"),this},initRenderedData:function(){var t=this.$(this.options.slideSelector).children(),n=0;this.itemWidth=t.last().outerWidth(!0)||r.itemWidth,t.each(function(t,r){n+=e(r).outerWidth(!0)}),this.$(".slider-wrapper").innerWidth(n),t.find(".image").trigger("load-image")},scrollContent:function(t){t&&t.preventDefault();var r=e(t.currentTarget),i=r.index(),s=this.$el.width();this.slideHolder.animate({scrollLeft:i?this.slideHolder[0].scrollLeft-s:this.slideHolder[0].scrollLeft+s},{duration:400,complete:n.bind(function(){this.$(this.options.slideSelector).find(".image").trigger("load-image")},this)})},toggleControls:function(e){this.controls.toggle(e.type==="mouseover")},render:function(){return this}})}),define("utils/navigate",[],function(){var e=window,t={open:function(t,n,r,i){var s=e.open(t,n,r,i);return s&&(s.opener=null),s}};return t}),define("widgets/collections/likes",["backbone"],function(e){return e.Collection.extend({url:"/core/feeds/post/likes/"})}),define("widgets/templates/post_reaction_buttons",["hogan_with_filters"],function(e){return e.compile('        <div class="likes-reposts">            {{#liked}}            <a class="like-btn unlike" title="Liked" href="#"><i class="icons like"></i> Liked</a>            {{/liked}}            {{^liked}}            <a class="like-btn" title="Like" href="#"><i class="icons like"></i> Like</a>            {{/liked}}            <a class="repost" title="Repost" href="#"><i class="icons re-post repost"></i> Repost</a>        </div>')}),define("widgets/views/post_likes",["jquery","underscore","backbone","settings","widgets/templates/post_reaction_buttons"],function(e,t,n,r,i){return n.View.extend({initialize:function(){this.currentSite=r.user_site||t.findWhere(r.sites,{current:!0}),this.likesCollection=this.options.likesCollection,this.hoverMenu=this.options.hoverMenu,this.changeText=this.options.changeText,this.model.set("liked",this.currentSite?t.contains(this.likesCollection.pluck("site_id"),this.currentSite.id):!1),this.events=this.events||{},this.events[this.hoverMenu?"click":"click .like-btn"]="handleLike",this.delegateEvents(),this.watchEvent(this.likesCollection,"add remove","updateLikes",this),this.watchEvent(this.model,"change:likes","render",this)},handleLike:function(e){e.preventDefault(),this[this.model.get("liked")?"unlike":"like"]()},updateLikes:function(){var t=e.extend(!0,{},this.model.get("likes"));t.count=this.likesCollection.length,this.model.set("likes",t)},render:function(){return this.hoverMenu?(this.model.get("liked")?(this.$el.addClass("unlike").prop("title","Liked"),this.changeText&&this.$el.html(this.$el.html().replace("Like","Liked"))):(this.$el.removeClass("unlike").prop("title","Like"),this.changeText&&this.$el.html(this.$el.html().replace("Liked","Like"))),this.$el.css("visibility","visible")):this.$el.html(i.render(this.model.toJSON(),{liked:this.model.get("liked")})),this},check:function(){return r.is("autorized")?this.currentSite?!1:(this.notify({message:"Please launch a site, you don't have any!"}),!0):(this.trigger("showSignin"),!0)},like:function(){var e=this;if(this.check())return;this.model.set("liked",!0),this.likesCollection.create({site_id:this.currentSite.id,post_id:this.model.get("id"),post_site_id:this.model.get("site_id")},{error:function(t){e.notify({message:"Sorry, an error occurred"}),e.likesCollection.remove(t),this.model.set("liked",!1)}})},unlike:function(){var e=this,t;if(this.check())return;t=this.likesCollection.find(function(e){return e.get("post_id")===this.model.get("id")&&e.get("site_id")===this.currentSite.id},this);if(!t)return;this.model.set("liked",!1),t.sync("delete",t,{data:JSON.stringify({site_id:t.get("site_id"),post_id:t.get("post_id"),post_site_id:r.site.id}),error:function(){e.notify({message:"Sorry, an error occurred"}),e.likesCollection.add(t),e.model.set("liked",!0)}}),this.likesCollection.remove(t)}})}),function(e,t,n,r){var i=e(t);e.fn.lazyload=function(s){function f(){var t=0;o.each(function(){var n=e(this);if(a.skip_invisible&&!n.is(":visible"))return;if(!e.abovethetop(this,a)&&!e.leftofbegin(this,a))if(!e.belowthefold(this,a)&&!e.rightoffold(this,a))n.trigger("appear"),t=0;else if(++t>a.failure_limit)return!1})}var o=this,u,a={threshold:0,failure_limit:0,event:"scroll.lazyload",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return s&&(r!==s.failurelimit&&(s.failure_limit=s.failurelimit,delete s.failurelimit),r!==s.effectspeed&&(s.effect_speed=s.effectspeed,delete s.effectspeed),e.extend(a,s)),u=a.container===r||a.container===t?i:e(a.container),0===a.event.indexOf("scroll")&&u.bind(a.event,function(){return f()}),this.each(function(){var t=this,n=e(t);t.loaded=!1,(n.attr("src")===r||n.attr("src")===!1)&&n.is("img")&&n.attr("src",a.placeholder),n.one("appear",function(){if(!this.loaded){if(a.appear){var r=o.length;a.appear.call(t,r,a)}e("<img />").bind("load",function(){var r=n.attr("data-"+a.data_attribute);n.hide(),n.is("img")?n.attr("src",r):n.css("background-image","url('"+r+"')"),n[a.effect](a.effect_speed),t.loaded=!0;var i=e.grep(o,function(e){return!e.loaded});o=e(i);if(a.load){var s=o.length;a.load.call(t,s,a)}}).attr("src",n.attr("data-"+a.data_attribute))}}),0!==a.event.indexOf("scroll")&&n.bind(a.event,function(){t.loaded||n.trigger("appear")}),n.bind("load-image",function(){t.loaded||n.trigger("appear")})}),i.bind("resize",function(){f()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&i.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&o.each(function(){e(this).trigger("appear")})}),e(n).ready(function(){f()}),this},e.belowthefold=function(n,s){var o;return s.container===r||s.container===t?o=(t.innerHeight?t.innerHeight:i.height())+i.scrollTop():o=e(s.container).offset().top+e(s.container).height(),o<=e(n).offset().top-s.threshold},e.rightoffold=function(n,s){var o;return s.container===r||s.container===t?o=i.width()+i.scrollLeft():o=e(s.container).offset().left+e(s.container).width(),o<=e(n).offset().left-s.threshold},e.abovethetop=function(n,s){var o;return s.container===r||s.container===t?o=i.scrollTop():o=e(s.container).offset().top,o>=e(n).offset().top+s.threshold+e(n).height()},e.leftofbegin=function(n,s){var o;return s.container===r||s.container===t?o=i.scrollLeft():o=e(s.container).offset().left,o>=e(n).offset().left+s.threshold+e(n).width()},e.inviewport=function(t,n){return!e.rightoffold(t,n)&&!e.leftofbegin(t,n)&&!e.belowthefold(t,n)&&!e.abovethetop(t,n)},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document),define("lazyload",["jquery"],function(e){return function(){var t,n;return t||e.jQuery.fn.lazyload}}(this)),define("jqueryui/core",["jquery"],function(e){(function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=t.length?!0:!1,e.ui.ie6=parseFloat(t[1],10)===6}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})})(e)}),define("jqueryui/widget",["jquery"],function(e){(function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a=t.split(".")[0];t=t.split(".")[1],i=a+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[a]=e[a]||{},s=e[a][t],o=e[a][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,i){e.isFunction(i)&&(r[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=r,s=i.apply(this,arguments),this._super=t,this._superApply=n,s}}())}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix:t},r,{constructor:o,namespace:a,widgetName:t,widgetBaseClass:i,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName||n;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new i(o,this))}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetName,this),e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^(\w+)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&(e.effects.effect[u]||e.uiBackCompat!==!1&&e.effects[u])?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})})(e)}),define("jqueryui/mouse",["jquery","./widget"],function(e){(function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return!e.ui.ie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})})(e)}),define("jqueryui/draggable",["jquery","./core","./mouse","./widget"],function(e){(function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);var r=this.element[0],i=!1;while(r&&(r=r.parentNode))r==document&&(i=!0);if(!i&&this.options.helper==="original")return!1;if(this.options.revert=="invalid"&&!n||this.options.revert=="valid"&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var s=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",t)!==!1&&s._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo=="parent"?this.element[0].parentNode:n.appendTo),r[0]!=this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[t.containment=="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t.containment=="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(t.containment=="document"?0:e(window).scrollLeft())+e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(t.containment=="document"?0:e(window).scrollTop())+(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)&&t.containment.constructor!=Array){var n=e(t.containment),r=n[0];if(!r)return;var i=n.offset(),s=e(r).css("overflow")!="hidden";this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(s?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}else t.containment.constructor==Array&&(this.containment=t.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName),s=t.pageX,o=t.pageY;if(this.originalPosition){var u;if(this.containment){if(this.relative_container){var a=this.relative_container.offset();u=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]}else u=this.containment;t.pageX-this.offset.click.left<u[0]&&(s=u[0]+this.offset.click.left),t.pageY-this.offset.click.top<u[1]&&(o=u[1]+this.offset.click.top),t.pageX-this.offset.click.left>u[2]&&(s=u[2]+this.offset.click.left),t.pageY-this.offset.click.top>u[3]&&(o=u[3]+this.offset.click.top)}if(n.grid){var f=n.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;o=u?f-this.offset.click.top<u[1]||f-this.offset.click.top>u[3]?f-this.offset.click.top<u[1]?f+n.grid[1]:f-n.grid[1]:f:f;var l=n.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;s=u?l-this.offset.click.left<u[0]||l-this.offset.click.left>u[2]?l-this.offset.click.left<u[0]?l+n.grid[0]:l-n.grid[0]:l:l}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("draggable"),i=this,s=function(t){var n=this.offset.click.top,r=this.offset.click.left,i=this.positionAbs.top,s=this.positionAbs.left,o=t.height,u=t.width,a=t.top,f=t.left;return e.ui.isOver(i+n,s+r,a,f,o,u)};e.each(r.sortables,function(s){var o=!1,u=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!=u&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(u.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n){var r=e("body"),i=e(this).data("draggable").options;r.css("cursor")&&(i._cursor=r.css("cursor")),r.css("cursor",i.cursor)},stop:function(t,n){var r=e(this).data("draggable").options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,n){var r=e(this).data("draggable");r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"&&(r.overflowOffset=r.scrollParent.offset())},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=!1;if(r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"){if(!i.axis||i.axis!="x")r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop-i.scrollSpeed);if(!i.axis||i.axis!="y")r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft-i.scrollSpeed)}else{if(!i.axis||i.axis!="x")t.pageY-e(document).scrollTop()<i.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed));if(!i.axis||i.axis!="y")t.pageX-e(document).scrollLeft()<i.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))}s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n){var r=e(this).data("draggable"),i=r.options;r.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!=r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=i.snapTolerance,o=n.offset.left,u=o+r.helperProportions.width,a=n.offset.top,f=a+r.helperProportions.height;for(var l=r.snapElements.length-1;l>=0;l--){var c=r.snapElements[l].left,h=c+r.snapElements[l].width,p=r.snapElements[l].top,d=p+r.snapElements[l].height;if(!(c-s<o&&o<h+s&&p-s<a&&a<d+s||c-s<o&&o<h+s&&p-s<f&&f<d+s||c-s<u&&u<h+s&&p-s<a&&a<d+s||c-s<u&&u<h+s&&p-s<f&&f<d+s)){r.snapElements[l].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=!1;continue}if(i.snapMode!="inner"){var v=Math.abs(p-f)<=s,m=Math.abs(d-a)<=s,g=Math.abs(c-u)<=s,y=Math.abs(h-o)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p-r.helperProportions.height,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h}).left-r.margins.left)}var b=v||m||g||y;if(i.snapMode!="outer"){var v=Math.abs(p-a)<=s,m=Math.abs(d-f)<=s,g=Math.abs(c-o)<=s,y=Math.abs(h-u)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d-r.helperProportions.height,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h-r.helperProportions.width}).left-r.margins.left)}!r.snapElements[l].snapping&&(v||m||g||y||b)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=v||m||g||y||b}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n){var r=e(this).data("draggable").options,i=e.makeArray(e(r.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!i.length)return;var s=parseInt(i[0].style.zIndex)||0;e(i).each(function(e){this.style.zIndex=s+e}),this[0].style.zIndex=s+i.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})})(e)}),define("jqueryui/droppable",["jquery","./core","./widget","./mouse","./draggable"],function(e){(function(e,t){e.widget("ui.droppable",{version:"1.9.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,n=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];for(var n=0;n<t.length;n++)t[n]==this&&t.splice(n,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){t=="accept"&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current;if(!r||(r.currentItem||r.element)[0]==this.element[0])return!1;var i=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope==r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(t,n,r){if(!n.offset)return!1;var i=(t.positionAbs||t.position.absolute).left,s=i+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,u=o+t.helperProportions.height,a=n.offset.left,f=a+n.proportions.width,l=n.offset.top,c=l+n.proportions.height;switch(r){case"fit":return a<=i&&s<=f&&l<=o&&u<=c;case"intersect":return a<i+t.helperProportions.width/2&&s-t.helperProportions.width/2<f&&l<o+t.helperProportions.height/2&&u-t.helperProportions.height/2<c;case"pointer":var h=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,p=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,d=e.ui.isOver(p,h,l,a,n.proportions.height,n.proportions.width);return d;case"touch":return(o>=l&&o<=c||u>=l&&u<=c||o<l&&u>c)&&(i>=a&&i<=f||s>=a&&s<=f||i<a&&s>f);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r=e.ui.ddmanager.droppables[t.options.scope]||[],i=n?n.type:null,s=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var o=0;o<r.length;o++){if(r[o].options.disabled||t&&!r[o].accept.call(r[o].element[0],t.currentItem||t.element))continue;for(var u=0;u<s.length;u++)if(s[u]==r[o].element[0]){r[o].proportions.height=0;continue e}r[o].visible=r[o].element.css("display")!="none";if(!r[o].visible)continue;i=="mousedown"&&r[o]._activate.call(r[o],n),r[o].offset=r[o].element.offset(),r[o].proportions={width:r[o].element[0].offsetWidth,height:r[o].element[0].offsetHeight}}},drop:function(t,n){var r=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r=e.ui.intersect(t,this,this.options.tolerance),i=!r&&this.isover==1?"isout":r&&this.isover==0?"isover":null;if(!i)return;var s;if(this.options.greedy){var o=this.options.scope,u=this.element.parents(":data(droppable)").filter(function(){return e.data(this,"droppable").options.scope===o});u.length&&(s=e.data(u[0],"droppable"),s.greedyChild=i=="isover"?1:0)}s&&i=="isover"&&(s.isover=0,s.isout=1,s._out.call(s,n)),this[i]=1,this[i=="isout"?"isover":"isout"]=0,this[i=="isover"?"_over":"_out"].call(this,n),s&&i=="isout"&&(s.isout=0,s.isover=1,s._over.call(s,n))})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}})(e)}),define("whitelabel/widgets/views/posts/post",["require","jquery","underscore","backbone","widgets/views/informer","utils/navigate","settings","widgets/templates/post_base","utils/legacy_browser","utils","widgets/collections/likes","widgets/views/post_likes","lazyload","jqueryui/draggable","jqueryui/droppable"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("widgets/views/informer"),s=e("utils/navigate"),o=e("settings"),u=e("widgets/templates/post_base"),a=e("utils/legacy_browser"),f=e("utils"),l=e("widgets/collections/likes"),c=e("widgets/views/post_likes");return e("lazyload"),e("jqueryui/draggable"),e("jqueryui/droppable"),r.View.extend({className:"widget",events:{"click .edit":"editPost","click .statistics":"editPostStats","click .delete":"deletePost","click .freeze":"toggleFreeze","click article":"openPostStats","click .link-in, .link-out":"openPost",mouseenter:"mouse_enter",mouseleave:"hoverWidget",drop:"postDropped","mousedown a":"mousedownfn","click .share":"openShare"},initialize:function(){this.sortable=this.options.sortable,this.watchEvent(this.model,"change","render",this),this.$el.toggleClass("frozen",!!this.model.get("is_frozen")),this.likesCollection=new l(this.model.has("likes")&&n.values(this.model.get("likes").sites)),this.watchEvent(this.likesCollection,"add and remove","updateLikesCount",this)},openPostStats:function(e){this.statsClick(this.model.id,null,0,["slot="+this.model.get("order")||0]);var n=e.target,r=this.model.get("postLink");if(n.tagName==="A"||t(n).closest("a").length)return;e&&e.preventDefault(),this.model.set("is_seed",!0)},openPost:function(e){e&&e.preventDefault();var t=this.model.get("postLink");this.model.get("is_direct_link")&&!t.match(location.host)?s.open(t,"_blank"):location.href=t},toggleFreeze:function(e){var t=this,n=this.model.collection.originalCollection,r=this.model.get("order"),i,s;e&&e.preventDefault(),n&&(i=n.get(this.model.id),s=n.indexOf(i)),this.model.unset("unfreeze_at"),this.model.save({order:s||r,is_frozen:!this.model.get("is_frozen"),subpage_id:o.site.activePage.id,change_freeze_status:!0},{wait:!0,success:function(e){s&&t.model.set("order",r),t.model.unset("change_freeze_status"),t.$(".hover-menu").toggleClass("active",e.get("is_frozen")),t.$el.toggleClass("frozen",e.get("is_frozen"))}})},mousedownfn:function(e){e.which===2&&this.statsClick(this.model.id,null,0)},openShare:function(e){console.log(2222222222222);var n=t(e.currentTarget).data("track-share");n&&this.trackAction("share.click_post",{label:n,share_url:this.model.get("share_url")}),n&&this.statsShareClick(this.model.id,n,0)},_addSectionTag:function(){if(!this.options.addSectionTag)return;var e=this.model.get("subpages"),t,r;if(!e||!e.length||e.length===1&&!e[0])return;e=e.slice(1),t=n.find(o.site.pages,function(t){return n.contains(e,t.id)&&(t.isPublic||t.isUnlisted)});if(!t)return;var i=f.encodeHTMLTags(t.title);r=t.isUnlisted?'<span class="section-link">'+i+"</span>":'<a class="section-link" href="'+this.router.getSubpageURL(t)+'">'+i+"</a>";var s=this.$(".headline-container");if(s.length)return s.prepend(r);return},postDropped:function(e,t){if(!this.options.postHandleDrop||n.isUndefined(this.options.postHandleDrop))return;var r=this.model.collection,i=r.indexOf(this.model),s=t.draggable,o;o=this.model.collection.get(parseInt(s.attr("elid"),10));if(this.model===o)return;r.reorder(o,i)},initRendered:function(){return this.addControls(),this.updateLikesCount(),this.toggleDraggable(this.options.sortable),this.rendered=!0,this},toggleDraggable:function(e){var r=this.$el,i=this.model.collection||{},s=i.sourceName,u=n.findWhere(o.sites,{id:this.model.get("site_id")});if(!o.user.can("edit_post",!0)||n.isEmpty(u))return!1;if(!t.ui||!s)return;this.activeEditMode=e,r.toggleClass("sortable",e);if(e)r.droppable({hoverClass:"drop-hover",scope:s}).draggable({revert:"invalid",appendTo:this.$el,scope:s,helper:"clone"});else try{this.$el.draggable("destroy").droppable("destroy")}catch(a){console.log("sortable wasn't set")}},render:function(e,t){if(this.rendered&&!e)return this;if(t&&n.has(t.changes,"change_freeze_status"))return this.addControls(),this;this.$el.attr("elid",this.model.id);var r=this.model.get("type")||"page",i=u[r];return this.$el.html(i.render(this.model.toJSON())),this.rendered=!0,this.addControls(),this._addSectionTag(),this.model.get("skip_item_impression")||this.statsImpression(this.model.id,null,0),this.model.set("skip_item_impression",!0),this.$(".image").lazyload(),this},hoverWidget:function(e){this.$(".user-prefs").toggle(e.type==="mouseenter")},mouse_enter:function(e){this.statsMouseOver(this.model.id,null,0),this.hoverWidget(e)},editPost:function(e){e&&e.preventDefault();if(a.isLegacyUserAgent())return a.notifyLegacyBrowser(),!1;this.options.router.trigger("route:editPost",this.model)},editPostStats:function(e){e&&e.preventDefault(),e&&e.stopPropagation(),this.options.router.goToEditModeSection(this.model,"stats")},_getUserPrefs:function(){var e="";e+='<a href="#" class="hover-menu edit" title="Edit"></a>',e+='<a href="#" class="hover-menu statistics" title="Statistics"></a>';if(this.sortable){var t=this.model.get("is_frozen")?"active":"";e+='<a href="#" class="hover-menu freeze '+t+'" title="Freeze Post: keep this story in this spot on the page"></a>'}return e+='<a href="#" class="hover-menu remove delete" title="Remove"></a>',e},updateLikesCount:function(){this.$(".likesCount").html(this.likesCollection.length),this.$el.toggleClass("with-likes",!!this.likesCollection.length)},isLikeButtonShow:function(){return!!this.$(".activity-like").length},getLikeButtonParent:function(){return this.$(".activity-like")},addControls:function(){var e,t=n.findWhere(o.sites,{id:this.model.get("site_id")});return this.isLikeButtonShow()&&this.makeInstance(c,{el:this.getLikeButtonParent(),model:this.model,likesCollection:this.likesCollection}).render(),o.user.can("edit_post",!0)?(e=this._getUserPrefs(),this.$(".user-prefs").length?this.$(".user-prefs").html(e):this.$el.append('<div class="user-prefs">'+e+"</div>"),this):!1},deletePost:function(e){e&&e.preventDefault()&&e.preventPropagation(),(new i({type:"info",message:"Are you sure you want to delete this post?",headline:"Information",context:this,controls:[{name:"Remove",callback:function(){var e=n.findWhere(o.site.pages,{url:"archive"});e?this.model.save({subpages:[e.id]},{success:n.bind(function(){this.model.unset("id"),this.model.destroy()},this)},this):this.model.destroy({wait:!0,success:n.bind(function(){this.remove()},this)})}},{name:"Cancel",callback:t.noop}]})).render()}})}),define("whitelabel/widgets/views/posts/base",["require","jquery","underscore","backbone","whitelabel/widgets/views/posts/post","settings"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("whitelabel/widgets/views/posts/post"),s=e("settings");return r.View.extend({postView:i,defaultSectionConfig:{limit:20,offset:0,type:""},options:{infiniteScroll:!1,postHandleDrop:!0,addSectionTag:!1},initialize:function(){this.sectionConfig=n.defaults(this.options.sectionConfig||{},this.defaultSectionConfig),this.listenToScrollToggle(!0)},listenToScrollToggle:function(e){if(!this.options.infiniteScroll)return;var r=t(window),i=n.debounce(n.bind(function(){this.$el.outerHeight(!0)-r.scrollTop()-r.height()<600&&this.getMorePosts()},this),100);r.off("scroll.posts"),e&&r.on("scroll.posts",i)},clearData:function(){this.offset=this.sectionConfig.offset,this.limit=this.sectionConfig.limit,this.noMorePosts=!1},initPage:function(){this.removeAllProduced(),this.$(".widget").remove(),this.clearData(),this.getMorePosts()},getMorePosts:function(){var e={offset:this.offset,limit:this.limit,site_id:s.site.id,subpage:s.site.activePage.url};return this.noMorePosts?this:(this.listenToScrollToggle(!1),this.collection.fetch({data:e,add:!!this.offset,success:n.bind(function(){this.offset=this.collection.length,this.noMorePosts=this.offset%this.limit?!0:!1,this.listenToScrollToggle(!0),this.collection.each(function(e){e.setSection(this.sectionConfig.format)},this),this.toggleSortable(this.sectionConfig.sortable)},this)}),this)},getPostView:function(e,t){return this.makeInstance(this.postView,{model:e,el:t,router:this.options.router,sortable:this.sectionConfig.sortable,postHandleDrop:this.options.postHandleDrop,addSectionTag:this.options.addSectionTag})},initRenderedData:function(){this.collection.length&&n.each(this.$(".widget"),function(e){var t=this.collection.get(e.getAttribute("elid"));t&&(t.has("order")||t.set("order",this.collection.indexOf(t)),this.getPostView(t,e).initRendered())},this)},toggleSortable:function(e){var r=this.getProduced();if(!t.ui)return;n.each(r,function(t){t.toggleDraggable(e)})},render:function(){return this}})}),define("whitelabel/widgets/views/posts/section",["jquery","underscore","settings","whitelabel/widgets/views/posts/base"],function(e,t,n,r){return r.extend({offset:0,limit:20,options:{infiniteScroll:!1,sortable:!0,postHandleDrop:!0},initialize:function(){this.defaultSectionConfig=t.extend({},this.defaultSectionConfig,{sortable:n.user.can("reorder_frontpage",!0)}),r.prototype.initialize.apply(this,arguments),this.offset=this.defaultSectionConfig.offset||this.collection.length,this.limit=this.defaultSectionConfig.limit||this.limit,this.watchEvent(this.collection,"add remove","render",this)},initRenderedData:function(){return r.prototype.initRenderedData.call(this),this},drawPost:function(e){var t=this.getPostView(e);this.$el.append(t.el),t.render()},render:function(){var e=this.collection.getPosts(this.sectionConfig.offset,this.sectionConfig.limit),n;return this.$(".widget").detach(),t.each(e,function(e){e.set(this.sectionConfig.format,!0),e.get("giant_splash")&&!e.get("giant_splash_image")&&e.set("giant_splash_image",e.get("image980x")),e.setSection(this.sectionConfig.format),n=this.getPostView(e),this.$el.append(n.el),n.render(!1)},this),this.toggleSortable(this.options.sortable),this}})}),define("whitelabel/widgets/views/posts/tagged",["require","exports","module","underscore","whitelabel/widgets/views/posts/base","whitelabel/widgets/views/posts/post","settings"],function(e,t,n){var r=e("underscore"),i=e("whitelabel/widgets/views/posts/base"),s=e("whitelabel/widgets/views/posts/post"),o=e("settings");return i.extend({offset:0,limit:20,options:{infiniteScroll:!1,postHandleDrop:!0},initialize:function(){i.prototype.initialize.apply(this,arguments),this.offset=this.collection.length,this.watchEvent(this.collection,"add","drawPost",this)},drawPost:function(e){var t=this.getPostView(e);this.$el.append(t.el),t.render()}})}),define("whitelabel/widgets/views/promo_base",["require","backbone"],function(e){var t=e("backbone");return t.View.extend({events:{"click .close-promo":"hidePromo"},initialize:function(){this.watchEvent(this.options.router,"window:scroll","toggleVisibility",this)},hidePromo:function(e){e.preventDefault(),this.remove(),this.options.router.trigger("close:promo",this.cid)},toggleVisibility:function(e,t,n){var r=t+n.height<=this.options.offset;this.$el.toggleClass("slide-in",!r).toggleClass("slide-out",r)},render:function(){return this}})}),define("whitelabel/widgets/views/fb_likes_promo",["require","whitelabel/widgets/views/promo_base","settings"],function(e){var t=e("whitelabel/widgets/views/promo_base"),n=e("settings");return t.extend({render:function(){return this}})}),define("whitelabel/widgets/views/promo_manager",["require","backbone","underscore","utils/device"],function(e){var t=e("backbone"),n=e("underscore"),r=e("utils/device");return t.View.extend({className:"promo-manager",initialize:function(){this.watchEvent(this.options.router,"close:promo","render",this)},render:function(){if(r.desktop&&this.options.panels.length){var e=this.options.panels.shift(),t=this.makeInstance(e.view,{model:this.options.model,router:this.options.router,offset:e.offset,el:e.el});this.$el.append(t.render().el)}return this}})}),define("widgets/models/post_base",["backbone","utils","underscore"],function(e,t,n){return e.Model.extend({isSplash:function(){return this.get("splash")||this.get("giant_splash")||this.get("widget_manual_size")>1||!!this.get("_middle_column_splash")},buildPostUrl:function(){return t.buildPostUrl(this.toJSON())},hasChanges:function(e){var t=this.changedAttributes(e.toJSON());return!n.isEmpty(n.omit(t,["shorten_url","stick_to_site_id","facebook_share","twitter_share","googleplus_share"]))}})}),define("utils/parse_sharing_texts",["jquery","underscore","hogan","utils"],function(e,t,n,r){var i=function(e){return!e.get("headline")&&e.get("twitter_info")?r.decodeHTMLTags(e.get("twitter_info").text):e.get("headline")},s=function(e){var n=e.get("active_slide"),r="",i="";if(e.get("type")==="slideshow"){var s=e.get("slideshow")&&e.get("slideshow").slides||[];if(s.length){n&&(r=s[n].image_caption,i=s[n].image);if(i.indexOf("gif")!==-1){var o=t.find(s,function(e){return-1===e.image.indexOf("gif")});r=o.image_caption}}}return{descr:r,image:i}},o=function(e,r,i){return t.each(e,function(e,t){var s=r[t];if(!s.replace)return;var o=n.compile(s.replace(/\{\{/g,"{{{").replace(/\}\}/g,"}}}"));try{r[e]=encodeURIComponent(o.render(i))}catch(u){r[e]=""}}),r},u=function(n,r){var i=require("settings"),s=e.extend(!0,{},i.site.sharing_post_texts),o=["Post_Twitter_Username","Site_Twitter_Username"],u=s[n],a=s.defaults_wo_variables,f=i.site.paid_features?i.site.paid_features:!1;t.each(o,function(e){u.toLowerCase().indexOf(e.toLowerCase())!==-1&&!r[e]&&(u=a[e])});var l="Whitelabel_Site_Twitter_Username";return f&&f.is_paid&&u.toLowerCase().indexOf(l.toLowerCase())!==-1&&!r[l]&&(u=a.ForPaid),u},a=function(){};return a.parse_post=function(n){var a=require("settings"),f={},l=e.extend(!0,{},a.site.sharing_post_texts),c,h="twitter_text_template";if(t.isEmpty(l))return{};c=l.variables,f={email_title_template:"email_title",email_text_template:"email_text"},a.site.is_roar_subsite&&(h="community_twitter_text_template"),n.get("prepared_custom_post_tweet_text")||(f[h]="twitter_text");var p=n.get("twitter_info");c=t.extend(c,{Post_Link:n.get("post_url"),Post_Title:i(n),Post_Twitter_Username:p&&n.get("author_screen_name")||"",Post_Description:r.removeTags(n.get("body")&&n.get("body").substr(0,300)||"")}),n.get("original_user_subsite")&&n.get("original_user_subsite").user_twitter_name&&(c.Site_Twitter_Username="@"+n.get("original_user_subsite").user_twitter_name),l[h]=u(h,c);var d=s(n);d.descr&&(c.Post_Description=r.removeTags(d.descr.substr(0,300))),l=o(f,l,c);var v=!a.site.is_roar&&!a.site.is_roar_subsite;return v&&a.site.paid_features&&!a.site.paid_features.is_paid&&l.twitter_text.toLowerCase().indexOf("via%40rebelmouse")===-1&&(l.twitter_text+="%20via%20@RebelMouse"),n.get("custom_post_tweet_text")&&(l.twitter_text=encodeURIComponent(n.get("custom_post_tweet_text"))),l},a.parse=function(){var e=require("settings"),n={},r="",i=e.site.sharing_texts,s=i.variables,u=e.site.activePage;s.Embed_Url&&(s.Site_Link=s.Embed_Url);if(u&&u.id>0){var a=/\/$/.test(s.Site_Link);n={twitter_subpage_text_template:"twitter_text",email_subpage_title_template:"email_title",email_subpage_text_template:"email_text"},s.Subpage_Title=u.title,s.Subpage_Link=s.Site_Link+(a?"":"/")+u.url,r=s.Site_Link+(a?"":"/")+u.url}else n={twitter_text_template:"twitter_text",email_title_template:"email_title",email_text_template:"email_text"},r=s.Site_Link;i=o(n,i,s);var f=!e.site.is_roar_subsite&&!e.site.is_roar;f&&e.site.paid_features&&!e.site.paid_features.is_paid&&(i.twitter_text+=" via @RebelMouse");var l={402337:"uafly.co/mTeamUSA"};return l[e.site.id]&&(r=l[e.site.id]),s.Embed_Url&&(r=s.Embed_Url),t.extend(i,{page_url:r,url_is_hardcoded:l[e.site.id]})},a}),define("widgets/models/post",["jquery","underscore","widgets/models/post_base","settings","utils","utils/parse_sharing_texts"],function(e,t,n,r,i,s){return n.extend({defaults:function(){var n={provider_id:0,type:"page",is_user_site_owner:!0,collapse_twitter_info:!1,subpages:[0],created_ts:Math.round(+(new Date)/1e3),roar_specific_data:{}};return r.post_extra_fields&&t.each(r.post_extra_fields,function(e,t){n.roar_specific_data[t]=""}),e.extend(!0,{},n)},initialize:function(){this.set({sharing_texts:s.parse_post(this)})},twitterCustomTimelineSync:!1,isSponsored:function(){return!!t.find(this.toJSON(),function(e,t){return/sponsored_content$/.test(t)&&e})},url:function(){return"/core/feeds/site/posts/"+r.site.id+(this.isNew()?"":"/"+this.id)+(this.has("page_id")?"/"+this.get("page_id"):"")+(this.isSponsored()?"?sponsored=1":"")+(this.isSponsored()?"&":"?")+(this.twitterCustomTimelineSync?"synced="+this.twitterCustomTimelineSync:"")},getWidgetSize:function(){return this.get("widget_manual_size")||this.get("size")||1},validate:function(){}})}),define("whitelabel/widgets/models/post",["require","underscore","backbone","widgets/models/post"],function(e){var t=e("underscore"),n=e("backbone"),r=e("widgets/models/post");return r.extend({get:function(e){var t=n.Model.prototype.get.call(this,e);return e==="frontpage_headline"&&!t?this.get("headline"):t},defaults:function(){var e=t.isFunction(r.prototype.defaults)?r.prototype.defaults():r.prototype.defaults,n={provider_id:0,type:"page",is_user_site_owner:!0,collapse_twitter_info:!1,subpages:[0],created_ts:Math.round(+(new Date)/1e3)};return t.extend({},e,n,{frontpage_headline:"",use_cover_image:!0})},setSection:function(e){var t=this.get("section_type");if(t===e)return;this.unset(t).set("section_type",e).set(e,!0)}})}),define("whitelabel/widgets/collections/posts",["backbone","underscore","whitelabel/widgets/models/post"],function(e,t,n){return e.Collection.extend({model:n,url:"/res/feeds/site/posts/",parse:function(e){return t.map(e.source||e,function(e){return t.extend(e,{tagged:!0})})}})}),define("whitelabel/widgets/collections/tagged_posts",["underscore","whitelabel/widgets/collections/posts","settings","bootstrap"],function(e,t,n,r){return t.extend({url:"/core/feeds/whitelabel/get_posts_by_tag/"+n.site.id+"/"+r.tag_url,sourceKey:"tagged",parse:function(t){return e.map(t,function(t){return e.extend(t,{news:!0})})}})}),define("whitelabel/widgets/collections/base_posts",["underscore","backbone","whitelabel/widgets/models/post"],function(e,t,n){return t.Collection.extend({model:n,url:"/res/feeds/site/posts/",parse:function(t){var n=t.source||t,r=e.last(n);return this._lastPostId=t.last_post_id||r&&r.id,n}})}),define("whitelabel/widgets/collections/front_section",["require","underscore","backbone","whitelabel/widgets/collections/base_posts","settings"],function(e){var t=e("underscore"),n=e("backbone"),r=e("whitelabel/widgets/collections/base_posts"),i=e("settings");return r.extend({initialize:function(e,t){t=t||{},this.sourceName=t.sourceName||"",this.sectionName=t.sectionName||"",this.originalCollection=t.originalCollection||"",this.subpageId=t.subpageId||(i.site.activePage?i.site.activePage.id:0),t.dontUseComparator&&(this.comparator=undefined),this.originalCollection&&this.originalCollection instanceof n.Collection&&(this.on("add",this.addToOriginal,this),this.on("remove",this.removeFromOriginal,this))},reset:function(){var e=r.prototype.reset.apply(this,arguments);return this._storeIndexes(),this},comparator:function(e){return e.get("order")},getLastId:function(){var e=t.last(this.models);return this._lastPostId||e&&e.id},getPosts:function(e,t){return this.models.slice(e,e+t)},addToOriginal:function(e){e.set("order",this.originalCollection.length),this.originalCollection.add(e)},removeFromOriginal:function(e){this.originalCollection.remove(e)},_storeIndexes:function(){this.each(function(e){e._lastIndex=this.indexOf(e)},this)},_getModelsWithChangedIndex:function(){return this.filter(function(e){return e._lastIndex!==this.indexOf(e)},this)},swapModels:function(e,t){var n=this.get(e.id),r=this.get(t.id),i=n.get("order"),s=r.get("order");n.set("order",s),r.set("order",i),this.sort(),this._saveReorder()},reorder:function(e,t){this.remove(e,{silent:!0}),this.add(e,{at:t}),this._saveReorder(e)},getPreviousNormalPost:function(e){var t=this.indexOf(e);for(var n=t-1;n>=0;n--)if(!this.at(n).get("is_frozen"))return this.at(n).id;return 0},_saveReorder:function(){function f(n){return function(){return e.trigger(n),t.bind(u.destroy,u)}}var e=this,r=this._getModelsWithChangedIndex(),s=t.filter(r,function(e){return e.get("is_frozen")}),o=t.difference(r,s),u=new(n.Model.extend({urlRoot:"/core/feeds/site/reorder/"})),a={reorder_norm_posts:[],reorder_freeze_posts:[],site_id:i.site.id,subpage_id:this.subpageId};t.each(s,function(t){a.reorder_freeze_posts.push({post_id:t.id,position:e.indexOf(t)})}),t.each(o,function(t){a.reorder_norm_posts.push({post_id:t.id,put_after:e.getPreviousNormalPost(t)})}),u.save(a,{success:f("reorder"),error:f("reorder:error")}),this._storeIndexes()}})}),define("richeditor",[],function(){return!1}),define("widgets/models/site",["backbone","utils/whitelabel_settings","utils"],function(e,t,n){return e.Model.extend({urlRoot:"/core/feeds/site/",getLink:function(){return n.getSiteUrl(this.toJSON())},isFeatureEnabled:function(e){return this.model.get("paid_features")&&this.model.get("paid_features")[e.toLowerCase()]||!1}})}),define("hgn!whitelabel/widgets/templates/modals/light_site_create",["hogan_with_filters"],function(e){function n(){return t.render.apply(t,arguments)}var t=new e.Template(function(e,t,n){n=n||"";var r=n+"",i=this;return r+='<div class="add-new-site-inner inner">',r+="\n"+n,r+="	<p>This will be easy.</p>",r+="\n"+n,r+="	<p>You already have a rebelmouse account</p>",r+="\n"+n,r+='    <div class="sitename form-inline clearfix"></div>',r+="\n"+n,r+='    <div class="form-actions">',r+="\n"+n,r+='    <a href="#" class="btn create-site-btn">Create</a>',r+="\n"+n,r+="    </div>",r+="\n"+n,r+='    <a href="#" class="close-lightbox">close</a>',r+="\n"+n,r+="</div>",r+="\n",r},"",e);return n.template=t,n}),define("hgn!whitelabel/widgets/templates/sitename_checker",["hogan_with_filters"],function(e){function n(){return t.render.apply(t,arguments)}var t=new e.Template(function(e,t,n){n=n||"";var r=n+"",i=this;return r+='<div class="formRow siteNameInput">',r+="\n"+n,r+='    <div class="label">',r+="\n"+n,r+='        <label for="name">SITE NAME:</label>',r+="\n"+n,r+="    </div>",r+="\n"+n,r+='    <div class="field">',r+="\n"+n,r+='        <div class="sitename-wrp">',r+="\n"+n,r+='            <label class="prefix" for="new-site-name">',r+=i.v(i.d("custom.display_domain",e,t,0)),r+='/</label><input type="text" class="text" name="name" value="',r+=i.v(i.f("name",e,t,0)),r+='" id="username" placeholder="SiteName" pattern="^[A-Za-z0-9_]{2,30}$" required="">',r+="\n"+n,r+="        </div>",r+="\n"+n,r+='        <span id="sitename-availability-status"></span>',r+="\n"+n,r+='        <span id="superspan"></span>',r+="\n"+n,r+="    </div>",r+="\n"+n,r+="</div>",r+="\n",r},"",e);return n.template=t,n}),define("whitelabel/widgets/views/modals/sitename_checker",["widgets/views/sitename_checker","hgn!whitelabel/widgets/templates/sitename_checker"],function(e,t){return e.extend({})}),define("widgets/models/community_site",["backbone"],function(e){return e.Model.extend({url:"/core/community/site/create/",defaults:{siteNameRegExp:/^\w{2,30}$/},checkValidSiteName:function(e){var t="";return e.length<2||e.length>30?t="Sorry, but we provide 2 symbols minimum or 30 symbols maximum for site name":this.get("siteNameRegExp").test(e)||(t="Name ("+e+") includes unallowed characters"),{valid:!t,error:t}}})}),define("whitelabel/widgets/views/modals/light_site_create",["require","backbone","jquery","underscore","settings","hgn!whitelabel/widgets/templates/modals/light_site_create","whitelabel/widgets/views/modals/sitename_checker","widgets/collections/sitename_checker","widgets/views/informer","widgets/views/selector","widgets/models/community_site"],function(e){var t=e("backbone"),n=e("jquery"),r=e("underscore"),i=e("settings"),s=e("hgn!whitelabel/widgets/templates/modals/light_site_create"),o=e("whitelabel/widgets/views/modals/sitename_checker"),u=e("widgets/collections/sitename_checker"),a=e("widgets/views/informer"),f=e("widgets/views/selector"),l=e("widgets/models/community_site");return t.View.extend({className:"add-new-site lightbox",events:{"click .form-actions .btn":"controlAction","click .close-lightbox":"closeLightbox"},initialize:function(){r.bindAll(this,"closeLightbox","controlAction","submitForm"),this._success=this.options.success,this._cancel=this.options.cancel},closeLightbox:function(e){e&&e.preventDefault(),this.$el.parent().remove()},controlAction:function(e){return this.submitForm(),!1},setFocus:function(){this._siteNameViewInst.setFocus()},checkSitename:function(e,t){var r=e.checkValidSiteName(t);return this.closeLightbox(),r.error?((new a({message:r.error,type:"error",headline:"Ups!",controls:[{name:"OK",callback:n.noop}]})).render(),!1):!0},submitForm:function(){var e=this,i=this._siteNameViewInst.getCurrentSiteName(),s=new l;this.$(".btn-primary").addClass("disabled").html("Launching..."),this.model instanceof t.Model&&(s.set(this.model.toJSON()),s.urlRoot=this.model.urlRoot);if(!this.checkSitename(s,i))return;s.save({name:i},{success:function(t,n){e.model&&e.model.set(n),e._siteNameViewInst.setStatus(1),e.trigger.call(e,"add:site",s),r.isFunction(e._success)&&e._success.call(e.options.context),e.remove()},error:function(t,r){e.$(".btn-primary").removeClass("disabled").html("Launch"),e._siteNameViewInst.setStatus(!1),e.remove();var i=JSON.parse(r.responseText),s=i.error&&i.error||"Error occured";(new a({message:s,type:"error",headline:"Ups!",controls:[{name:"OK",callback:n.noop}]})).render()}})},render:function(){return this.$el.html(s()),this._siteNameViewInst=(new o({collection:new u,choosedSitename:this.options.choosedSitename})).render(),this._siteNameViewInst.on("form:submit",this.submitForm),this.$(".sitename").append(this._siteNameViewInst.el),this}})}),define("hgn!whitelabel/widgets/templates/modals/login_promo",["hogan_with_filters"],function(e){function n(){return t.render.apply(t,arguments)}var t=new e.Template(function(e,t,n){n=n||"";var r=n+"",i=this;return r+='<div class="login-promo-inner inner">',r+="\n"+n,r+="    <p>Want to Re-Post?</p>",r+="\n"+n,r+="	<p>Get your own Dodo page to contribute, re-post and more!</p>",r+="\n"+n,r+="\n"+n,r+='    <div class="login-promo-buttons">',r+="\n"+n,r+='        <a href="/core/in/">Sign Up Here</a> ',r+="\n"+n,r+="    </div>",r+="\n"+n,r+="    ",r+="\n"+n,r+='    <a href="#" class="close-lightbox">close</a>',r+="\n"+n,r+="</div>",r+="\n",r},"",e);return n.template=t,n}),define("whitelabel/widgets/views/modals/login_promo",["require","backbone","jquery","underscore","settings","hgn!whitelabel/widgets/templates/modals/login_promo"],function(e){var t=e("backbone"),n=e("jquery"),r=e("underscore"),i=e("settings"),s=e("hgn!whitelabel/widgets/templates/modals/login_promo");return t.View.extend({className:"login-promo lightbox",events:{"click .close-lightbox":"closeLightbox"},initialize:function(){r.bindAll(this,"closeLightbox")},closeLightbox:function(e){e&&e.preventDefault(),this.$el.parent().remove()},render:function(){return this.$el.html(s({providers:r.filter(r.values(i.providers),function(e){return r.contains(["facebook","twitter","instagram"],e.name)})})),this}})}),define("utils/sharer",["underscore","hogan_with_filters","utils","utils/navigate"],function(e,t,n,r){function u(){var e=0,t=0;return typeof window.innerWidth=="number"?(e=window.innerWidth,t=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(e=document.body.clientWidth,t=document.body.clientHeight),{width:e,height:t}}function a(e,t){if(e.indexOf("mailto:")>-1)return window.location.href=e,!1;t=t||{};var n=u(),i=window.self!==window.top,s=t.width||660,o=t.height||280,a=(n.width-s)/2,f=(n.height-o)/2;return i?a=f=0:(a=a<0?0:a,f=f<0?0:f),r.open(e,"_blank","width="+s+",height="+o+",left="+a+",top="+f+"resizable=no",!1)}function f(t){var n="%26",r=/\?/g,i=/\%3F/g,s=r.test(t.get("post_url")),u={};return e.each(o,function(e,t){u[t]=s?e.replace(i,n):e},this),u}function l(r,i,s){var o=f(r),u=r.toJSON();return u.mediacode=i,u.share_media=s,e.each(e.keys(o),function(e){o[e]=t.compile(o[e]).render(u,n.filters)}),o}function c(t){var n=e.map(t,function(e,t){return[t,encodeURIComponent(e)].join("=")});return"https://twitter.com/share?"+n.join("&")}function h(e){return"http://www.facebook.com/sharer.php?u="+encodeURIComponent(e)}var i="{{#mediacode}}{{mediacode}}{{/mediacode}}",s="{{#share_media}}{{share_media}}{{/share_media}}{{^share_media}}{{#share_image}}{{share_image}}{{/share_image}}{{/share_media}}",o={email_share:"mailto:?subject={{#sharing_texts}}{{{email_title}}}{{/sharing_texts}}&body={{#sharing_texts}}{{{email_text}}}{{/sharing_texts}}",facebook_share:"http://www.facebook.com/sharer.php?u={{share_url}}%3Fxrs=RebelMouse_fb%23"+i,reddit_share:"http://www.reddit.com/submit?url={{share_url}}%23"+i,googleplus_share:"https://plus.google.com/share?url={{share_url}}%3Fxrs=MARevealed_googleplus%23"+i,twitter_share:"https://twitter.com/intent/tweet?{{#share_url}}url={{share_url}}%3Fxrs=RebelMouse_tw%23"+i+"{{/share_url}}&text={{#sharing_texts}}{{{twitter_text}}}{{/sharing_texts}}{{#via}}&via={{via}}{{/via}}",pinterest_share:"http://pinterest.com/pin/create/button/?url={{share_url}}%23"+i+"&media="+s+"&description={{headline}}",tumblr_share:"http://www.tumblr.com/share?s=&t={{headline}}&u={{share_url}}%23"+i+"&v=3",whatsapp_share:"whatsapp://send?text={{share_url}}%23"+i};return{openPopupWindow:a,updateUrlArgs:f,getRenderedShareTemplates:l,getTweetURL:c,getFbURL:h}}),define("widgets/models/shorten_url",["backbone","underscore","jquery","settings"],function(e,t,n,r){return e.Model.extend({defaults:r.site.bitly,sync:function(e,r,i){var s=t.extend({type:"GET",dataType:"jsonp",crossDomain:!0,url:r.url()},i);return n.ajax(s)},urlRoot:function(){return"https://api-ssl.bitly.com/v3/shorten?apiKey="+this.get("api_key")+"&login="+this.get("login")+"&longUrl="+encodeURIComponent(decodeURIComponent(this.get("longUrl")))+"&format=json"}})}),define("whitelabel/widgets/views/share",["require","jquery","underscore","backbone","settings","utils","utils/legacy_browser","utils/sharer","widgets/models/shorten_url","utils/device"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("settings"),s=e("utils"),o=e("utils/legacy_browser"),u=e("utils/sharer"),a=e("widgets/models/shorten_url"),f=e("utils/device"),l=new a;return r.View.extend({events:{"click a.share":"share"},initialize:function(){var e=this;this.template=this.options.template,this.watchEvent(this.model,"change:post_url","render",this),this.options.togglable&&this.watchEvent(this.options.router,"window:scroll","toggleVisibility",this)},share:function(e){var n=this,r=t(e.currentTarget).attr("href"),i=t(e.currentTarget).data("track-share"),s=u.openPopupWindow("",{width:450,height:240});i&&this.trackAction("share.click_post",{label:i,share_url:this.model.get("share_url")}),i&&this.statsShareClick(this.model.id,i,0),t(e.currentTarget).is(".share-tw")?(e.preventDefault(),l.set({longUrl:this.model.get("share_url")}).fetch({dataType:"jsonp",success:function(e,t){var i=t.status_code===200?t.data.url:n.model.get("share_url");s.location.href=r.replace(/url=([^&]*)/,"url="+i)}})):(s.location.href=r,e.preventDefault()),e.stopPropagation()},toggleVisibility:function(e,t){var n=this.options.offset>=t;this.$el.toggleClass("slide-in",!n)},render:function(){var t=this,r=n.extend({},s.filters,{prepared_custom_post_tweet_text:encodeURIComponent(this.model.get("custom_post_tweet_text"))});return this.$el.html(this.template(this.model.attributes,r,u.updateUrlArgs(this.model))),i.user.id&&this.$(".repost").removeClass("disabled"),(f.isMobile||f.isiPad)&&e(["jquery","libs/jquery/plugins/jquery.mobile.custom"],function(e){e(".join-widget-mobile .fb-share").off("tap").on("tap",n.bind(t.share,t))}),this}})}),define("whitelabel/widgets/views/post_promo",["require","whitelabel/widgets/views/promo_base"],function(e){var t=e("whitelabel/widgets/views/promo_base");return t}),define("hgn!whitelabel/widgets/templates/share/post",["hogan_with_filters"],function(e){function n(){return t.render.apply(t,arguments)}var t=new e.Template(function(e,t,n){n=n||"";var r=n+"",i=this;return r+='<div class="bottom-share-placeholder share-buttons hidden">',r+="\n"+n,r+='    <a href="',r+=i.rp("facebook_share",e,t,""),r+='" data-track-share="Facebook" class="share share-fb show-buttons"><i class="icons-share fb"></i></a>',r+="\n"+n,r+='    <a href="',r+=i.rp("twitter_share",e,t,""),r+='" data-track-share="Twitter" class="share share-tw show-buttons"><i class="icons-share tw"></i></a>',r+="\n"+n,r+='    <div class="buttons-fade">',r+="\n"+n,r+='        <a href="',r+=i.rp("email_share",e,t,""),r+='" data-track-share="Email" class="share share-email show-buttons"><i class="icons-share em"></i></a>',r+="\n"+n,r+='        <a href="',r+=i.rp("googleplus_share",e,t,""),r+='" data-track-share="GooglePlus" class="share share-googleplus show-buttons"><i class="icons-share gp"></i></a>',r+="\n"+n,r+='        <a href="',r+=i.rp("tumblr_share",e,t,""),r+='" data-track-share="Tumblr" class="share share-tumblr show-buttons"><i class="icons-share tl"></i></a>',r+="\n"+n,r+='        <a href="',r+=i.rp("whatsapp_share",e,t,""),r+='" data-track-share="WhatsApp" class="share share-whatsapp show-buttons"><i class="icons-share whatsapp"></i></a>',r+="\n"+n,r+='        <a href="',r+=i.rp("pinterest_share",e,t,""),r+='" data-track-share="Pinterest" class="share share-pinterest show-buttons"><i class="icons-share pt"></i></a>',r+="\n"+n,r+='        <a href="',r+=i.rp("reddit_share",e,t,""),r+='" data-track-share="Reddit" class="share share-reddit show-buttons"><i class="icons-share rd"></i></a>',r+="\n"+n,r+="    </div>",r+="\n"+n,r+='    <a href="#" class="share-plus"></a>',r+="\n"+n,r+="</div>",r+="\n",r},"",e);return n.template=t,n}),define("hgn!whitelabel/widgets/templates/share/post_top",["hogan_with_filters"],function(e){function n(){return t.render.apply(t,arguments)}var t=new e.Template(function(e,t,n){n=n||"";var r=n+"",i=this;return r+='<div class="title"><strong>SHARE</strong>this story</div>',r+="\n"+n,r+='<a href="',r+=i.rp("facebook_share",e,t,""),r+='" data-track-share="Facebook" class="share share-fb show-buttons"><i class="icons-share fb"></i></a>',r+="\n"+n,r+='<a href="',r+=i.rp("twitter_share",e,t,""),r+='" data-track-share="Twitter" class="share share-tw show-buttons"><i class="icons-share tw"></i></a>',r+="\n"+n,r+='<div class="buttons-fade">',r+="\n"+n,r+='    <a href="',r+=i.rp("email_share",e,t,""),r+='" data-track-share="Email" class="share share-email show-buttons"><i class="icons-share em"></i></a>',r+="\n"+n,r+='    <a href="',r+=i.rp("googleplus_share",e,t,""),r+='" data-track-share="GooglePlus" class="share share-googleplus show-buttons"><i class="icons-share gp"></i></a>',r+="\n"+n,r+='    <a href="',r+=i.rp("tumblr_share",e,t,""),r+='" data-track-share="Tumblr" class="share share-tumblr show-buttons"><i class="icons-share tl"></i></a>',r+="\n"+n,r+='    <a href="',r+=i.rp("whatsapp_share",e,t,""),r+='" data-track-share="WhatsApp" class="share share-whatsapp show-buttons"><i class="icons-share whatsapp"></i></a>',r+="\n"+n,r+='    <a href="',r+=i.rp("pinterest_share",e,t,""),r+='" data-track-share="Pinterest" class="share share-pinterest show-buttons"><i class="icons-share pt"></i></a>',r+="\n"+n,r+='    <a href="',r+=i.rp("reddit_share",e,t,""),r+='" data-track-share="Reddit" class="share share-reddit show-buttons"><i class="icons-share rd"></i></a>',r+="\n"+n,r+="</div>",r+="\n"+n,r+='<a href="#"  class="share-plus"></a>',r+="\n",r},"",e);return n.template=t,n}),define("widgets/models/counter",["backbone","underscore","settings","utils"],function(e,t,n,r){return e.Model.extend({defaults:{timeoutInSeconds:10},firstTime:!0,url:function(){var e=/^#/.test(this.get("campaign_name"))?encodeURIComponent(this.get("campaign_name")):this.get("campaign_name");return console.log("this.get",this.toJSON()),this.get("countertype")==="views"?"/res/cta/count/0/"+this.get("post_id")+"?site_id="+this.get("site_id"):"/res/cta/count/2/"+e},start:function(){var e=this;return this.stop(),this.timeoutId=setTimeout(function(){e.firstTime=!1,e.fetch({complete:function(){e.start()}})},this.get("timeoutInSeconds")*(this.firstTime?0:1e3)),this},parse:function(e){return e.recent_signers=t.map(e.recent_signers,function(e){return{username:e[0],message:e[1],time:r.timeSince(new Date(e[3]*1e3)),picture:"/res/avatars/twitter/@"+e[0]}}),e},stop:function(){return clearTimeout(this.timeoutId),this}})}),define("widgets/views/campaign/tweet",["require","exports","module","backbone"],function(e,t,n){var r=e("backbone");return r.View.extend({events:{"blur .campaign-tw-tweet-content":"blurTweet","keydown .campaign-tw-tweet-content":"changeTweet"},initialize:function(){this.tweetContent=this.options.tweetContent,this.buttonSelector=this.options.button,this.buttonState=this.options.buttonState||function(){return!0}},getButton:function(){return this.$(this.buttonSelector)},enable:function(){var e=this.getButton();e.removeClass("disabled")},disable:function(){var e=this.getButton();e.addClass("disabled")},blurTweet:function(e){var t=this.$(e.target);t.val()===""&&t.val(this.tweetContent)},changeTweet:function(e){var t=this.$(e.target);t.val()===""?this.disable():this.buttonState()&&this.enable()}})}),define("widgets/collections/email_checker",["backbone"],function(e){return e.Collection.extend({url:"/core/users/checkemail/"})}),define("hgn!widgets/templates/campaigns/share/anonymous",["hogan_with_filters"],function(e){function n(){return t.render.apply(t,arguments)}var t=new e.Template(function(e,t,n){n=n||"";var r=n+"",i=this;return r+='<textarea class="campaign-tw-tweet-content" type="text">',r+=i.v(i.f("content",e,t,0)),r+="</textarea>",r+="\n"+n,r+='    <div class="signup">',r+="\n"+n,r+='        <div class="row">',r+="\n"+n,r+='            <label for="signup-email">Email:</label>',r+="\n"+n,r+='            <input id="signup-email" class="campaign-tw-tweet-email" type="text">',r+="\n"+n,r+='            <p class="signup-email-error hidden"><i class="status-ico"></i> Not available</p>',r+="\n"+n,r+="        </div>",r+="\n"+n,r+='        <div class="row">',r+="\n"+n,r+='            <label for="signup-password">Password:</label>',r+="\n"+n,r+='            <input id="signup-password" class="campaign-tw-tweet-password" type="password">',r+="\n"+n,r+='            <p class="signup-password-error hidden"><i class="status-ico"></i> Please choose a password of at least 8 characters with at least one letter and one number or symbol (i.e. $!&%)</p>',r+="\n"+n,r+="        </div>",r+="\n"+n,r+='        <div class="campaign-buttons">',r+="\n"+n,r+='        <a href="javascript:void(0)" class="campaign-tw campaign-tw-first-tweet disabled"><i class="providers tw-smx20"></i>Sign with Twitter</a>',r+="\n"+n,r+="    </div>",r+="\n"+n,r+="</div>",r+="\n",r},"",e);return n.template=t,n}),define("widgets/views/campaign/state/anonymous",["require","exports","module","backbone","jquery","underscore","settings","widgets/models/shorten_url","widgets/views/informer","widgets/views/campaign/tweet","widgets/collections/email_checker","widgets/collections/sitename_checker","hgn!widgets/templates/campaigns/share/anonymous"],function(e,t,n){var r=e("backbone"),i=e("jquery"),s=e("underscore"),o=e("settings"),u=e("widgets/models/shorten_url"),a=e("widgets/views/informer"),f=e("widgets/views/campaign/tweet"),l=e("widgets/collections/email_checker"),c=e("widgets/collections/sitename_checker"),h=e("hgn!widgets/templates/campaigns/share/anonymous");return r.View.extend({events:{"click .campaign-tw-first-tweet":"share","keyup .campaign-tw-tweet-email":"getEmail","keyup .campaign-tw-tweet-password":"getPassword"},initialize:function(){this.tweetView=this.makeInstance(f,{el:this.el,button:".campaign-tw-first-tweet",buttonState:s.bind(this.getButtonState,this),tweetContent:this.tweetContent}),this.signUp=function(){return new(r.Model.extend({url:"/core/setup/signup/"}))},this.tweet=function(){return new(r.Model.extend({url:"/core/community/sharing/twitter"}))},this.registrationData={name:null,email:null,password:null,follow_twitter:!1,newsletter_subscribe:!0}},getButtonState:function(){return this.registrationData.name&&this.registrationData.email&&this.registrationData.password},setButtonState:function(){this.getButtonState()?this.tweetView.enable():this.tweetView.disable(),this.registrationData.email?this.$(".signup-email-error").addClass("hidden"):this.$(".campaign-tw-tweet-email").val()!==""&&this.$(".signup-email-error").removeClass("hidden"),this.registrationData.password?this.$(".signup-password-error").addClass("hidden"):this.$(".campaign-tw-tweet-password").val()!==""&&this.$(".signup-password-error").removeClass("hidden")},share:function(){var e=this,t=this.$(".campaign-tw-tweet-content").val();this.signUp().save(this.registrationData,{success:function(n){e.tweet().save({text:t},{success:function(t){e.trigger("open:postState")},error:function(e,t){(new a({message:t.responseText,type:"error",headline:"Ooops!",controls:[{name:"OK",callback:i.noop}]})).render()}})},error:function(){(new a({message:"Internal error",type:"error",headline:"Ooops!",controls:[{name:"OK",callback:i.noop}]})).render()}})},getPassword:function(e){var t=this.$(e.target).val();if(t.length<8){this.registrationData.password=null,this.setButtonState();return}if(!/[a-zA-Z]+/.test(t)||!/(?:\d|\W)+/.test(t)){this.registrationData.password=null,this.setButtonState();return}this.registrationData.password=t,this.setButtonState()},getEmail:function(){var e=this,t=this.$(".campaign-tw-tweet-email").val();if(t.length<4)return;(new l).fetch({data:{email:t},success:function(n,r){r.status?e.registrationData.email=t:e.registrationData.email=null,e.setButtonState()},error:function(){e.registrationData.email=null,e.setButtonState(),(new a({message:"Internal error",type:"error",headline:"Ooops!",controls:[{name:"OK",callback:i.noop}]})).render()}})},getSiteName:function(e){if(this.registrationData.name)return;var t=this,n=o.user.display_name+(e||"");if(!n||!/^[a-zA-Z0-9_]{2,30}$/.test(n))return!1;(new c).fetch({data:{sitename:n},success:function(r,i){i.status?(t.registrationData.name=n,t.setButtonState()):t.getSiteName((e||0)+1)},error:function(){(new a({message:"Internal error",type:"error",headline:"Ooops!",controls:[{name:"OK",callback:i.noop}]})).render()}})},render:function(){if(this.tweetContent){this.$el.html(h({content:this.tweetContent})),this.getSiteName();return}var e=this,t=window.location.toString().replace(/\?tweet$/,"").replace(/\?firstTweet$/,"");(new u).set({longUrl:t}).fetch({dataType:"jsonp",success:function(t,n){e.tweetContent=e.options.tweetContent+" "+n.data.url,e.tweetView.tweetContent=e.tweetContent,e.render()}})}})}),define("hgn!widgets/templates/campaigns/share/authenticated",["hogan_with_filters"],function(e){function n(){return t.render.apply(t,arguments)}var t=new e.Template(function(e,t,n){n=n||"";var r=n+"",i=this;return r+='<div class="campaign-tw-wrapper">',r+="\n"+n,r+='    <textarea class="campaign-tw-tweet-content" type="text">',r+=i.v(i.f("content",e,t,0)),r+="</textarea>",r+="\n"+n,r+='        <div class="campaign-buttons">',r+="\n"+n,r+='        <a href="javascript:void(0)" class="campaign-tw campaign-tw-tweet"><i class="providers tw-smx20"></i>Tweet to Sign</a>',r+="\n"+n,r+="    </div>",r+="\n"+n,r+="</div>",r},"",e);return n.template=t,n}),define("widgets/views/campaign/state/authenticated",["require","exports","module","backbone","jquery","widgets/models/shorten_url","widgets/views/informer","widgets/views/campaign/tweet","hgn!widgets/templates/campaigns/share/authenticated"],function(e,t,n){var r=e("backbone"),i=e("jquery"),s=e("widgets/models/shorten_url"),o=e("widgets/views/informer"),u=e("widgets/views/campaign/tweet"),a=e("hgn!widgets/templates/campaigns/share/authenticated");return r.View.extend({events:{"click .campaign-tw-tweet":"share"},initialize:function(){this.tweetView=this.makeInstance(u,{el:this.el,button:".campaign-tw-tweet",tweetContent:this.tweetContent}),this.tweet=function(){return new(r.Model.extend({url:"/core/community/sharing/twitter"}))}},share:function(e){var t=this,n=this.$(e.target),r={text:this.$(".campaign-tw-tweet-content").val()};if(n.hasClass("disabled"))return!1;n.addClass("disabled"),this.tweet().save(r,{success:function(e){t.trigger("open:postState")},error:function(e,t){(new o({message:t.responseText,type:"error",headline:"Ooops!",controls:[{name:"OK",callback:i.noop}]})).render(),n.removeClass("disabled")}})},render:function(){if(this.tweetContent){this.$el.html(a({content:this.tweetContent}));return}var e=this,t=window.location.toString().replace(/\?tweet$/,"").replace(/\?firstTweet$/,"");(new s).set({longUrl:t}).fetch({dataType:"jsonp",success:function(t,n){e.tweetContent=e.options.tweetContent+" "+n.data.url,e.tweetView.tweetContent=e.tweetContent,e.render()}})}})}),define("hgn!widgets/templates/campaigns/share/default",["hogan_with_filters"],function(e){function n(){return t.render.apply(t,arguments)}var t=new e.Template(function(e,t,n){n=n||"";var r=n+"",i=this;return r+='<div class="campaign-buttons">',r+="\n"+n,r+='    <a href="javascript:void(0)" class="campaign-tw campaign-tw-share"><i class="providers tw-smx20"></i>Tweet to Sign</a>',r+="\n"+n,r+='    <a href="javascript:void(0)" class="campaign-fb campaign-fb-share"><i class="providers fb-smx20"></i>Share on Facebook</a>',r+="\n"+n,r+="</div>",r+="\n",r},"",e);return n.template=t,n}),define("widgets/views/campaign/state/default",["require","exports","module","backbone","utils/sharer","hgn!widgets/templates/campaigns/share/default"],function(e,t,n){var r=e("backbone"),i=e("utils/sharer"),s=e("hgn!widgets/templates/campaigns/share/default");return r.View.extend({events:{"click .campaign-fb-share":"shareFacebook","click .campaign-tw-share":"shareTwitter"},shareFacebook:function(){var e="https://www.facebook.com/sharer.php?u="+window.location+"%3Fxrs=RebelMouse_fb";return i.openPopupWindow(e),!1},shareTwitter:function(e){var t=this.$(e.target);if(t.hasClass("disabled"))return;t.addClass("disabled"),this.trigger("open:shareTwitter")},render:function(){this.$el.html(s())}})}),define("widgets/views/campaign/post",["require","exports","module","backbone"],function(e,t,n){var r=e("backbone");return r.View.extend({defaultPost:"I signed this petition because...",defaultPostReplacement:"I signed this petition because ",events:{"focus .campaign-tw-post-content":"focusPost","blur .campaign-tw-post-content":"blurPost","keydown .campaign-tw-post-content":"changePost"},focusPost:function(e){var t=this.$(e.target);t.val()===this.defaultPost&&t.val(this.defaultPostReplacement)},blurPost:function(e){var t=this.$(e.target);t.val()===""&&t.val(this.defaultPost)},changePost:function(e){var t=this.$(e.target),n=this.$(".campaign-tw-post");t.val()===""?n.addClass("disabled"):n.removeClass("disabled")}})}),define("hgn!widgets/templates/campaigns/share/post",["hogan_with_filters"],function(e){function n(){return t.render.apply(t,arguments)}var t=new e.Template(function(e,t,n){n=n||"";var r=n+"",i=this;return r+='<textarea class="campaign-tw-post-content" type="text">',r+=i.v(i.f("content",e,t,0)),r+="</textarea>",r+="\n"+n,r+='    <div class="campaign-buttons">',r+="\n"+n,r+='    <p class="into"> Your response will be turned into a post on your own Dodo page and could be featured by Dodo editors on the main page of The Dodo! </p>',r+="\n"+n,r+='    <a href="javascript:void(0)" class="campaign-tw campaign-tw-post disabled"><i class="providers tw-smx20"></i>Post!</a>',r+="\n"+n,r+="</div>",r+="\n",r},"",e);return n.template=t,n}),define("widgets/views/campaign/state/post",["require","exports","module","backbone","jquery","widgets/models/post","settings","widgets/views/informer","widgets/views/campaign/post","hgn!widgets/templates/campaigns/share/post"],function(e,t,n){var r=e("backbone"),i=e("jquery"),s=e("widgets/models/post"),o=e("settings"),u=e("widgets/views/informer"),a=e("widgets/views/campaign/post"),f=e("hgn!widgets/templates/campaigns/share/post");return r.View.extend({events:{"click .campaign-tw-post":"publish"},initialize:function(){this.hashtag=this.options.hashtag,this.image=this.options.image,this.imageSize=this.options.imageSize,this.campaignPostView=this.makeInstance(a,{el:this.el}),this.post=function(){return new(s.extend({url:"/res/feeds/site/posts/"+o.user_site.id}))}},publish:function(e){var t=this,n=this.$(e.target),r={headline:"I just signed the "+this.hashtag+" Petition",body:this.$(".campaign-tw-post-content").val()};this.image&&this.imageSize&&(r.type="image",r.image=this.image,r.image_size=this.imageSize);if(n.hasClass("disabled"))return!1;n.addClass("disabled"),this.post().save(r,{success:function(e){window.location=e.get("postLink")},error:function(){(new u({message:"Whoops, we weren't able to create this post. Please try again in a few minutes.",type:"error",headline:"Ooops!",controls:[{name:"OK",callback:i.noop}]})).render(),n.removeClass("disabled")}})},render:function(){this.$el.html(f({content:this.campaignPostView.defaultPost}))}})}),define("widgets/views/campaign/share",["require","exports","module","backbone","jquery","settings","widgets/views/informer","widgets/views/campaign/state/anonymous","widgets/views/campaign/state/authenticated","widgets/views/campaign/state/default","widgets/views/campaign/state/post"],function(e,t,n){var r=e("backbone"),i=e("jquery"),s=e("settings"),o=e("widgets/views/informer"),u=e("widgets/views/campaign/state/anonymous"),a=e("widgets/views/campaign/state/authenticated"),f=e("widgets/views/campaign/state/default"),l=e("widgets/views/campaign/state/post");return r.View.extend({events:{"click .campaign-tw-tweet-content":"dummyClick","click .campaign-tw-tweet-email":"dummyClick","click .campaign-tw-tweet-password":"dummyClick","click .campaign-tw-post-content":"dummyClick"},initialize:function(){var e=this;this.userAuthenticated=s.user.is_autorized,this.userTwitterConnected=s.providers.twitter.status,this.state=new r.Model,this.state.set({post:!1}),this.anonymousStateView=this.makeInstance(u,{tweetContent:this.options.twittersharemessage}),this.authenticatedStateView=this.makeInstance(a,{tweetContent:this.options.twittersharemessage}),this.defaultStateView=this.makeInstance(f),this.postStateView=this.makeInstance(l,{hashtag:decodeURIComponent(this.options.source),image:this.options.image,imageSize:this.options.image_size}),this.watchEvent(this.defaultStateView,"open:shareTwitter","renderShareState",this),this.watchEvent(this.anonymousStateView,"open:postState","renderPostState",this),this.watchEvent(this.authenticatedStateView,"open:postState","renderPostState",this),this.nextUrl=function(){return new(r.Model.extend({url:"/core/users/next_url/"}))}},dummyClick:function(){return!1},authenticate:function(){var e=this,t={next_url:decodeURIComponent(window.location.pathname+"?tweet")};this.nextUrl().save(t,{success:function(e){e.get("status")?window.location="/core/users/login/twitter/":(new o({message:"Internal error",type:"error",headline:"Ooops!",controls:[{name:"OK",callback:i.noop}]})).render()}})},renderShareState:function(){this.state.set({post:!1});if(!this.userAuthenticated||!this.userTwitterConnected)return this.authenticate();this.authenticatedStateView.render(),this.$el.html(this.authenticatedStateView.el)},renderPostState:function(){this.state.set({post:!0}),this.postStateView.render(),this.$el.html(this.postStateView.el),this.$el.addClass("post-state")},render:function(){var e=this.defaultStateView;s.user.is_autorized&&(window.location.search==="?tweet"?e=this.authenticatedStateView:window.location.search==="?firstTweet"&&(e=this.anonymousStateView)),e.render(),this.$el.html(e.el)}})}),define("widgets/views/campaign",["require","exports","module","backbone","underscore","utils","widgets/models/counter","settings","widgets/views/campaign/share"],function(e,t,n){var r=e("backbone"),i=e("underscore"),s=e("utils"),o=e("widgets/models/counter"),u=e("settings"),a=e("widgets/views/campaign/share");return r.View.extend({defaults:{theme:"callout"},classPrefix:"rebelmouse-campaign-",initialize:function(e){var t=this.$el.data(),n=this;i.each(t,function(e,t){i.contains(["increment","target"],e)&&(e=parseInt(e,10)),n.options[t.toLowerCase().replace(/^rm/,"")]=e}),n.options=i.extend(n.defaults,n.options),n.options=i.extend(n.options,{original_url:s.getReferrerURL(),location:u.domain,is_owner:u.is("autorized")&&u.user.id===u.site.owner_id,user_name:u.is("autorized")&&(u.providers.facebook.user_name||u.providers.twitter.user_name||u.providers.instagram.user_name),owner_twitter_name:u.site.owner_data&&u.site.owner_data.twitter_name.toLowerCase()!=="rebelmouse"&&u.site.owner_data.twitter_name||!1,timestamp:Math.round(+(new Date)/1e3)}),/^[a-zA-Z0-9_]*$/.test(n.options.theme)||(n.options.theme="inline"),n.counter=new o({campaign_name:n.options.source}),n.campaignShare=this.makeInstance(a,this.options),n.watchEvent(n.counter,"change:count","refreshCount",this),n.watchEvent(n.campaignShare.state,"change:post","changeHeader",this)},changeHeader:function(e){var t=e.get("post"),n=this.$(".campaign-social-heading");t&&n.html("<strong> Why does this issue matter to you? </strong>")},loadTemplate:function(e,t){this.lazyLoad(!0,{Template:"widgets/templates/campaigns/themes/"+e},i.bind(t,this))()},stop:function(){this.counter.stop()},refreshCount:function(e,t){var n;t=parseInt(t,10);if(this.options.theme==="inline"){this.$el.html(s.localeString(t));return}if(this.options.increment)while(this.options.target/t<1)this.options.target=this.options.target+this.options.increment;n=this.classPrefix+Math.ceil(t/this.options.target*10),n!==this.lastClass&&(this.lastClass&&this.$el.removeClass(this.lastClass),this.$el.addClass(n),this.lastClass=n),this.$target.html(s.localeString(this.options.target)),this.$count.html(s.localeString(t))},render:function(){var e=this;return e.loadTemplate(e.options.theme,function(t){var n=e.counter.toJSON();n=i.extend(n,e.options),i.each(["call","twittersharemessage"],function(t){var r=1;n[t]=e.options[t].replace(/\*\*/g,function(){return r++,(r%2===0?"<":"</")+"strong>"})}),n.twittersharemessage&&(n.twittersharemessage=encodeURIComponent(n.twittersharemessage)),e.$el.html(e._extraDeps.Template.render(n)),e.$target=e.$(".target"),e.$count=e.$(".count"),e.counter.start(),e.campaignShare.setElement(".campaign-share").render()}),this}})}),define("widgets/models/campaign_auth",["require","exports","module","backbone"],function(e,t,n){var r=e("backbone");return r.Model.extend({url:"/core/users/next_url/",authenticate:function(e){var t=this;this.save({next_url:decodeURIComponent(this.get("next_url")+"?tweet")}).success(function(e){t.trigger("auth",e.status?t.get("twitterLoginHandler"):!1)})}})}),define("widgets/models/signup",["require","exports","module","backbone"],function(e,t,n){var r=e("backbone");return r.Model.extend({url:"/core/setup/signup/",enabled:function(){return this.get("email")&&this.get("name")}})}),define("widgets/models/tweet",["require","exports","module","backbone"],function(e,t,n){var r=e("backbone");return r.Model.extend({url:"/core/community/sharing/twitter"})}),define("widgets/models/tweet_follow",["require","exports","module","backbone"],function(e,t,n){var r=e("backbone");return r.Model.extend({url:"/core/community/twitter/follow"})}),function(e){e.fn.textfill=function(t){function i(){if(!r.debug||typeof console=="undefined"||typeof console.debug=="undefined")return;console.debug.apply(console,arguments)}function s(){if(typeof console=="undefined"||typeof console.warn=="undefined")return;console.warn.apply(console,arguments)}function o(e,t,n,r,s,o){function u(e,t){var n=" / ";return e>t?n=" > ":e==t&&(n=" = "),n}i("[TextFill] "+e+" { "+"font-size: "+t.css("font-size")+","+"Height: "+t.height()+"px "+u(t.height(),n)+n+"px,"+"Width: "+t.width()+u(t.width(),r)+r+","+"minFontPixels: "+s+"px, "+"maxFontPixels: "+o+"px }")}function u(e,t,n,r,i,s,u,a){o(e,t,i,s,u,a);while(u<a-1){var f=Math.floor((u+a)/2);t.css("font-size",f);if(n.call(t)<=r){u=f;if(n.call(t)==r)break}else a=f;o(e,t,i,s,u,a)}return t.css("font-size",a),n.call(t)<=r&&(u=a,o(e+"* ",t,i,s,u,a)),u}var n={debug:!1,maxFontPixels:40,minFontPixels:4,innerTag:"span",widthOnly:!1,success:null,callback:null,fail:null,complete:null,explicitWidth:null,explicitHeight:null,changeLineHeight:!1},r=e.extend(n,t);return i("[TextFill] Start Debug"),this.each(function(){var t=e(r.innerTag+":visible:first",this),n=r.explicitHeight||e(this).height(),o=r.explicitWidth||e(this).width(),a=t.css("font-size"),f=parseFloat(t.css("line-height"))/parseFloat(a);i("[TextFill] Inner text: "+t.text()),i("[TextFill] All options: ",r),i("[TextFill] Maximum sizes: { Height: "+n+"px, "+"Width: "+o+"px"+" }");var l=r.minFontPixels,c=r.maxFontPixels<=0?n:r.maxFontPixels,h=undefined;r.widthOnly||(h=u("Height",t,e.fn.height,n,n,o,l,c));var p=undefined;p=u("Width",t,e.fn.width,o,n,o,l,c);if(r.widthOnly)t.css({"font-size":p,"white-space":"nowrap"}),r.changeLineHeight&&t.parent().css("line-height",f*p+"px");else{var d=Math.min(h,p);t.css("font-size",d),r.changeLineHeight&&t.parent().css("line-height",f*d+"px")}i("[TextFill] Finished { Old font-size: "+a+", "+"New font-size: "+t.css("font-size")+" }"),t.width()>o||t.height()>n&&!r.widthOnly?(t.css("font-size",a),r.fail&&r.fail(this),i("[TextFill] Failure { Current Width: "+t.width()+", "+"Maximum Width: "+o+", "+"Current Height: "+t.height()+", "+"Maximum Height: "+n+" }")):r.success?r.success(this):r.callback&&(s("callback is deprecated, use success, instead"),r.callback(this))}),r.complete&&r.complete(this),i("[TextFill] End Debug"),this}}(window.jQuery),define("libs/jquery/plugins/jquery.textfill",function(){}),define("widgets/models/cta/petition",["require","backbone","utils/device","settings"],function(e){var t=e("backbone"),n=e("utils/device"),r=e("settings");return t.Model.extend({defaults:{theme:"sidebar",post:!1,count:0,increment:1e3,title:"",showlogo:"The Dodo",mobiletitle:null,total:null,help:"Help us get to {{target}}",cta:"Pledge Now",pastcta:"Just Pledged",signtitle:"Make your Pledge",twbutton:"Tweet",fbbutton:"Share",sendbutton:"Share",why:"Tell us why you supported this petition and we could feature your post!",sharetext:null,link:window.location.toString().replace(/\?tweet$/,"").replace(/\?firstTweet$/,""),addpost:"Add Post",placeholder:"sidebar",mobileplaceholder:"main",follow:!0,twhandle:null,followtext:"Follow us on Twitter",extracta:null,extractashort:null,extractahref:null,extractatarget:"_blank",min:100,directshare:0,countertype:"views"},totalDefaults:{views:"people have seen this",hashtag:"people have shared"},urlRoot:"/core/cta/common"})}),define("widgets/views/petition",["require","exports","module","backbone","jquery","underscore","utils/navigate","settings","utils","widgets/models/campaign_auth","widgets/models/shorten_url","widgets/models/counter","widgets/models/signup","widgets/models/tweet","widgets/models/tweet_follow","widgets/collections/email_checker","widgets/collections/sitename_checker","utils/device","utils/sharer","widgets/views/informer","libs/jquery/plugins/jquery.textfill","widgets/models/cta/petition"],function(e,t,n){var r=e("backbone"),i=e("jquery"),s=e("underscore"),o=e("utils/navigate"),u=e("settings"),a=e("utils"),f=e("widgets/models/campaign_auth"),l=e("widgets/models/shorten_url"),c=e("widgets/models/counter"),h=e("widgets/models/signup"),p=e("widgets/models/tweet"),d=e("widgets/models/tweet_follow"),v=e("widgets/collections/email_checker"),m=e("widgets/collections/sitename_checker"),g=e("utils/device"),y=e("utils/sharer"),b=e("widgets/views/informer"),w=e("libs/jquery/plugins/jquery.textfill"),E=e("widgets/models/cta/petition");return r.View.extend({events:function(){var e={"keyup .sign-message":"signButtonEnabled","keyup .sign-email":"emailChangeHandler"};return g.isMobile?e=s.extend(e,{click:"expandHandler","touchstart .tw-btn":"twitterSign","touchstart .fb-btn":"facebookSign","touchstart .extra-btn":"extraSign","touchstart .sign-in":"sign","touchstart .collapse-btn":"toggleHandler"}):e=s.extend(e,{click:"expandHandler","click .tw-btn":"twitterSign","click .fb-btn":"facebookSign","click .extra-btn":"extraSign","click .sign-in":"sign","click .collapse-btn":"toggleHandler"}),e},defaults:{templatePath:"widgets/templates/campaigns/themes/",twitterLoginHandler:"/core/users/login/twitter/",next_url:window.location.href,mobileClassName:"is-mobile",placeholderClassName:"placeholder",layoutSelector:"[data-layout=true]",theme:"sidebar",state:{ismobile:g.isMobile,authenticated:u.user.is_autorized&&u.user.email&&u.providers.twitter.status,twitter:u.providers.twitter.status,post:!1,link:window.location.toString().replace(/\?tweet$/,"").replace(/\?firstTweet$/,""),step:"initial"},placeholders:{body:".article-body",sidebar:".one-cell-col",main:".main"},filters:{number:function(e){return a.localeString(a.toInt(e)||0)}}},initialize:function(e){s.bindAll(this,"passwordChangeHandler","emailChangeHandler","checkEmail","checkPassword","resizeHandler","orientationHandler"),this.setOptions(),this.configureCounter(),this.configureState(),this.configureAuth(),i(window).on("resize",this.resizeHandler)},setOptions:function(){return this.options=s.defaults(this.options,this.defaults,this.$el.data()),this},configureCounter:function(){return this.counter=this.makeInstance(c,{campaign_name:this.options.source,post_id:this.options.postModel.get("id"),site_id:this.options.postModel.get("site_id"),countertype:(this.options.postModel.get("cta")||{}).countertype}),this.watchEvent(this.counter,"change:count","countChange",this),this.watchEvent(this.counter,"change:counter_name","counterNameChange",this),this.watchEvent(this.counter,"change:recent_signers","recentSignersChange",this),this},configureState:function(){var e=this,t=this.$el.data();e.state=new E(e.defaults.state),s.each(s.keys(e.state.attributes),function(n){t[n]&&e.state.set(n.toLowerCase(),t[n])}),e.state.get("mobiletitle")||e.state.set("mobiletitle",e.state.get("title")),e.state.get("total")||e.state.set("total",e.state.totalDefaults[e.state.get("countertype")]);if(!t.sharetext&&e.options.postModel){var n=this.getTweet();e.state.set("link",n.url),e.state.set("sharetext",n.text+" {{link}}")}return e.options.postModel&&e.options.postModel.get("cta")&&e.state.set("sendbutton","Share"),e.state.set("tweettext",a.tweetText(this.state.get("sharetext"))),e.watchEvent(e.state,"change:step","changeStep",e),e.watchEvent(e,"staterender","refreshBindings",e),e.watchEvent(e.state,"change","refreshBindings",e),e},configureAuth:function(){var e=s.pick(this.options,"twitterLoginHandler","next_url");e=s.extend(e,{twitter:this.state.get("twitter"),authenticated:this.state.get("authenticated")}),this.auth=this.makeInstance(f,e),this.watchEvent(this.auth,"auth","authHandler"),this.signup=this.makeInstance(h,{}),this.watchEvent(this.signup,"change","signButtonEnabled",this)},authHandler:function(e){if(!e)throw new Error({message:"Cannot authenticate using handler:"+e,name:"AuthError"});window.location=e},toggleExpand:function(e){this.$el.toggleClass("expanded",e),this.isExpanded=e,this.preventScrolling()},changeStep:function(e,t){return this.trigger("statechange",t),this.$step.html(this._extraDeps.Template[t].render(this.state.toJSON())),this.$el.addClass("step-"+t),this.trigger("staterender",t),t!=="initial"&&g.isMobile&&this.toggleExpand(!0),this},loadTemplate:function(e,t){var n=this.options.templatePath+e;this.$el.addClass("template-"+e),this.lazyLoad(!0,{Template:n},t)()},countChange:function(e,t){var n,r,i,s;r=a.toInt(this.state.get("min")),r&&t<r&&(t=r),n={count:a.localeString(a.toInt(t))},i=this.state.get("increment"),s=parseInt(t,10),i&&(n.target=a.localeString(s+(i-s%i))),this.state.set(n)},counterNameChange:function(e,t){this.state.set("counter_name",t)},recentSignersChange:function(e,t){var n=s.contains(["body","here"],this.state.get("placeholder"))?6:3;t=s.map(t.slice(0,n),function(e,t){return e.zebra=t%2?"even":"odd",e}),this.state.set("signers",t)},refreshStep:function(){return this.state.set("step",this.state.get("authenticated")||u.user.is_autorized&&!u.user.email?"sign":"initial"),this},renderText:function(e,t){return e.replace(/\{\{([a-zA-Z]+)\}\}/gi,function(e,n){return t[n.toLowerCase()]})},refreshBindings:function(e){var t=s.extend(this.state.toJSON(),this.options.filters),n=this.template[this.state.get("step")].render(t);this.template.layout&&(n=this.template.layout.render(s.extend(t,{layout:n}))),this.$el.html(this.renderText(n,t)),this.signButtonEnabled(),this.$(".sign-follow-tw").attr("checked",t.follow),(!t.signers||!t.signers.length)&&this.$(".past-cta, .signers").hide(),this.resizeHandler()},getTweet:function(){var e=this.options.postModel.get("sharing_texts"),t="xrs=RebelMouse_tw",n=this.options.postModel.get("share_url"),r=e.variables.Post_Link;return r=r+(/\?/.test(r)?"&":"?")+t,{text:decodeURIComponent(e.twitter_text),url:r+(/\?/.test(r)?"&":"?")+t}},twitterSign:function(e){this.trackAction("share.click_post_petition",{label:"Twitter"}),!this.state.get("directshare")&&(u.site.is_roar||u.site.is_roar_subsite)?this.state.get("authenticated")?this.state.set("step","sign"):this.auth.authenticate():y.openPopupWindow(y.getTweetURL(this.getTweet())),this.statsShareClick(this.options.postModel.get("id"),"Twitter",0),e.preventDefault()},checkEmail:function(){var e=this,t=e.$(".sign-email").val();e.signup.set("email",null);if(t.length>4)return(new v).fetch({data:{email:t},success:function(n,r){e.signup.set("email",r.status?t:null)}})},emailChangeHandler:s.debounce(function(){return this.checkEmail.apply(arguments)},250),checkPassword:function(){var e=this.$(".sign-password").val();return this.signup.set("password",/[a-zA-Z]+/.test(e)&&/(?:\d|\W)+/.test(e)?e:null)},passwordChangeHandler:s.debounce(function(){return this.checkPassword.apply(arguments)},250),handleError:function(e){(new b({message:JSON.parse(e.responseText).error,type:"error",headline:"Ooops!",controls:[{name:"OK",callback:i.noop}]})).render()},tweet:function(e,t){var n=this.makeInstance(p,{});return n.save({text:e}).error(this.handleError).success(t)},follow:function(e,t){var n=this.makeInstance(d,{});return n.save({screen_name:e}).error(this.handleError).success(t)},sign:function(e){e.preventDefault();var t=this,n=t.$(".sign-message").val(),r=function(){t.state.set({step:"signed"})},i=function(e){var t="/"+e+"?add-post=1";return u.user_site&&(t="/community"+t),t},o=0;!!t.$(".sign-follow-tw").is(":checked")&&t.follow(t.state.get("twhandle")),t.state.get("authenticated")?(t.state.set({addposturl:i(u.user_site?u.user_site.name:s.where(u.sites,{current:!0})[0].name)},{silent:!0}),t.tweet(n,r)):function a(){var e=u.user_site.name+(o||"");(new m).fetch({data:{sitename:e},success:function(s,o){o.status?(t.signup.set({name:e,logic_without_pass:!0},{silent:!0}),t.signup.save().error(t.handleError).success(function(s){t.state.set({addposturl:i(e)},{silent:!0}),t.tweet(n,r)})):a()},error:a}),o++}()},signButtonEnabled:function(){var e=!1,t=!!i.trim(this.$(".sign-message").val());this.state.get("authenticated")?e=t:e=this.signup.get("email")&&t,this.$(".sign-in").attr("disabled",!e)},toggleHandler:function(e){e&&e.preventDefault(),this.toggleExpand(!this.isExpanded)},expandHandler:function(e){g.isMobile&&!i(e.target).hasClass("toggle-btn")&&this.toggleExpand(!0)},shortenUrl:function(){var e=this;(new l).set({longUrl:e.state.get("link")}).fetch({dataType:"jsonp",success:function(t,n){e.state.set("link",n.data.url)}})},facebookSign:function(e){e.preventDefault();var t="https://www.facebook.com/sharer.php?u="+window.location+"%3Fxrs=RebelMouse_fb";return y.openPopupWindow(t),this.trackAction("share.click_post_petition",{label:"Facebook"}),this.statsShareClick(this.options.postModel.get("id"),"Facebook",0),!1},extraSign:function(e){e.preventDefault();var t=this.state.get("extractahref");this.state.get("extractatarget")==="_blank"?o.open(t,"ExtraCta_Window"):window.location.href=t},addPost:function(e){e&&e.preventDefault(),this.options.router.trigger("route:addPost")},resizeHandler:s.debounce(function(e){this.$(".count").textfill({widthOnly:!0,maxFontPixels:54}),this.preventScrolling(),this.repositionPhotoCredits()},50),orientationHandler:function(e){this.$el.detach(),window.matchMedia("(orientation: portrait)").matches?this.$el.insertAfter(i(".article-body")):this.$placeholder.prepend(this.$el)},preventScrolling:function(){if(g.isMobile&&this.state.get("step")==="initial"&&this.isExpanded){var e=this.$(".petition-layout"),t=this.$(".signers"),n=t.children();while(a.hasScroll(e)&&n.length)n=n.not(n.last().hide());n.length||(this.$(".past-cta").hide(),t.hide())}},repositionPhotoCredits:s.debounce(function(){var e=i(".giant-splash .photo-credit"),t;return e.length&&(t=i(".article-module"),e.css({left:"%spx".format(t.offset().left+t.outerWidth()-e.outerWidth()),right:"auto"})),this},250),render:function(){var e=this,t=e.state.get("placeholder"),n;return e.$body=i("body"),g.isMobile&&(t=e.state.get("mobileplaceholder")||t),t==="sidebar"&&!i(".giant-splash").length&&(t="body"),t==="here"?(e.$placeholder=i('<div class="petition-here-holder" />'),e.$placeholder.insertBefore(e.$el)):e.$placeholder=i(e.options.placeholders[t]),e.$placeholder.length&&(e.$placeholder.prepend(e.$el.detach()),n=[e.options.placeholderClassName,t==="here"?"body":t].join("-"),e.$el.addClass(n),e.$body.addClass(n)),e.$step=e.$el,e.loadTemplate(e.options.theme,function(){var t;e.template=e._extraDeps.Template,e.template.layout&&(e.$stepElement=i(e.template.layout.render(e.state.toJSON())),e.$step=e.$stepElement.find(e.options.layoutSelector),e.$el.append(e.$stepElement)),e.$body.addClass("with-petition"),e.$el.toggleClass(e.options.mobileClassName,g.isMobile),e.shortenUrl(),e.changeStep(e.state,e.state.get("step")),window.location.search==="?tweet"&&e.refreshStep(),e.counter.start(),!g.desktop&&!g.isMobile&&i(window).on("orientationchange",e.orientationHandler)}),e}})}),define("roar/widgets/views/single_post/post_base",["require","jquery","backbone","underscore","utils","utils/legacy_browser","settings"],function(e){var t=e("jquery"),n=e("backbone"),r=e("underscore"),i=e("utils"),s=e("utils/legacy_browser"),o=e("settings");return n.View.extend({events:{"click .alternative-headlines a":"updateHeadline","mouseenter .headline-container":"toggleHeadlineList","mouseleave .headline-container":"toggleHeadlineList","click .edit":"showEditMode"},initialize:function(){this.watchEvent(this.model,"change:headline","changeHeadline",this)},changeHeadline:function(){var e=this.$(".headline"),t=e.find("a"),n=this.model.get("headline");return t.length?t.text(n):e.text(n)},toggleHeadlineList:function(e){var t=e.type==="mouseenter";this.$(".alternative-headlines").toggleClass("hidden",!t)},showEditMode:function(e){e&&e.preventDefault();if(s.isLegacyUserAgent())return s.notifyLegacyBrowser(),!1;this.model.collection||(this.model.collection=new n.Collection([this.model])),this.options.router.trigger("route:editPost",this.model)},initPost:function(){if(!o.user.can("edit_post",!0))return;this.showControls(),this.addAlternativeHeadlines()},showControls:r.once(function(){if(this.model.get("use_cover_image"))return this.$el.prepend('<a href="#" class="edit btn giant-edit-btn">Edit</a>');this.$(".article-content").append('<a href="#" class="edit btn">Edit</a>')}),updateHeadline:function(e){e.preventDefault();var n=t(e.currentTarget),r=n.data("index"),s=i.buildPostUrl(this.model.toJSON()),o=this._getPostArguments(r);this.router.navigate(s+o,{trigger:!1}),this.model.set({original_headline:this.model.get("original_headline")||this.model.get("headline"),original_post_url:this.model.get("original_post_url")||this.model.get("raw_share_url"),headline:n.text(),post_url:this.model.get("raw_share_url")+o})},_getPostArguments:function(e){return e?"?utm_campaign=ABTest&utm_content="+e:""},_getHeadlineItem:function(e,t){return this.$(".alternative-headlines").append('<li><a data-index="'+(t||"")+'" href="'+i.buildPostUrl(this.model.toJSON())+this._getPostArguments(t)+'">'+e+"</a></li>")},addAlternativeHeadlines:r.once(function(){if(!this.model.get("alternative_headlines")||!o.user.can("edit_post",!0))return!1;this.$(".headline-container").first().append('<ul class="alternative-headlines hidden"></ul>'),this._getHeadlineItem(this.model.get((this.model.has("original_headline")?"original_":"")+"headline")),r.each(this.model.get("alternative_headlines"),this._getHeadlineItem,this)}),render:function(){return this}})}),define("whitelabel/widgets/views/single_post/post",["require","jquery","backbone","underscore","settings","utils","utils/device","whitelabel/widgets/views/share","whitelabel/widgets/views/post_promo","utils/sharer","utils/legacy_browser","hgn!whitelabel/widgets/templates/share/post","hgn!whitelabel/widgets/templates/share/post_top","widgets/templates/post_page_base","widgets/views/campaign","widgets/views/petition","bootstrap","roar/widgets/views/single_post/post_base","whitelabel/widgets/views/fb_likes_promo","whitelabel/widgets/views/promo_manager"],function(e){var t=e("jquery"),n=e("backbone"),r=e("underscore"),i=e("settings"),s=e("utils"),o=e("utils/device"),u=e("whitelabel/widgets/views/share"),a=e("whitelabel/widgets/views/post_promo"),f=e("utils/sharer"),l=e("utils/legacy_browser"),c=e("hgn!whitelabel/widgets/templates/share/post"),h=e("hgn!whitelabel/widgets/templates/share/post_top"),p=e("widgets/templates/post_page_base"),d=e("widgets/views/campaign"),v=e("widgets/views/petition"),m=e("bootstrap"),g=e("roar/widgets/views/single_post/post_base"),y=e("whitelabel/widgets/views/fb_likes_promo"),b=e("whitelabel/widgets/views/promo_manager");return g.extend({campaigns:[],petitions:[],events:function(){var e=g.prototype.events,t=r.isFunction(e)?e():e;return r.extend({},t,{"click .share":"openShare","click a.repost":"restickPost","click .next-slide":"nextSlide","click .slideshow-items li":"switchSlide","click .prev-slide":"prevSlide","click .article-content":"clickOnPermalinkPost","mouseenter .article-content":"mouseenterOnPermalinkPost","click .share-plus":"showSharePanel","click .show-share-mobile, .close-share-mobile":"showSharePanelMobile","click .share-tab-img img":"imgShowSharePanelMobile"})},options:{infiniteScroll:!0},mouseenterOnPermalinkPost:function(){this.statsMouseOver(this.model.id,null,1)},clickOnPermalinkPost:function(){this.statsClick(this.model.id,null,1)},initialize:function(){g.prototype.initialize.call(this),this.watchEvent(this.model,"change:active_slide","changePostSlide",this),this.watchEvent(this.model,"saved","render",this),this.watchEvent(this,"height_changed","adjustSidebarHeight",this),this.listenToScrollToggle(!0),r.bindAll(this,"adjustSidebarHeight")},imgShowSharePanelMobile:function(e){t(e.currentTarget).parent().parent().hasClass("image-link")||t(e.currentTarget).next().toggleClass("show-mobile-share-bar")},showSharePanelMobile:function(e){e.preventDefault(),t(e.currentTarget).parent().parent().toggleClass("show-mobile-share-bar")},showSharePanel:function(e){e.preventDefault(),this.$(".share-buttons").toggleClass("enable-panel")},listenToScrollToggle:function(e){if(!this.options.infiniteScroll||!0)return;var n=t(window),i=r.once(r.bind(this.getNextPost,this)),s=r.debounce(r.bind(function(){this.$el.outerHeight(!0)-n.scrollTop()-n.height()<=0&&i()},this),100);n.off("scroll.posts"),e&&n.on("scroll.posts",s)},getNextPost:function(){t.ajax("/res/feeds/site/next_post/",{data:{site_id:i.site.id,post_id:this.model.id,subpage_id:i.site.activePage.id},success:function(e){e.post_url&&(location.href=e.post_url)}})},initRenderedData:function(){var e=m.post.headline_code?["headline_id="+m.post.headline_code]:[];this.model.get("skip_item_impression")||this.statsImpression(this.model.id,null,1,this.model.get("is_seed")||null,e),this.model.set("skip_item_impression",!0);var n=[{el:this.$(".share-placeholder"),template:c},{el:this.$(".top-share-placeholder"),template:h},{el:this.$(".navbar-share-panel"),template:h,togglable:o.desktop,offset:this.$(".top-share-placeholder").length&&this.$(".top-share-placeholder").offset().top}];r.each(n,function(e){var n=t(e.el);n.data("rendered")||this.makeInstance(u,{el:n,model:this.model,router:this.options.router,template:e.template,togglable:e.togglable,offset:e.offset}).render().$el.data("rendered",!0)},this),i.user.can("edit_post",!0)&&this.showControls(),this.renderShareMediaPanel(),this.$(".post-date").text(s.format_full_date(this.model.get("created_ts"))),this.loadVideo(),this.loadEmbeds(),r.defer(this.adjustSidebarHeight),this.renderPromo(),this.$(".rebelmouse-petition").each(r.bind(this.makePetition,this)),this.$(".rebelmouse-campaign").each(r.bind(this.makeCampaign,this)),this.addAlternativeHeadlines();var a=this.$(".article-body").height();500<a&&this.$(".bottom-share-placeholder").removeClass("hidden")},nextSlide:function(){if(this.model.get("type")!=="slideshow")return!1;var e=this.model.get("slideshow"),t=e.slides,n=this.model.has("active_slide")?this.model.get("active_slide"):e.active_slide,r=t.length<=n+1?0:++n;return this.model.set({active_slide:this.model.get("slideshow").active_slide=r}),!1},prevSlide:function(){if(this.model.get("type")!=="slideshow")return!1;var e=this.model.get("slideshow"),t=e.slides,n=this.model.has("active_slide")?this.model.get("active_slide"):e.active_slide,r=t.length<=n-1?0:--n<0?t.length-1:n;return this.model.set({active_slide:this.model.get("slideshow").active_slide=r}),!1},switchSlide:function(e){e.preventDefault();var n=t(e.currentTarget);return this.model.set({active_slide:this.model.get("slideshow").active_slide=n.index()}),!1},openShare:function(e){e.preventDefault(),f.openPopupWindow(t(e.currentTarget).attr("href"))},restickPost:function(e){e&&e.preventDefault();if(l.isLegacyUserAgent())return l.notifyLegacyBrowser(),!1;i.user.id?this.options.router.trigger("route:restickStory",this.model,{collection:this.model.collection}):this.options.router.trigger("route:showLoginPromo")},loadVideo:function(){if(this.model.get("type")!=="video")return this;var e=this.$(".article-media").innerWidth(),n=/vine\.co/.test(this.model.get("video")),r=this.model.get("iframe_height")==="width";(this.model.get("splash_single_height")>e||n||r)&&this.$(".article-media > iframe").attr("height",e),this.$(".article-media > iframe").attr("src",this.model.get("video"));if(n){var i=t("<script>",{async:!0,src:"//platform.vine.co/static/scripts/embed.js",charset:"utf-8"});t(i).insertAfter(this.$("iframe"))}return this},loadEmbeds:function(){var e=this,t=function(){e.trigger("height_changed")};this.$(".rebelmouse-plugin").length&&s.forceRequire("embed/embed",t),this.$(".rebelmouse-plugin-post").length&&s.forceRequire("embed/embedded_post",t)},adjustSidebarHeight:function(){var e=this.$(".article-module").height(),n=this.$(".most-read-module .widget"),r=n.length,i=30,s=[],o,u;n.show(),u=this.$(".most-read-module").height();while(u>e+i&&r--)o=n[r],u-=t(o).outerHeight(),s.push(o);t(s).hide()},changePostSlide:function(){var e=this,n=this.$(".slideshow-wrapper"),i=this.$(".slideshow-items > li"),s=this.model.get("slideshow").slides,o=r.isNumber(arguments[1])?arguments[1]:this.model.get("active_slide")||0,u=8,a=i.eq(o),f=s[o],l=43*(o-u);this.options.router.navigate(this.model.buildPostUrl(),{replace:!0}),n.animate({scrollLeft:l},"slow");var c=f.image;t("#img-temp-loader").remove();var h=t('<img id="img-temp-loader" src="'+c+'" />');return h.appendTo(t("body")).hide(),h.load(function(){e.$(".article-caption").html(f.image_caption),e.$(".article-media img").first().attr({src:c}),e.is_embedded_post&&r.isFunction(e._informHeight)&&e._informHeight()}),i.removeClass("active"),a.addClass("active"),this},render:function(){var e=m.post.headline_code?["headline_id="+m.post.headline_code]:[];return this.model.get("skip_item_impression")||this.statsImpression(this.model.id,null,1,this.model.get("is_seed")||null,e),this.model.set("skip_item_impression",!0),this.$(".article-content").html(p[this.model.get("type")].render(this.model.toJSON())),i.user.can("edit_post",!0)&&this.showControls(),this.renderShareMediaPanel(),this.loadVideo(),this.loadEmbeds(),r.defer(this.adjustSidebarHeight),this},makeCampaign:function(e,t){this.campaigns.push(this.makeInstance(d,{el:t,image:this.model.get("image"),image_size:this.model.get("image_size"),router:this.options.router}).render())},makePetition:function(e,t){this.petitions.push(this.makeInstance(v,{el:t,postModel:this.model,router:this.options.router}).render())},renderShareMediaPanel:function(){var e=this,n={model:this.model,router:this.options.router};this.lazyLoad(!0,{ShareMediaPanelView:"widgets/views/share_media_panel"},function(){e.$("img.rm-shortcode").each(function(i,s){n=r.extend({},n,{mediaUrlHash:this.id,mediaUrl:this.src}),t(this).wrap('<div class="share-tab-img share-buttons" />').parent().append(e.makeInstance(e._extraDeps.ShareMediaPanelView,n).render().el)})})()},renderPromo:function(){var e=Math.min(this.$(".render-promo-trigger").offset().top,this.$(".article-body").offset().top+this.$(".article-body").outerHeight(!0));this._promoManagerView=this.makeInstance(b,{model:this.model,router:this.options.router,panels:[{view:y,el:this.$(".fb-promo")[0],offset:e},{view:a,el:this.$(".next-article-promo")[0],offset:e}]}).render(),this.$el.append(this._promoManagerView.el)}})}),define("roar/widgets/views/single_post/post_header",["require","jquery","backbone","underscore","roar/widgets/views/single_post/post_base","settings"],function(e){var t=e("jquery"),n=e("backbone"),r=e("underscore"),i=e("roar/widgets/views/single_post/post_base"),s=e("settings");return i.extend({events:function(){var e=i.prototype.events,t=r.isFunction(e)?e():e;return r.extend({},t,{})},render:function(){return this.initPost(),this}})}),define("whitelabel/widgets/views/post_stats_tracker",["require","jquery","underscore","backbone","widgets/views/informer","settings","jqueryui/draggable","jqueryui/droppable"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("widgets/views/informer"),s=e("settings");return e("jqueryui/draggable"),e("jqueryui/droppable"),r.View.extend({className:"widget",events:{"click img":"openPost",click:"openPost",mouseenter:"mouse_enter","mousedown a":"mousedownfn"},initialize:function(){},openPost:function(e){this.statsClick(this.model.get("id"),null,0,["slot=0"]);var n=e.target,r=this.model.get("postLink");if(n.tagName==="A"||t(n).closest("a").length)return;e&&e.preventDefault(),location.href!==r&&(location.href=r)},mousedownfn:function(e){e.which===2&&this.statsClick(this.model.get("id"),null,0)},initRendered:function(){return this.rendered=!0,this},mouse_enter:function(e){this.statsMouseOver(this.model.get("id"),null,0)}})}),define("whitelabel/managers/content_base",["require","exports","module","underscore","backbone","jquery","settings","bootstrap","utils","richeditor","widgets/models/site","whitelabel/widgets/views/modals/light_site_create","whitelabel/widgets/views/modals/login_promo","whitelabel/widgets/views/single_post/post","roar/widgets/views/single_post/post_header","whitelabel/widgets/views/post_stats_tracker","whitelabel/widgets/models/post"],function(e,t,n){var r=e("underscore"),i=e("backbone"),s=e("jquery"),o=e("settings"),u=e("bootstrap"),a=e("utils"),f=e("richeditor"),l=e("widgets/models/site"),c=e("whitelabel/widgets/views/modals/light_site_create"),h=e("whitelabel/widgets/views/modals/login_promo"),p=e("whitelabel/widgets/views/single_post/post"),d=e("roar/widgets/views/single_post/post_header"),v=e("whitelabel/widgets/views/post_stats_tracker"),m=e("whitelabel/widgets/models/post");return i.View.extend({initialize:function(){this.router=this.options.router,this.watchEvent(this.router,"route:addSite","showSiteCreate",this),this.watchEvent(this.router,"route:showLoginPromo","showLoginPromo",this),this.watchEvent(this.router,"route:loadPostPage","loadPostPage",this)},render:function(){return this},loadPostPage:function(e){o.site.activePage={id:r.first(u.post.subpages)||0,url:"",isPublic:!0};var t=new m(u.post),n=o.user.can("edit_post_comments",!0)||o.user.can("edit_post_comments",!0,"parent_site");this.$(".post-splash").length&&this.makeInstance(d,{el:this.$(".post-splash")[0],router:this.options.router,model:t}).render(),this.makeInstance(p,{el:this.$(".post-page")[0],router:this.options.router,model:t}).initRenderedData(),o.is("autorized")&&(this.lazyLoad(o.use_river,{CommunityComments:"widgets/views/comments/community_comments"},function(){this.makeInstance(this._extraDeps.CommunityComments,{router:this.router,post_id:t.get("id"),counter:!0,limit:10,el:this.$(".community-comments-wrp")[0]}).render()})(),this.lazyLoad(o.use_river&&n,{PrivateComments:"widgets/views/comments/comments"},function(){this.makeInstance(this._extraDeps.PrivateComments,{router:this.router,post_id:t.get("id"),limit:10,el:this.$(".private-comments-wrp")[0],counter:!0}).render()})()),this.initRenderedData(e)},addPost:function(){this.router.trigger("route:addPost")},showSiteCreate:function(){this._addSiteForm=s('<div class="create-site-form lightbox-overlay lightbox-hidden">').appendTo(this.el);var e=this,t=function(e){this._createSiteForm instanceof i.View&&this._createSiteForm.remove()},n=function(){};e._createSiteForm=e.makeInstance(c,{context:e,success:t,cancel:n}).render(),e._createSiteForm.on("add:site",function(e){window.location.href=(new l(e.toJSON())).getLink()}),e._createSiteForm.on("all",function(){this.trigger.apply(this,arguments)},e),e._createSiteForm.setFocus(),e._addSiteForm.html(e._createSiteForm.el),r.defer(function(){e._addSiteForm.removeClass("lightbox-hidden")})},showLoginPromo:function(){var e=this;this._loginModal=s('<div class="login-form lightbox-overlay lightbox-hidden">').appendTo(this.el),this._loginModalView=this.makeInstance(h,{}).render(),this._loginModal.html(this._loginModalView.el),r.defer(function(){e._loginModal.removeClass("lightbox-hidden")})},_listPostsOnPage:function(){var e=s.makeArray(s("div[elid]").map(function(e,t){return parseInt(s(t).attr("elid"),10)}));return e},_sectionImpressions:function(){var e=[];r.each(r.values(u.posts_by_source),function(t){r.each(t,function(t){e.push(t.id)})},this),r.each(r.values(this.collections),function(e){e.each(function(e){e.set("skip_item_impression",!0)})}),this.statsBulkImpressions(e,[])}})}),define("whitelabel/managers/content",["require","exports","module","underscore","jquery","bootstrap","utils","settings","whitelabel/widgets/views/horizontal_slider","whitelabel/widgets/views/posts/base","whitelabel/widgets/views/posts/section","whitelabel/widgets/views/posts/tagged","whitelabel/widgets/views/fb_likes_promo","whitelabel/widgets/views/promo_manager","whitelabel/widgets/collections/posts","whitelabel/widgets/collections/tagged_posts","whitelabel/widgets/collections/front_section","whitelabel/managers/content_base"],function(e,t,n){var r=e("underscore"),i=e("jquery"),s=e("bootstrap"),o=e("utils"),u=e("settings"),a=e("whitelabel/widgets/views/horizontal_slider"),f=e("whitelabel/widgets/views/posts/base"),l=e("whitelabel/widgets/views/posts/section"),c=e("whitelabel/widgets/views/posts/tagged"),h=e("whitelabel/widgets/views/fb_likes_promo"),p=e("whitelabel/widgets/views/promo_manager"),d=e("whitelabel/widgets/collections/posts"),v=e("whitelabel/widgets/collections/tagged_posts"),m=e("whitelabel/widgets/collections/front_section"),g=e("whitelabel/managers/content_base");return g.extend({_sourceTypesToViews:{page:l,tagged:c,popular:f,related:f,community_page:c,subpage:l},_sourceTypesToCollections:{page:m,tagged:v,popular:d,related:d,community_page:v,subpage:m},_infiniteScrollByPage:{community:"tagged",news:"tagged"},events:{"click .join-widget .btn-join":"joinDodo","click .add-post-button":"toAddPost","click .my-profile-button":"toProfile"},toProfile:function(){window.location.href="/community/"+u.user_site.name+"/"},toAddPost:function(){window.location.href="/community/"+u.user_site.name+"/?add-post=1"},joinDodo:function(e){e.preventDefault();var t=i(e.currentTarget),n=t.attr("href"),r=this.$(".join-widget input").val().trim();window.location=n+(r&&o.is_valid_email(r)?"&email="+encodeURIComponent(r):"")},initialize:function(){g.prototype.initialize.call(this),this.collections={},this._sectionInstances={},this.watchEvent(this.router,"route:loadFrontPage route:loadSubPage route:openFrontSubpage",this._decorate("loadFrontpage",this._removePostView),this),this.watchEvent(this.router,"route:loadTagPage","loadTagPage",this),this.watchEvent(this.router,"route:loadSubpage","loadSubpage",this)},initRenderedData:function(e){console.log("bootstrap",s),this._createSourceCollections(),this._initSectionViews(e)},loadSubpage:function(e){this.initRenderedData(),this.renderPromo()},loadTagPage:function(e){this._sectionImpressions();var t=this;r.each(s.posts_by_source,function(e,n){var r=n,i=t._getPostView(r),o=new(t._getPostsCollection(r))([],{dontUseComparator:!0}),a=t.makeInstance(i,{collection:o.reset(o.parse(s.posts_by_source[r])),router:t.options.router,infiniteScroll:!0,el:t.$("."+r+"-section"),sectionConfig:{sortable:!0}});u.ServerSideRendering?a.initRenderedData():a.render()})},renderPromo:function(){this._promoManagerView=this.makeInstance(p,{model:this.model,router:this.options.router,panels:[{view:h,el:this.$(".fb-promo")[0],offset:this.$(".popular-section").offset().top+this.$(".popular-section").height()}]}).render(),this.$el.append(this._promoManagerView.el)},loadFrontpage:function(e,t){this.makeInstance(a,{slideSelector:".popular-section",el:this.$(".slide-show")[0]}).initRenderedData(),this.initRenderedData(e),delete u.ServerSideRendering},_createSourceCollections:function(){r.each(s.posts_by_source,function(e,t){var n=s.sources[t],r=this._getPostsCollection(n.type);this.collections[t]=new r(e,{subpageId:n?n.subpage_id:0,sourceName:t,dontUseComparator:!0})},this)},_getPostsCollection:function(e){return this._sourceTypesToCollections[e]},_removePostView:function(){},_getPostView:function(e){return this._sourceTypesToViews[e]},_initSectionViews:function(e){var t=r.groupBy(s.sections,function(e){return"."+e.format+"-section"});this._sectionImpressions(),r.each(s.sections,function(n){var o=s.sources[n.source].type,u=this._getPostView(o),a="."+n.format+"-section",f=r.indexOf(t[a],n),l=this._infiniteScrollByPage[e];this._sectionInstances[n.format]=this.makeInstance(u,{sectionConfig:n,infiniteScroll:l===n.format,collection:this.collections[n.source],el:i(a)[f],router:this.router}),this._sectionInstances[n.format].initRenderedData()},this)}})}),define("whitelabel/widgets/views/posts/subsite_posts",["require","exports","module","underscore","whitelabel/widgets/views/posts/base","whitelabel/widgets/views/posts/post","settings"],function(e,t,n){var r=e("underscore"),i=e("whitelabel/widgets/views/posts/base"),s=e("whitelabel/widgets/views/posts/post"),o=e("settings");return i.extend({offset:0,limit:20,options:{infiniteScroll:!0,postHandleDrop:!0},initialize:function(){i.prototype.initialize.apply(this,arguments),this.offset=this.collection.length,this.watchEvent(this.collection,"add","drawPost",this),this.watchEvent(this.collection,"reset","drawPosts",this)},drawPosts:function(){this.removeAllProduced(),this.$(".widgets").remove(),this.collection.each(this.drawPost,this),this.toggleSortable(this.sectionConfig.sortable)},drawPost:function(e){var t=this.makeInstance(s,{router:this.options.router,model:e});this.$el.append(t.el),t.render()}})}),define("whitelabel/widgets/views/drafts/post",["require","jquery","underscore","backbone","whitelabel/widgets/views/posts/post","settings"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("whitelabel/widgets/views/posts/post"),s=e("settings"),o={"click .post":"publishPost"};return i.extend({is_draft:!0,initialize:function(){i.prototype.initialize.call(this),this.watchEvent(this.model,"saved","forceRender",this)},forceRender:function(){this.render(!0)},addControls:function(){return this.$el.append('<div class="user-prefs">                             <a href="#" class="edit-icon edit">Edit</a>                             <a href="#" class="delete-icon delete">Delete</a></div>'),this}})}),define("whitelabel/widgets/views/drafts/posts",["backbone","jquery","underscore","settings","whitelabel/widgets/views/drafts/post","whitelabel/widgets/views/posts/base"],function(e,t,n,r,i,s){return s.extend({options:{infiniteScroll:!0},initialize:function(){s.prototype.initialize.call(this),this.watchEvent(this.collection,"destroy","onDelete",this),this.watchEvent(this.collection,"add","addPost",this),this.watchEvent(this.collection,"reset","addPosts",this),this.watchEvent(this.options.router,"route:draftSaved","addRealDraft",this)},addPosts:function(){this.removeAllProduced(),this.$(".widgets").remove(),this.collection.each(this.addPost,this)},addPost:function(e){var t=this.makeInstance(i,{router:this.options.router,model:e});this.$el[e.get("manual_add")?"prepend":"append"](t.render(!1).el)},addRealDraft:function(t){e.history.fragment==="drafts"&&(this.collection.add(n.extend(t.toJSON(),{news:!0,manual_add:!0})),this.offset=this.collection.length)},getMorePosts:function(e){e=n.isBoolean(e)&&e;if(this.noMorePosts&&!e)return this;e&&(this.offset=0);var t={offset:this.offset,limit:this.limit,site_id:r.site.id};return this.listenToScrollToggle(!1),this.collection.fetch({data:t,add:!!this.offset,success:n.bind(function(){this.offset=this.collection.length,this.noMorePosts=this.offset%this.limit?!0:!1,this.listenToScrollToggle(!0)},this)}),this},initRenderedData:function(){this.initPage()},render:function(){return this},onDelete:function(){this.offset--,this.collection.length||(this.offset=0,this.getMorePosts())},toggleSortable:function(e){var r=this.getProduced();if(!t.ui)return;n.each(r,function(t){t.toggleDraggable(e)})}})}),define("widgets/models/draft",["widgets/models/post_base","underscore"],function(e,t){return e.extend({defaults:{post_was_edited:!0,slideshow_type:1},entity:"draft",url:function(){var t=e.prototype.url.apply(this,arguments);return t+(this.get("remove_dupls")?"?remove_dupls=1":"")},urlRoot:function(){var e=t.isFunction(this.collection.url)?this.collection.url():this.collection.url;return e+this.get("site_id")},passesFilter:function(e){if(!e)return!0;var t=!0,n=this.get("tags"),r;e[0]==="!"&&(t=!1,e=e.substring(1)),e.slice(-1)==="*"&&(e=e.slice(0,e.length-1)),r=new RegExp("~d:"+e);for(var i=0;i<n.length;i++)if(r.test(n[i]))return t;return!t}})}),define("widgets/models/draft_real",["widgets/models/draft"],function(e){return e.extend({entity:"realDraft",comparator:function(e,t){return e.get("id")>t.get("id")?-1:1},urlRoot:function(){return"/core/feeds/site/real_drafts/"+this.get("site_id")}})}),define("whitelabel/widgets/collections/real_drafts",["backbone","underscore","widgets/models/draft_real"],function(e,t,n){return e.Collection.extend({url:"/core/feeds/site/real_drafts/",model:n,initialize:function(e){e=e||{},this.sourceName=e.sourceName||""},comparator:function(e,t){return e.get("order")<t.get("order")?-1:e.get("order")===t.get("order")?0:1},parse:function(e){return this._resetCollection=e.reset_collection,t.map(e.drafts||e,function(e){return t.extend(e,{news:!0})})}})}),define("hgn!whitelabel/widgets/templates/subsite_menu_item",["hogan_with_filters"],function(e){function n(){return t.render.apply(t,arguments)}var t=new e.Template(function(e,t,n){n=n||"";var r=n+"",i=this;return r+='<a href="/community/',r+=i.v(i.f("subpage",e,t,0)),r+="/",r+=i.v(i.f("url",e,t,0)),r+='"',i.s(i.f("class_name",e,t,1),e,t,0,55,78,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return n+=' class="',n+=i.v(i.f("class_name",e,t,0)),n+='"',n}),e.pop()):(r+=i.b,i.b=""),r+=">",i.s(i.f("icon",e,t,1),e,t,0,103,128,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return n+='<i class="',n+=i.v(i.f("icon",e,t,0)),n+='"></i> ',n}),e.pop()):(r+=i.b,i.b=""),r+=i.v(i.f("title",e,t,0)),r+="</a>",r+="\n",r},"",e);return n.template=t,n}),define("whitelabel/widgets/views/subsite_menu_item",["require","exports","module","jquery","backbone","underscore","settings","hgn!whitelabel/widgets/templates/subsite_menu_item"],function(e,t,n){var r=e("jquery"),i=e("backbone"),s=e("underscore"),o=e("settings"),u=e("hgn!whitelabel/widgets/templates/subsite_menu_item");return i.View.extend({tagName:"li",events:{click:"setActive"},initialize:function(){this.watchEvent(this.model,"change:active","changeActive",this),this.watchEvent(this.options.router,"route:loadSubPage route:loadFrontPage","changeActive",this)},changeActive:function(e,t){this.$("a").toggleClass("active",this.model.get("active"))},setActive:function(e){e&&e.preventDefault(),this.options.router.loadSubpage(this.model.set("active",!0))},render:function(){return this.$el.html(u(s.extend(this.model.toJSON(),{subpage:o.site.name}))),this}})}),define("whitelabel/widgets/views/subsite_menu",["require","exports","module","jquery","backbone","underscore","settings","whitelabel/widgets/views/subsite_menu_item","utils"],function(e,t,n){var r=e("jquery"),i=e("backbone"),s=e("underscore"),o=e("settings"),u=e("whitelabel/widgets/views/subsite_menu_item"),a=e("utils");return i.View.extend({events:{"click .go-drafts":"goDrafts","click .go-home":"goHome"},initialize:function(){this.collection=new i.Collection,this.collection.comparator=function(e){return e.get("order")},this.router=this.options.router,this.watchEvent(this.router,"route:loadFrontPage route:loadSubPage route:loadDrafts","setActive",this),this.watchEvent(this.collection,"change:active","switchActive",this),this.watchEvent(this.collection,"reset","addItems",this)},switchActive:function(e,t){if(!t)return;this.collection.each(function(t){t.set("active",e.id===t.id)},this)},setActive:function(e,t){this.switchActive({id:t},!0)},addItems:function(){this.collection.each(this.addItem,this)},addItem:function(e){var t=this.makeInstance(u,{model:e,router:this.router}).render();this.$el.append(t.el)},goDrafts:function(e){e.preventDefault(),this.router.goDrafts()},goHome:function(e){e.preventDefault(),this.router.goHome()},render:function(){var e=[{about_html:"",created_ts:"",id:0,isPublic:!0,isUnlisted:!1,order:-2,page_settings:{open_in_new_tab:!1},site_id:0,status:0,tags:[],title:"Dodo Page",type:0,url:""}];return o.user.can("edit_site",!0)&&e.push({about_html:"",created_ts:"",id:-1,isPublic:!1,isUnlisted:!1,class_name:"private",order:0,page_settings:{open_in_new_tab:!1},site_id:0,icon:"icon-lock",status:0,tags:[],title:"Saved Drafts",type:0,url:"drafts"}),this.collection.reset(e.concat(o.site.pages)),this.$el.toggle(this.collection.length>1),this}})}),define("whitelabel/managers/subsite",["require","exports","module","underscore","backbone","bootstrap","settings","utils","whitelabel/widgets/views/posts/subsite_posts","whitelabel/widgets/views/drafts/posts","whitelabel/widgets/collections/posts","whitelabel/widgets/collections/real_drafts","whitelabel/widgets/views/subsite_menu","whitelabel/managers/content_base"],function(e,t,n){var r=e("underscore"),i=e("backbone"),s=e("bootstrap"),o=e("settings"),u=e("utils"),a=e("whitelabel/widgets/views/posts/subsite_posts"),f=e("whitelabel/widgets/views/drafts/posts"),l=e("whitelabel/widgets/collections/posts"),c=e("whitelabel/widgets/collections/real_drafts"),h=e("whitelabel/widgets/views/subsite_menu"),p=e("whitelabel/managers/content_base");return p.extend({events:{"click .add-post-btn":"openEditMode"},section:"community_page",_sourceTypesToViews:{drafts:f,"default":a},_sourceTypesToCollections:{drafts:c,"default":l},_viewsByUrl:{},initialize:function(){p.prototype.initialize.call(this),this.collections={},this.watchEvent(this.router,"route:loadFrontPage route:loadSubPage","loadFrontpage",this)},_getPostView:function(e){return e=r.has(this._sourceTypesToViews,e)?e:"default",this._sourceTypesToViews[e]},_getPostsCollection:function(e){var t=r.has(this._sourceTypesToViews,e)?e:"default",n=this._sourceTypesToCollections[t];return this.collections[e]=this.collections[e]||new n},openEditMode:function(){this.router.trigger("route:addPost")},toggleIntro:function(e,t,n){var r=e===""||e===o.site.name,i=e==="feeds",s=!n.length;this.$(".info-panels").addClass("hidden");if(!o.user.can("edit_site",!0))return!1;r&&(this.$(".connect-accounts").removeClass("hidden"),this.$(".intro-panel").toggleClass("hidden",!s),this.$(".small-howto-use").toggleClass("hidden",!s),this.$(".big-howto-use").toggleClass("hidden",s)),i&&this.$(".feeds-description").removeClass("hidden")},getView:function(e){this.activeView&&this.activeView.remove();var t=this._getPostsCollection(e),n=this.makeInstance(this._getPostView(e),{sectionConfig:s.sources&&s.sources[this.section],infiniteScroll:!0,collection:t,router:this.router});return this.$("."+this.section+"-section").html(n.el),n},loadFrontpage:function(e,t){var n=this.getView(e),r=n.collection;this.activeView=n,r.on("reset",function(){this.toggleIntro(e,t,r)},this),this.activeFragment&&delete o.ServerSideRendering,o.ServerSideRendering&&o.user.is_autorized&&e===""&&(r.reset(s.posts_by_source[this.section]),this.toggleIntro(e,t,r),delete o.ServerSideRendering),o.ServerSideRendering&&(this.activeFragment=i.history.fragment),n.initPage()},render:function(){if(o.user.id===o.site.owner_id){var t=this;e(["widgets/views/signup/login_btn_group"],function(e){t.makeInstance(e,{next_url:window.location.href,display_buttons:["Twitter"]}).setElement(t.$(".signup-buttons")).render()}),setTimeout(function(){window.location.search==="?add-post=1"&&t.openEditMode()})}this._siteMenu=this.makeInstance(h,{el:this.$(".community-section .tabs")[0],router:this.router}).render()}})}),define("hgn!whitelabel/widgets/templates/about_site",["hogan_with_filters"],function(e){function n(){return t.render.apply(t,arguments)}var t=new e.Template(function(e,t,n){n=n||"";var r=n+"",i=this;return i.s(i.f("isEditable",e,t,1),e,t,0,15,113,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return n+='<div class="user-prefs"><a href="#" class="hover-menu edit start-edit" title="Edit">Edit</a></div>',n}),e.pop()):(r+=i.b,i.b=""),r+="\n"+n,i.s(i.f("is_user_bio",e,t,1),e,t,0,145,1e3,"{{ }}")?(r+=i.rs(e,t,function(e,t){var r="";return r+='<div class="user-bio ',i.s(i.f("is_bio",e,t,1),e,t,0,178,187,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return n+="empty-bio",n}),e.pop()):(r+=i.b,i.b=""),r+=" ",i.s(i.f("isEditable",e,t,1),e,t,0,214,244,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return i.s(i.f("is_bio",e,t,1),e,t,0,225,233,"{{ }}")?(n+=i.rs(e,t,function(e,t){var n="";return n+="fill-bio",n}),e.pop()):(n+=i.b,i.b=""),n}),e.pop()):(r+=i.b,i.b=""),r+='">',r+="\n"+n,r+='    <div class="about">',i.s(i.f("about_htmlize",e,t,1),e,t,0,303,327,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return n+=i.f("about_htmlize",e,t,0),n+="<br/>",n}),e.pop()):(r+=i.b,i.b=""),i.s(i.f("about_htmlize",e,t,1),e,t,1,0,0,"")||(i.s(i.f("isEditable",e,t,1),e,t,0,378,427,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return n+="Your biography is empty &mdash; click to edit it.",n}),e.pop()):(r+=i.b,i.b="")),r+="</div>",r+="\n"+n,r+='    <div class="publish-story">',r+="\n"+n,r+='        <textarea id="about-site" rows="3" cols="12">',i.s(i.f("about_text",e,t,1),e,t,0,567,581,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return n+=i.v(i.f("about_text",e,t,0)),n}),e.pop()):(r+=i.b,i.b=""),r+="</textarea>",r+="\n"+n,r+='        <a href="javascript: void(0)" class="btn btn-primary publish finish-edit btn-save">Save</a>',r+="\n"+n,r+='        <a href="javascript: void(0)" class="btn cancel btn-cancel">Cancel</a>',r+="\n"+n,r+="    </div>",r+="\n"+n,r+='    <a target="_blank" href="https://www.thedodo.com/community-guidelines-768964806.html" class="guidelines" title="Read The Dodo\'s Community Guidelines">Read The Dodo\'s Community Guidelines</a>',r+="\n"+n,r+="</div>",r+="\n",r}),e.pop()):(r+=i.b,i.b=""),r},"",e);return n.template=t,n}),define("widgets/models/site_subscribe",["require","backbone"],function(e){var t=e("backbone");return t.Model.extend({url:"/core/users/subscribe_site/",getSuccessMessage:function(e){return this.get(e?"enterprise_message":"message")}})}),define("widgets/templates/site_subscribe",["hogan"],function(e){return e.compile(' <button type="button" class="btn site-subscribe">{{button}}</button>                           <input type="email" class="site-subscribe-email" name="email" placeholder="{{placeholder}}" pattern="^[\\w-\\.]+)@((?:[\\w]+\\.)+)([a-zA-Z]{2,6}$" value="{{user_email}}">                ')}),define("widgets/views/frontpage/site_subscribe",["require","backbone","underscore","settings","bootstrap","widgets/models/site_subscribe","widgets/templates/site_subscribe","utils/whitelabel_settings","consts","utils"],function(e){var t=e("backbone"),n=e("underscore"),r=e("settings"),i=e("bootstrap"),s=e("widgets/models/site_subscribe"),o=e("widgets/templates/site_subscribe"),u=e("utils/whitelabel_settings"),a=e("consts"),f=e("utils");return t.View.extend({events:{"click .site-subscribe":"subscribe"},initialize:function(){var e=n.extend(u.getTemplateVars().site_subscribe||a.SITE_SUBSCRIBE,{site_id:i.alerts_site?i.alerts_site.id:r.site.id,user_id:r.user.id});this._SiteInstance=new t.Model(r.site),this.model=new s(e)},subscribe:function(){var e=this,t=this.emailField.val(),n="";return t?(this.notify({message:"Processing ..."}),this.model.save({email:t},{success:function(t){var n=e.model.getSuccessMessage(e._SiteInstance.get("paid_features").enterprise);e.notify({message:n,timeout:7e3}),e.trigger("email:subscribed")},error:function(t,n){var r=f.getXhrErrorMessage(n);e.notify({message:r,type:"error",timeout:7e3})},complete:function(t){e.$(".site-subscribe-email").val("")}}),this):(n="Please enter your email",this.notify({message:n,type:"error",timeout:2e3}),this)},render:function(){return this.$el.append(o.render(this.model.toJSON())),this.emailField=this.$(".site-subscribe-email"),this}})}),define("whitelabel/widgets/views/about_site",["jquery","backbone","underscore","widgets/views/informer","settings","utils","hgn!whitelabel/widgets/templates/about_site","widgets/views/frontpage/site_subscribe","utils/device"],function(e,t,n,r,i,s,o,u,a){return t.View.extend({events:{mouseenter:"toggleButtons",mouseleave:"toggleButtons","click .start-edit":"startEdit","click .finish-edit":"finishEdit","click .btn-cancel":"cancel","keyup #about-site":"aboutTextChanged","click #about-site":"aboutTextChanged","click .fill-bio":"startEdit"},initialize:function(){this.router=this.options.router,this.watchEvent(this.model,"change:about_html","render",this)},render:function(){var e=this.options.defaults,t=n.defaults(this.model.toJSON(),n.extend({about_html:""},e&&e.toJSON()));return this.$el.html(o(t,{about_text:function(){return this.about_html||""},about_htmlize:function(){return s.htmlize(this.about_html)},is_bio:function(){return n.isEmpty(this.about_html&&this.about_html.replace(/\s+/g,""))},is_user_bio:function(){return this.about_html||i.user.can("edit_site")||!1},isEditable:!0})),this},toggleButtons:function(e){if(!i.user.can("edit_site"))return;this.$(".user-prefs").toggle(e.type==="mouseenter")},startEdit:function(e){e&&e.preventDefault(),this.$(".user-prefs").hide(),this.$(".about").hide().addClass("editable"),this.$(".btn-save").addClass("disabled"),this.$(".publish-story").show(),this.$(".user-bio").removeClass("fill-bio"),this.$(".update-tw-bio").css("display","none")},aboutTextChanged:function(e){var t=this.$("#about-site").val();this.$(".btn-save").toggleClass("disabled",t===this.model.get("about_html"))},finishEdit:function(){var t=this,n=this.$("#about-site").val(),i=n.length?n:" ";if(n===this.model.get("about_html"))return!1;this.$(".btn-save").addClass("disabled").text("Saving..."),this.$(".btn-cancel").addClass("disabled"),this.model.save({about_html:i},{error:function(){(new r({message:JSON.parse(arguments[1].responseText).error,type:"error",headline:"Error!",controls:[{name:"OK",callback:e.noop}]})).render(),t.$(".btn-save").removeClass("disabled").text("Save"),t.$(".btn-cancel").removeClass("disabled")},success:function(){t.render(!0),t.$(".about").removeClass("editable"),t.$(".btn-save").removeClass("disabled").text("Save"),t.$(".btn-cancel").removeClass("disabled"),t.$(".user-prefs").css("display","block")}})},cancel:function(){this.render(!0),this.$(".user-prefs").css("display","block")}})}),define("widgets/models/about_site",["backbone"],function(e){return e.Model.extend({url:function(){return"/res/feeds/user/provider_info/"+this.get("id")+"?r="+Math.random()}})}),define("hgn!whitelabel/widgets/templates/community/site_title",["hogan_with_filters"],function(e){function n(){return t.render.apply(t,arguments)}var t=new e.Template(function(e,t,n){n=n||"";var r=n+"",i=this;return r+="<h1>",r+=i.v(i.f("title",e,t,0)),r+="</h1>",r+="\n"+n,r+='<div class="edit-mode">',r+="\n"+n,r+='<a href="#" class="btn cancel-btn"><i class="change-site-title-link"></i> Cancel</a>',r+="\n"+n,r+='<a href="#" class="btn savesitename"><i class="change-site-title-link"></i> Save</a>',r+="\n"+n,r+="</div>",r+="\n",r},"",e);return n.template=t,n}),define("whitelabel/widgets/views/community/site_title",["backbone","underscore","settings","hgn!whitelabel/widgets/templates/community/site_title"],function(e,t,n,r){return e.View.extend({events:{"click .savesitename":"saveSiteName","click .cancel-btn":"cancelEdit","click h1":"enableEditMode","keydown h1":"checkKey"},initialize:function(){t.bindAll(this,"disableEditMode","enableEditMode")},saveSiteName:function(){var e=this.$("h1").text();this.model.get("logo")||this.model.set("logo","https://www.thedodo.com/static/img/whitelabel/dodo/bird-blue.png"),this.model.save({title:e},{wait:!0,success:t.bind(this.render,this,!1)})},checkKey:function(e){return e.keyCode===13?(this.saveSiteName(),!1):(e.keyCode===27&&this.disableEditMode(),!0)},cancelEdit:function(){this.render()},enableEditMode:function(){if(!n.user.can("edit_site",!0))return;var e=this.$("h1"),t=window,r=t.document.createRange(),i=t.getSelection();this.$(".edit-mode").show();if(e.attr("contenteditable")==="true")return;this.siteTitle=this.$("h1").text(),e.attr("contenteditable",!0),r.setStart(e.get(0),1),r.collapse(!0),i.removeAllRanges(),i.addRange(r),e.focus()},disableEditMode:function(){this.$(".edit-mode").hide()},render:function(e){return this.$el.html(r(this.model.toJSON())),this.$("h1").focus(this.enableEditMode),this[e?"enableEditMode":"disableEditMode"](),this}})}),define("widgets/templates/upload_form",["hogan"],function(e){return e.compile('<fieldset>                            <label class="fake-input">                                <input class="input-file" {{#multi}}id="fileInputslidshow" name="slides[]" multiple min="1" max="25"{{/multi}}{{^multi}}id="fileInput"{{/multi}} name="file" type="file">                            </label>                            <a href="javascript: void(0)" class="btn" id="fakeFileUpload">{{#showIco}}<i class="{{icoText}}"></i> {{/showIco}}{{buttonText}}</a>{{#showHelpText}} <span class="help-text">No file choosen</span>{{/showHelpText}}                            {{#showPreview}}<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" width="30" height="30" class="file-preview" style="display: none">{{/showPreview}}                            <div class="progress progress-striped active" style="display: none;">                                <div class="bar" style="width:0%;"></div>                                <span class="status-text"></span>                            </div>                        </fieldset>')}),function(e){typeof define=="function"&&define.amd?define("libs/jquery/plugins/jquery.form",["jquery"],e):e(typeof jQuery!="undefined"?jQuery:window.Zepto)}(function(e){function r(t){var n=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(n))}function i(t){var n=t.target,r=e(n);if(!r.is("[type=submit],[type=image]")){var i=r.closest("[type=submit]");if(i.length===0)return;n=i[0]}var s=this;s.clk=n;if(n.type=="image")if(t.offsetX!==undefined)s.clk_x=t.offsetX,s.clk_y=t.offsetY;else if(typeof e.fn.offset=="function"){var o=r.offset();s.clk_x=t.pageX-o.left,s.clk_y=t.pageY-o.top}else s.clk_x=t.pageX-n.offsetLeft,s.clk_y=t.pageY-n.offsetTop;setTimeout(function(){s.clk=s.clk_x=s.clk_y=null},100)}function s(){if(!e.fn.ajaxSubmit.debug)return;var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}var t={};t.fileapi=e("<input type='file'/>").get(0).files!==undefined,t.formdata=window.FormData!==undefined;var n=!!e.fn.prop;e.fn.attr2=function(){if(!n)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||typeof e=="string"?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(r){function k(t){var n=e.param(t,r.traditional).split("&"),i=n.length,s=[],o,u;for(o=0;o<i;o++)n[o]=n[o].replace(/\+/g," "),u=n[o].split("="),s.push([decodeURIComponent(u[0]),decodeURIComponent(u[1])]);return s}function L(t){var n=new FormData;for(var s=0;s<t.length;s++)n.append(t[s].name,t[s].value);if(r.extraData){var o=k(r.extraData);for(s=0;s<o.length;s++)o[s]&&n.append(o[s][0],o[s][1])}r.data=null;var u=e.extend(!0,{},e.ajaxSettings,r,{contentType:!1,processData:!1,cache:!1,type:i||"POST"});r.uploadProgress&&(u.xhr=function(){var t=e.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",function(e){var t=0,n=e.loaded||e.position,i=e.total;e.lengthComputable&&(t=Math.ceil(n/i*100)),r.uploadProgress(e,n,i,t)},!1),t}),u.data=null;var a=u.beforeSend;return u.beforeSend=function(e,t){r.formData?t.data=r.formData:t.data=n,a&&a.call(this,e,t)},e.ajax(u)}function A(t){function T(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(n){s("cannot get iframe.contentWindow document: "+n)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(n){s("cannot get iframe.contentDocument: "+n),t=e.document}return t}function k(){function f(){try{var e=T(v).readyState;s("state = "+e),e&&e.toLowerCase()=="uninitialized"&&setTimeout(f,50)}catch(t){s("Server abort: ",t," (",t.name,")"),_(x),w&&clearTimeout(w),w=undefined}}var t=a.attr2("target"),n=a.attr2("action"),r="multipart/form-data",u=a.attr("enctype")||a.attr("encoding")||r;o.setAttribute("target",p),(!i||/post/i.test(i))&&o.setAttribute("method","POST"),n!=l.url&&o.setAttribute("action",l.url),!l.skipEncodingOverride&&(!i||/post/i.test(i))&&a.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),l.timeout&&(w=setTimeout(function(){b=!0,_(S)},l.timeout));var c=[];try{if(l.extraData)for(var h in l.extraData)l.extraData.hasOwnProperty(h)&&(e.isPlainObject(l.extraData[h])&&l.extraData[h].hasOwnProperty("name")&&l.extraData[h].hasOwnProperty("value")?c.push(e('<input type="hidden" name="'+l.extraData[h].name+'">').val(l.extraData[h].value).appendTo(o)[0]):c.push(e('<input type="hidden" name="'+h+'">').val(l.extraData[h]).appendTo(o)[0]));l.iframeTarget||d.appendTo("body"),v.attachEvent?v.attachEvent("onload",_):v.addEventListener("load",_,!1),setTimeout(f,15);try{o.submit()}catch(m){var g=document.createElement("form").submit;g.apply(o)}}finally{o.setAttribute("action",n),o.setAttribute("enctype",u),t?o.setAttribute("target",t):a.removeAttr("target"),e(c).remove()}}function _(t){if(m.aborted||M)return;A=T(v),A||(s("cannot access response document"),t=x);if(t===S&&m){m.abort("timeout"),E.reject(m,"timeout");return}if(t==x&&m){m.abort("server abort"),E.reject(m,"error","server abort");return}if(!A||A.location.href==l.iframeSrc)if(!b)return;v.detachEvent?v.detachEvent("onload",_):v.removeEventListener("load",_,!1);var n="success",r;try{if(b)throw"timeout";var i=l.dataType=="xml"||A.XMLDocument||e.isXMLDoc(A);s("isXml="+i);if(!i&&window.opera&&(A.body===null||!A.body.innerHTML)&&--O){s("requeing onLoad callback, DOM not available"),setTimeout(_,250);return}var o=A.body?A.body:A.documentElement;m.responseText=o?o.innerHTML:null,m.responseXML=A.XMLDocument?A.XMLDocument:A,i&&(l.dataType="xml"),m.getResponseHeader=function(e){var t={"content-type":l.dataType};return t[e.toLowerCase()]},o&&(m.status=Number(o.getAttribute("status"))||m.status,m.statusText=o.getAttribute("statusText")||m.statusText);var u=(l.dataType||"").toLowerCase(),a=/(json|script|text)/.test(u);if(a||l.textarea){var f=A.getElementsByTagName("textarea")[0];if(f)m.responseText=f.value,m.status=Number(f.getAttribute("status"))||m.status,m.statusText=f.getAttribute("statusText")||m.statusText;else if(a){var c=A.getElementsByTagName("pre")[0],p=A.getElementsByTagName("body")[0];c?m.responseText=c.textContent?c.textContent:c.innerText:p&&(m.responseText=p.textContent?p.textContent:p.innerText)}}else u=="xml"&&!m.responseXML&&m.responseText&&(m.responseXML=D(m.responseText));try{L=H(m,u,l)}catch(g){n="parsererror",m.error=r=g||n}}catch(g){s("error caught: ",g),n="error",m.error=r=g||n}m.aborted&&(s("upload aborted"),n=null),m.status&&(n=m.status>=200&&m.status<300||m.status===304?"success":"error"),n==="success"?(l.success&&l.success.call(l.context,L,"success",m),E.resolve(m.responseText,"success",m),h&&e.event.trigger("ajaxSuccess",[m,l])):n&&(r===undefined&&(r=m.statusText),l.error&&l.error.call(l.context,m,n,r),E.reject(m,"error",r),h&&e.event.trigger("ajaxError",[m,l,r])),h&&e.event.trigger("ajaxComplete",[m,l]),h&&!--e.active&&e.event.trigger("ajaxStop"),l.complete&&l.complete.call(l.context,m,n),M=!0,l.timeout&&clearTimeout(w),setTimeout(function(){l.iframeTarget?d.attr("src",l.iframeSrc):d.remove(),m.responseXML=null},100)}var o=a[0],u,f,l,h,p,d,v,m,g,y,b,w,E=e.Deferred();E.abort=function(e){m.abort(e)};if(t)for(f=0;f<c.length;f++)u=e(c[f]),n?u.prop("disabled",!1):u.removeAttr("disabled");l=e.extend(!0,{},e.ajaxSettings,r),l.context=l.context||l,p="jqFormIO"+(new Date).getTime(),l.iframeTarget?(d=e(l.iframeTarget),y=d.attr2("name"),y?p=y:d.attr2("name",p)):(d=e('<iframe name="'+p+'" src="'+l.iframeSrc+'" />'),d.css({position:"absolute",top:"-1000px",left:"-1000px"})),v=d[0],m={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var n=t==="timeout"?"timeout":"aborted";s("aborting upload... "+n),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(r){}d.attr("src",l.iframeSrc),m.error=n,l.error&&l.error.call(l.context,m,n,t),h&&e.event.trigger("ajaxError",[m,l,n]),l.complete&&l.complete.call(l.context,m,n)}},h=l.global,h&&0===e.active++&&e.event.trigger("ajaxStart"),h&&e.event.trigger("ajaxSend",[m,l]);if(l.beforeSend&&l.beforeSend.call(l.context,m,l)===!1)return l.global&&e.active--,E.reject(),E;if(m.aborted)return E.reject(),E;g=o.clk,g&&(y=g.name,y&&!g.disabled&&(l.extraData=l.extraData||{},l.extraData[y]=g.value,g.type=="image"&&(l.extraData[y+".x"]=o.clk_x,l.extraData[y+".y"]=o.clk_y)));var S=1,x=2,N=e("meta[name=csrf-token]").attr("content"),C=e("meta[name=csrf-param]").attr("content");C&&N&&(l.extraData=l.extraData||{},l.extraData[C]=N),l.forceSync?k():setTimeout(k,10);var L,A,O=50,M,D=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&t.documentElement.nodeName!="parsererror"?t:null},P=e.parseJSON||function(e){return window.eval("("+e+")")},H=function(t,n,r){var i=t.getResponseHeader("content-type")||"",s=n==="xml"||!n&&i.indexOf("xml")>=0,o=s?t.responseXML:t.responseText;return s&&o.documentElement.nodeName==="parsererror"&&e.error&&e.error("parsererror"),r&&r.dataFilter&&(o=r.dataFilter(o,n)),typeof o=="string"&&(n==="json"||!n&&i.indexOf("json")>=0?o=P(o):(n==="script"||!n&&i.indexOf("javascript")>=0)&&e.globalEval(o)),o};return E}if(!this.length)return s("ajaxSubmit: skipping submit process - no element selected"),this;var i,o,u,a=this;typeof r=="function"?r={success:r}:r===undefined&&(r={}),i=r.type||this.attr2("method"),o=r.url||this.attr2("action"),u=typeof o=="string"?e.trim(o):"",u=u||window.location.href||"",u&&(u=(u.match(/^([^#]+)/)||[])[1]),r=e.extend(!0,{url:u,success:e.ajaxSettings.success,type:i||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},r);var f={};this.trigger("form-pre-serialize",[this,r,f]);if(f.veto)return s("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(r.beforeSerialize&&r.beforeSerialize(this,r)===!1)return s("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var l=r.traditional;l===undefined&&(l=e.ajaxSettings.traditional);var c=[],h,p=this.formToArray(r.semantic,c);r.data&&(r.extraData=r.data,h=e.param(r.data,l));if(r.beforeSubmit&&r.beforeSubmit(p,this,r)===!1)return s("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[p,this,r,f]);if(f.veto)return s("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var d=e.param(p,l);h&&(d=d?d+"&"+h:h),r.type.toUpperCase()=="GET"?(r.url+=(r.url.indexOf("?")>=0?"&":"?")+d,r.data=null):r.data=d;var v=[];r.resetForm&&v.push(function(){a.resetForm()}),r.clearForm&&v.push(function(){a.clearForm(r.includeHidden)});if(!r.dataType&&r.target){var m=r.success||function(){};v.push(function(t){var n=r.replaceTarget?"replaceWith":"html";e(r.target)[n](t).each(m,arguments)})}else r.success&&v.push(r.success);r.success=function(e,t,n){var i=r.context||this;for(var s=0,o=v.length;s<o;s++)v[s].apply(i,[e,t,n||a,a])};if(r.error){var g=r.error;r.error=function(e,t,n){var i=r.context||this;g.apply(i,[e,t,n,a])}}if(r.complete){var y=r.complete;r.complete=function(e,t){var n=r.context||this;y.apply(n,[e,t,a])}}var b=e("input[type=file]:enabled",this).filter(function(){return e(this).val()!==""}),w=b.length>0,E="multipart/form-data",S=a.attr("enctype")==E||a.attr("encoding")==E,x=t.fileapi&&t.formdata;s("fileAPI :"+x);var T=(w||S)&&!x,N;r.iframe!==!1&&(r.iframe||T)?r.closeKeepAlive?e.get(r.closeKeepAlive,function(){N=A(p)}):N=A(p):(w||S)&&x?N=L(p):N=e.ajax(r),a.removeData("jqxhr").data("jqxhr",N);for(var C=0;C<c.length;C++)c[C]=null;return this.trigger("form-submit-notify",[this,r]),this},e.fn.ajaxForm=function(t){t=t||{},t.delegation=t.delegation&&e.isFunction(e.fn.on);if(!t.delegation&&this.length===0){var n={s:this.selector,c:this.context};return!e.isReady&&n.s?(s("DOM not ready, queuing ajaxForm"),e(function(){e(n.s,n.c).ajaxForm(t)}),this):(s("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return t.delegation?(e(document).off("submit.form-plugin",this.selector,r).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,t,r).on("click.form-plugin",this.selector,t,i),this):this.ajaxFormUnbind().bind("submit.form-plugin",t,r).bind("click.form-plugin",t,i)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(n,r){var i=[];if(this.length===0)return i;var s=this[0],o=this.attr("id"),u=n?s.getElementsByTagName("*"):s.elements,a;u&&!/MSIE [678]/.test(navigator.userAgent)&&(u=e(u).get()),o&&(a=e(':input[form="'+o+'"]').get(),a.length&&(u=(u||[]).concat(a)));if(!u||!u.length)return i;var f,l,c,h,p,d,v;for(f=0,d=u.length;f<d;f++){p=u[f],c=p.name;if(!c||p.disabled)continue;if(n&&s.clk&&p.type=="image"){s.clk==p&&(i.push({name:c,value:e(p).val(),type:p.type}),i.push({name:c+".x",value:s.clk_x},{name:c+".y",value:s.clk_y}));continue}h=e.fieldValue(p,!0);if(h&&h.constructor==Array){r&&r.push(p);for(l=0,v=h.length;l<v;l++)i.push({name:c,value:h[l]})}else if(t.fileapi&&p.type=="file"){r&&r.push(p);var m=p.files;if(m.length)for(l=0;l<m.length;l++)i.push({name:c,value:m[l],type:p.type});else i.push({name:c,value:"",type:p.type})}else h!==null&&typeof h!="undefined"&&(r&&r.push(p),i.push({name:c,value:h,type:p.type,required:p.required}))}if(!n&&s.clk){var g=e(s.clk),y=g[0];c=y.name,c&&!y.disabled&&y.type=="image"&&(i.push({name:c,value:g.val()}),i.push({name:c+".x",value:s.clk_x},{name:c+".y",value:s.clk_y}))}return i},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each(function(){var r=this.name;if(!r)return;var i=e.fieldValue(this,t);if(i&&i.constructor==Array)for(var s=0,o=i.length;s<o;s++)n.push({name:r,value:i[s]});else i!==null&&typeof i!="undefined"&&n.push({name:this.name,value:i})}),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],r=0,i=this.length;r<i;r++){var s=this[r],o=e.fieldValue(s,t);if(o===null||typeof o=="undefined"||o.constructor==Array&&!o.length)continue;o.constructor==Array?e.merge(n,o):n.push(o)}return n},e.fieldValue=function(t,n){var r=t.name,i=t.type,s=t.tagName.toLowerCase();n===undefined&&(n=!0);if(n&&(!r||t.disabled||i=="reset"||i=="button"||(i=="checkbox"||i=="radio")&&!t.checked||(i=="submit"||i=="image")&&t.form&&t.form.clk!=t||s=="select"&&t.selectedIndex==-1))return null;if(s=="select"){var o=t.selectedIndex;if(o<0)return null;var u=[],a=t.options,f=i=="select-one",l=f?o+1:a.length;for(var c=f?o:0;c<l;c++){var h=a[c];if(h.selected){var p=h.value;p||(p=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value);if(f)return p;u.push(p)}}return u}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var r=this.type,i=this.tagName.toLowerCase();n.test(r)||i=="textarea"?this.value="":r=="checkbox"||r=="radio"?this.checked=!1:i=="select"?this.selectedIndex=-1:r=="file"?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(t===!0&&/hidden/.test(r)||typeof t=="string"&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return e===undefined&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return t===undefined&&(t=!0),this.each(function(){var n=this.type;if(n=="checkbox"||n=="radio")this.checked=t;else if(this.tagName.toLowerCase()=="option"){var r=e(this).parent("select");t&&r[0]&&r[0].type=="select-one"&&r.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1}),define("widgets/views/upload_image_form",["backbone","underscore","jquery","utils","widgets/views/informer","widgets/templates/upload_form","libs/jquery/plugins/jquery.form"],function(e,t,n,r,i,s){return e.View.extend({tagName:"form",defaults:{url:"/core/feeds/images",isMultiple:!1,onComplete:n.noop,onError:n.noop,onProgress:n.noop,onSuccess:n.noop,buttonText:"Upload Image",helpText:"Image selected",helpTextPlural:"Images selected",showHelpText:!0,placeholderText:"No file choosen",showPreview:!1,showIco:!1,icoText:"icons-dodo upload-from-pc",form:null,ignoreEmbeddedErrorHandler:!1,data:{},method:"POST",fileSizeLimit:0},events:{"change input:file":"handleForm","mousemove .btn":"_trackMouse","hover label":"_buttonHover","mousedown label":"_buttonClick","mouseup label":"_buttonClick"},_beforeSend:function(){this.$(".progress").hide(),this.$(".progress").show(0),!this._supportsUploadProgress&&this.$(".bar").animate({width:"100%"},6e4),this.options.onProgress(),t.isFunction(this.options.beforeStart)&&this.options.beforeStart.call(this.options.context)},_resetUpload:function(){this.$(".help-text").text(this.options.placeholderText),this.$(".bar").width("0%"),this.$(".progress").hide()},_multiProgress:function(e){var t=0,n=e.loaded||e.position,r=e.total;e.lengthComputable&&(t=Math.ceil(n/r*100)),this._uploadProgress(e,n,r,t)},_uploadProgress:function(e,t,n,r){this.$(".bar").width(r+"%")},_uploadPreview:function(e){if(window.FileReader&&e.files&&e.files[0]){var t=this,n=new FileReader;n.onload=function(e){var n=e.target||e.srcElement;t.$(".file-preview").attr("src",n.result).show()},n.readAsDataURL(e.files[0])}},_getXhrResponseObj:function(e){return t.isObject(e)?n.parseJSON(e.responseText):n.parseJSON(e)},_success:function(e,t,n){var r=this._getXhrResponseObj(n);this.options.onSuccess.call(this.options.context||this,e)},_complete:function(e,t,n){this.$(".bar").width("0%"),this.$(".progress").hide(),this.options.onComplete.call(this.options.context||this,e)},_error:function(e){if(this.options.ignoreEmbeddedErrorHandler)return this.options.onError.call(this.options.context||this,e),!1;(new i({message:r.getXhrErrorMessage(e,"An error has occured on uploading"),type:"error",headline:"Error!",controls:[{name:"OK",callback:n.noop}]})).render(),this._resetUpload(),this.options.onError.call(this.options.context||this,e)},_supportsMultipleUploads:function(){return"multiple"in document.createElement("input")}(),_supportsUploadProgress:function(){var e=new XMLHttpRequest;return!!(e&&"upload"in e&&"onprogress"in e.upload)}(),initialize:function(){t.bindAll(this,"_beforeSend","_uploadProgress","_multiProgress","_complete","_success","_error","_resetUpload"),this.options=t.defaults(this.options,this.defaults),this.options.url=r.browser().msie?this.options.url+".txt":this.options.url,this.options.form&&this.setElement(this.options.form),this.render()},render:function(){if(this.options.form)return;this.$el.html(s.render({multi:this.options.isMultiple&&this._supportsMultipleUploads,buttonText:this.options.buttonText,showIco:this.options.showIco,icoText:this.options.icoText,showHelpText:this.options.showHelpText,showPreview:this.options.showPreview})),this.$el.attr({method:this.options.method,enctype:"multipart/form-data",encoding:"multipart/form-data"}).css({position:"relative",overflow:"hidden"})},_buttonHover:function(e){var t=e.type==="mouseenter";this.$(".btn").toggleClass("ui-state-hover",t)},_buttonClick:function(e){var t=e.type==="mousedown";this.$(".btn").toggleClass("ui-state-clicked",t)},_trackMouse:function(e){var t=this.$el.offset(),n=e.pageX-t.left-10,r=e.pageY-t.top-10;this.$(".fake-input").css({left:n,top:r})},_checkFileSize:function(e){if(this.options.fileSizeLimit>0){e=e.get(0);var t=e.files&&e.files[0]&&e.files[0].size;return t?this.options.fileSizeLimit<e.files[0].size?!1:!0:!0}return!0},handleForm:function(e){this.options.isMultiple&&this._supportsMultipleUploads?(this.files=this.$("input:file")[0].files,this.$(".help-text").text(this.files.length===1?this.options.helpText:this.files.length+" "+this.options.helpTextPlural),this._multiForm()):this._checkFileSize(n(e.currentTarget))?(this.$(".help-text").text(this.options.helpText),this._uploadPreview(e.currentTarget),this._singleForm()):(new i({message:"Uploaded file is bigger than "+Math.round(this.options.fileSizeLimit/1024/1024,2)+"MB",type:"error",headline:"Error!",controls:[{name:"OK",callback:n.noop}]})).render()},_multiForm:function(){this.index=0,this._beforeSend(),this._multiPartForm()},_multiPartForm:function(){var e=this,t=new FormData,n=new XMLHttpRequest;return t.append("file",this.files[this.index]),n.upload.onprogress=this._multiProgress,n.open(this.options.method,this.options.url),this.options.method.toLowerCase()==="post"&&n.setRequestHeader("X-CSRFToken",this._getCookie("csrftoken")),n.send(t),n.onreadystatechange=function(t){this.readyState===4&&(e.files[++e.index]&&e._multiPartForm(),this.status===200?e._success(t.target):e._error(t.target),e._complete(t.target))}},_singleForm:function(){this.$el.ajaxSubmit({url:this.options.url,type:this.options.method,dataType:this.options.dataType||"json",beforeSend:this._beforeSend,uploadProgress:this._uploadProgress,error:this._error,success:this._success,complete:this._complete,resetForm:!0,data:this.options.data})},_getCookie:function(e){var t=null;if(document.cookie&&document.cookie!==""){var r=document.cookie.split(";");for(var i=0;i<r.length;i++){var s=n.trim(r[i]);if(s.substring(0,e.length+1)===e+"="){t=decodeURIComponent(s.substring(e.length+1));break}}}return t}})}),define("whitelabel/widgets/models/avatar",["require","backbone"],function(e){var t=e("backbone");return t.Model.extend({url:"/core/feeds/avatar/"})}),define("hgn!whitelabel/widgets/templates/community/site_logo",["hogan_with_filters"],function(e){function n(){return t.render.apply(t,arguments)}var t=new e.Template(function(e,t,n){n=n||"";var r=n+"",i=this;return r+='<div class="community-site-logo" style="background-image: url(\'',i.s(i.f("display_logo",e,t,1),e,t,0,80,96,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return n+=i.v(i.f("display_logo",e,t,0)),n}),e.pop()):(r+=i.b,i.b=""),i.s(i.f("display_logo",e,t,1),e,t,1,0,0,"")||(r+=i.v(i.f("logo",e,t,0))),i.s(i.f("logo",e,t,1),e,t,1,0,0,"")||(r+="/static/img/logos/def-site-logo.png"),r+="');\">",r+="\n"+n,r+='    <a href="#" class="hover-menu edit start-edit" title="Edit">Edit</a>',r+="\n"+n,r+='    <div class="edit-mode">',r+="\n"+n,r+='        <div class="edit-mode-inner">',r+="\n"+n,r+='            <div class="community-site-logo logo-preview" style="background-image: url(\'',i.s(i.f("display_logo",e,t,1),e,t,0,458,474,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return n+=i.v(i.f("display_logo",e,t,0)),n}),e.pop()):(r+=i.b,i.b=""),i.s(i.f("display_logo",e,t,1),e,t,1,0,0,"")||(r+=i.v(i.f("logo",e,t,0))),i.s(i.f("logo",e,t,1),e,t,1,0,0,"")||(r+="/static/img/logos/def-site-logo.png"),r+="');\"></div>",r+="\n"+n,r+='            <div class="site-avatar">',r+="\n"+n,r+="                <label>Avatar image</label>",r+="\n"+n,r+='                <form class="avatar-form" enctype="multipart/form-data" encoding="multipart/form-data" method="GET">',r+="\n"+n,r+='                    <div style="position:relative;">',r+="\n"+n,r+='                        <label class="fake-input"><input id="fileInput"  class="input-file" type="file" name="logo" /></label><a class="ch-cover-upload btn" href="javascript: void(0)"><span>Upload an image</span></a>',r+="\n"+n,r+='                        <div style="display: none;" class="progress progress-striped active">',r+="\n"+n,r+='                            <div style="width: 0%;" class="bar"></div>',r+="\n"+n,r+='                            <span class="status-text"></span>',r+="\n"+n,r+="                        </div>",r+="\n"+n,r+="                    </div>",r+="\n"+n,r+="                </form>",r+="\n"+n,r+='                <span class="or">or</span>',r+="\n"+n,r+='                <div class="input-form">',r+="\n"+n,r+='                    <input class="image-by-url" type="text" placeholder="Paste image URL... "/><a href="#" class="btn add-image-by-src"><i class="icons-dodo upload-arrow"></i></a>',r+="\n"+n,r+="                </div>",r+="\n"+n,r+="            </div>",r+="\n"+n,r+="        </div>",r+="\n"+n,r+='        <div class="clearfix buttons">',r+="\n"+n,r+='            <a href="#" class="btn cancel cancel-btn">Cancel</a>',r+="\n"+n,r+='            <a href="#" class="btn save-site-logo-url">Save</a>',r+="\n"+n,r+="        </div>",r+="\n"+n,r+="    </div>",r+="\n"+n,r+="</div>",r+="\n",r},"",e);return n.template=t,n}),define("whitelabel/widgets/views/community/site_logo",["require","exports","module","underscore","backbone","jquery","bootstrap","settings","widgets/views/informer","utils","widgets/views/upload_image_form","whitelabel/widgets/models/avatar","hgn!whitelabel/widgets/templates/community/site_logo"],function(e,t,n){var r=e("underscore"),i=e("backbone"),s=e("jquery"),o=e("bootstrap"),u=e("settings"),a=e("widgets/views/informer"),f=e("utils"),l=e("widgets/views/upload_image_form"),c=e("whitelabel/widgets/models/avatar"),h=e("hgn!whitelabel/widgets/templates/community/site_logo");return i.View.extend({events:{"click .save-site-logo-url":"saveSiteLogo","click .cancel-btn":"cancelEdit",mouseenter:"toggleEditIcon",mouseleave:"toggleEditIcon","click .edit":"toggleEditMode","click .add-image-by-src":"showFromURL"},initialize:function(){this.avatarModel=new c,this.watchEvent(this.avatarModel,"change:logo","updateAvatar",this)},updateAvatar:function(){this.$(".logo-preview").css("background-image","url("+this.avatarModel.get("logo")+")")},_renderUploadForm:function(){this.makeInstance(l,{context:this,form:this.$(".avatar-form"),url:this.avatarModel.url,onComplete:this.uploadComplete,ignoreEmbeddedErrorHandler:!0,fileSizeLimit:1048576})},uploadComplete:function(e){var t=s.parseJSON(e.responseText);this.avatarModel.set(t)},showFromURL:function(e){e.preventDefault();var t=s(e.currentTarget),n=this.$(".image-by-url"),r;if(n.hasClass("hide"))return n.removeClass("hide"),!1;r=n.val();if(!f.is_valid_url(r)){(new a({type:"error",headline:"Error",message:"Invalid URL",controls:[{name:"OK",callback:s.noop}]})).render();return}this.avatarModel.save({logo:r},{wait:!0})},toggleEditIcon:function(e){u.user.can("edit_site",!0)&&this.$(".edit").toggle(e.type==="mouseenter")},toggleEditMode:function(e,t){if(u.user.can("edit_site",!0))return this.$(".edit-mode")[e?"slideDown":"slideUp"](t)},saveSiteLogo:function(e){e&&e.preventDefault(),this.model.save({logo:this.avatarModel.get("image_id")},{success:r.bind(function(){this.toggleEditMode(!1,r.bind(this.render,this))},this)})},cancelEdit:function(e){e&&e.preventDefault(),this.toggleEditMode(!1,r.bind(this.render,this))},render:function(){var e=this;return this.avatarModel.clear(),this.$el.html(h(this.model.toJSON())),this._renderUploadForm(),this.toggleEditMode(!1),this}})}),define("hgn!whitelabel/widgets/templates/community/site_feeds",["hogan_with_filters"],function(e){function n(){return t.render.apply(t,arguments)}var t=new e.Template(function(e,t,n){n=n||"";var r=n+"",i=this;return i.s(i.f("fb_feed",e,t,1),e,t,0,12,150,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return n+='    <li><a href="http://facebook.com/',n+=i.v(i.f("fb_feed",e,t,0)),n+='/" target="_blank" title="Like us on Facebook"><i class="icons twitter_29"></i></a></li>',n+="\n",n}),e.pop()):(r+=i.b,i.b=""),i.s(i.f("tw_feed",e,t,1),e,t,0,175,360,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return n+='<li><a href="https://twitter.com/intent/user?user_id=',n+=i.v(i.f("tw_feed_id",e,t,0)),n+='" class="tw-intent" title="Follow @',n+=i.v(i.f("tw_feed",e,t,0)),n+=' on Twitter" target="_blank"><i class="icons twitter_29"></i></a></li>',n+="\n",n}),e.pop()):(r+=i.b,i.b=""),i.s(i.f("insta_feed",e,t,1),e,t,0,388,499,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return n+='<li><a href="http://instagram.com/',n+=i.v(i.f("insta_feed",e,t,0)),n+='" target="_blank"><i class="icons instagram_29"></i></a></li>',n+="\n",n}),e.pop()):(r+=i.b,i.b=""),i.s(i.f("googleplus_feed",e,t,1),e,t,0,535,674,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return n+='    <!--<li><a href="https://plus.google.com/',n+=i.v(i.f("googleplus_feed_id",e,t,0)),n+='" target="_blank"><span class="icons googleplus32"></span></a></li>-->',n+="\n",n}),e.pop()):(r+=i.b,i.b=""),i.s(i.f("flickr_feed",e,t,1),e,t,0,711,847,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return n+='    <!--<li><a href="http://www.flickr.com/photos/',n+=i.v(i.f("flickr_feed_id",e,t,0)),n+='" target="_blank"><span class="icons flickr32"></span></a></li>-->',n+="\n",n}),e.pop()):(r+=i.b,i.b=""),i.s(i.f("can_edit",e,t,1),e,t,0,877,946,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return n+='    <li><a href="#add-more"><i class="icons add-more"></i></a></li>',n+="\n",n}),e.pop()):(r+=i.b,i.b=""),r},"",e);return n.template=t,n}),define("whitelabel/widgets/views/community/site_feeds",["backbone","underscore","bootstrap","settings","hgn!whitelabel/widgets/templates/community/site_feeds"],function(e,t,n,r,i){return e.View.extend({initialize:function(){this.model=new e.Model(t.extend({can_edit:r.user.can("edit_site",!0)},n.providers_info))},render:function(e){return this.$el.html(i(this.model.toJSON())),this}})}),define("whitelabel/widgets/views/community_header",["require","exports","module","backbone","bootstrap","settings","whitelabel/widgets/views/about_site","widgets/models/about_site","whitelabel/widgets/views/community/site_title","whitelabel/widgets/views/community/site_logo","whitelabel/widgets/views/community/site_feeds"],function(e,t,n){var r=e("backbone"),i=e("bootstrap"),s=e("settings"),o=e("whitelabel/widgets/views/about_site"),u=e("widgets/models/about_site"),a=e("whitelabel/widgets/views/community/site_title"),f=e("whitelabel/widgets/views/community/site_logo"),l=e("whitelabel/widgets/views/community/site_feeds");return r.View.extend({initialize:function(){this.aboutModel=new u(i.providers_info),this.siteModel=new(r.Model.extend({urlRoot:"/core/feeds/site/"}))(s.site)},render:function(){return this.makeInstance(o,{router:this.options.router,el:this.$(".community-site-description")[0],model:this.aboutModel}).render(),this.makeInstance(a,{router:this.options.router,el:this.$(".community-site-name")[0],model:this.siteModel}).render(),this.makeInstance(f,{router:this.options.router,el:this.$(".community-site-logo-holder")[0],model:this.siteModel}).render(),this.makeInstance(l,{router:this.options.router,el:this.$(".follow-btns")[0]}).render(),this}})}),define("widgets/routers/base_frontpage",["jquery","underscore","backbone","settings","utils","utils/legacy_browser"],function(e,t,n,r,i,s){return n.Router.extend({defaults:{cssAnimationDelay:1200},initialize:function(){this.route(/^\??[^#]*#?$/,"openFrontPage"),this.route(/^([\w\-]+)\/\??[^#]*#?$/,"loadPage"),this.facebookHashClean()},checkTopBlocks:function(){var e=location.href.match(/.*?\?.*?shoutout_to=([^&]+).*$/);e&&this.triggerShoutoutSignupEvent(e[1]),e=location.href.match(/(\d+)\.html\?(approve|approved)$/),e&&this.triggerPermissionEvent(e[2],e[1])},triggerPermissionEvent:function(e,t){this.trigger.call(this,"route:open"+i.capitalize(e)+"Block",t),e==="approved"&&this.openApprovedBlock&&this.openApprovedBlock(t)},toggleIframes:function(t){e("#post-list .widget iframe").toggleClass("invisible",t)},facebookHashClean:function(){window.location.hash==="#_=_"&&(n.history._hasPushState||!!history.pushState)&&history.replaceState({},"title",window.location.pathname+window.location.search),n.history.fragment==="_=_"&&this.cleanPath()},triggerShoutoutSignupEvent:function(e){this.navigate("/",{silent:!0,trigger:!1}),this.trigger.call(this,"route:openShoutoutSignupBlock",e)},cleanPath:function(){this.navigate("",{trigger:!1,replace:!0})},_addPost:function(){var e=/\?add-post/.test(location.search),n=r.user.can("publish_post");if(e)return s.isLegacyUserAgent()?(s.notifyLegacyBrowser(),!1):(this.navigate("/"+window.location.pathname,{trigger:!1,replace:!0}),n&&t.delay(t.bind(function(){return this.trigger.call(this,"route:addPost")},this),this.defaults.cssAnimationDelay));return},goHome:function(){this._silentChangedPage&&(this._silentChangedPage=!1,this.trigger.call(this,"route:loadFrontPage","",0)),this.navigate("",!0)},loadPage:function(e){var n=t.find(r.site.pages,function(t){return t.url.toLowerCase()===decodeURIComponent(e).toLowerCase()})||{};r.site.activePage=n,this.trigger.call(this,"route:loadSubPage",n.url||"",n.id||0)},getSubpageURL:function(e){var t=e instanceof n.Model?e:new n.Model(e),s=location.protocol+"//"+location.host,o=r.is("custom_domain",!0),u=t.get("page_settings")||{},a=o?s:r.domain,f=/https?/i;return(f.test(a)?"":"http://")+a+i.getRootPath()+t.get("url")+location.search},_setActiveEntity:function(e){e||(e={}),t.each(e,function(e,n){r.site["active"+i.capitalize(n)]=t.find(r.site.pages,function(e){return function(t){t.url.toLowerCase()===decodeURIComponent(e).toLowerCase()}}(n))||{id:0,url:"",isPublic:!0}},this)}})}),define("libs/backbone/plugins/history_tracking",["backbone"],function(e){return function(){var t=function(t,n){var r=/[0-9].html/.test(t)&&/[0-9].html/.test(e.history.fragment);n||(n={}),n.replace||(this._historyTrackList[t]=r?this._historyTrackList[e.history.fragment]:e.history.fragment),e.history.navigate(t,n)},n=function(){return this._historyTrackList[e.history.fragment]||""};return function(){this._historyTrackList={},this.navigate=t,this.prevFragment=n}}()}),define("whitelabel/widgets/routers/frontpage",["backbone","underscore","widgets/routers/base_frontpage","libs/backbone/plugins/history_tracking","settings","utils"],function(e,t,n,r,i,s){var o=n.extend({cleanPath:function(){this.navigate("/"+window.location.pathname,{trigger:!1,replace:!0})},initialize:function(){n.prototype.initialize.apply(this,arguments),this.route(/^\/?([-\w]+)\/?/,"openFrontSubpage"),this.route(/^.*\?add-post$/,"addPost"),this.route(/^\?add-site$/,"addSite"),this.route(/^\/?community\/([-\w]+)\/?$/,"openFrontPage"),this.route(/^\/?tag\/([-\w]+)\/?\??[^#]*#?$/,"loadTag"),this.route(/([-\w]+)\.html?.*$/,"loadPostPage")},addSite:function(){this.cleanPath()},addPost:function(){this.cleanPath(),this.trigger("route:addPost")},goToEditMode:function(e){this.toggleIframes(!0),this.trigger.call(this,"route:editPost",e)},goToEditModeSection:function(e,t){this.toggleIframes(!0),this.trigger.call(this,"route:editPost",e,t)},closeEditMode:function(){this.toggleIframes(!1)},openFrontPage:function(e,t){this._setActiveEntity({tag:"",page:""}),this.trigger.call(this,"route:loadFrontPage",e||"",t||0)},loadTag:function(e){this._setActiveEntity({tag:e,page:""}),this.trigger("route:loadTagPage",e)},openFrontSubpage:function(e){var n;e==="drafts"?n={url:"drafts",id:-1}:n=t.find(i.site.pages,function(t){return t.url.toLowerCase()===decodeURIComponent(e).toLowerCase()}),i.site.activePage=n||{},i.is_community_site&&this.trigger.call(this,"route:loadSubPage",i.site.activePage.url||"",i.site.activePage.id||0)},loadSubpage:function(e){var t=encodeURIComponent(e.get("url"));this._setActiveEntity({page:e.get("url")}),this.navigate(t,!0)}});return r.call(o.prototype),new o}),define("hgn!whitelabel/widgets/templates/edit_mode/edit_base",["hogan_with_filters"],function(e){function n(){return t.render.apply(t,arguments)}var t=new e.Template(function(e,t,n){n=n||"";var r=n+"",i=this;return r+='<div class="edit-mode-header">',r+="\n"+n,r+='    <div class="publish-story">',r+="\n"+n,r+='        <button class="btn cancel">Cancel</button>',r+="\n"+n,i.s(i.f("showSendToDraft",e,t,1),e,t,0,142,213,"{{ }}")?(r+=i.rs(e,t,function(e,t){var n="";return n+='        <button class="btn save-draft">',n+=i.v(i.f("saveDraft",e,t,0)),n+="</button>",n+="\n",n}),e.pop()):(r+=i.b,i.b=""),r+='        <button class="btn btn-primary publish">',r+=i.v(i.f("sendButton",e,t,0)),r+="</button>",r+="\n"+n,r+="    </div>",r+="\n"+n,r+='    <a title="Read The Dodo\'s Community Guidelines" class="guidelines" href="https://www.thedodo.com/community-guidelines-768964806.html" target="_blank">Read The Dodo\'s Community Guidelines</a>',r+="\n"+n,r+="</div>",r+="\n"+n,r+='<div class="edit-mode-content">',r+="\n"+n,r+='    <div id="change-story" class="change-story">',r+="\n"+n,r+="    <!--here we insert a new or an edited post template -->",r+="\n"+n,r+="    </div>",r+="\n"+n,r+="</div>",r+="\n",r},"",e);return n.template=t,n}),define("whitelabel/widgets/views/edit_mode/base",["require","jquery","underscore","backbone","utils/navigate","utils","utils/device","hgn!whitelabel/widgets/templates/edit_mode/edit_base","settings","widgets/views/informer"],function(e){function l(){var e=[].slice.call(arguments,0),t=e.shift();this._wrpRemove(e),s.removeBeforeunload(),delete this._editableModel,this.removeAllProduced(),this.$el.hide()}function c(){l.apply(this,arguments),this.router.trigger("route:closePost")}function h(){var e=[].slice.call(arguments,0),t=e.shift();this._validateEditData(e)?(this.$el.show(),e[0]instanceof r.Model&&(this.model=e[0]),this.model.fetch({wait:!0,complete:n.bind(function(){t.apply(this,e)},this)})):this._refuseExecute(e)}function p(){var e=[].slice.call(arguments,0),t=e.shift();this._beforeSave.apply(this,e),t.apply(this,e)}var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("utils/navigate"),s=e("utils"),o=e("utils/device"),u=e("hgn!whitelabel/widgets/templates/edit_mode/edit_base"),a=e("settings"),f=e("widgets/views/informer");return r.View.extend({events:{"click .cancel":"close","click .publish":"savePost","click .save-draft":"saveDraft","click .open-preview":"openFullpagePreview"},initialize:function(){return this._baseSubMenuItems=this._getSubMenuItems(),this.remove=n.wrap(this._wrpRemove,c),this.removeSilently=n.wrap(this._wrpRemove,l),this.render=n.wrap(this.render,h),this.savePost=n.wrap(this.savePost,p),this.saveDraft=n.wrap(this.saveDraft,p),this.lazyLoadOnEvent(this,"click .open-preview",{previewModel:"whitelabel/widgets/models/preview"},this.openFullpagePreview),this._menuItem=n.extend({},this._menuItem,this._baseSubMenuItems),this._initRouterEvents(),this},render:function(e){return e instanceof r.Model&&(this.model=e),this._editableModel=this._createEditableModel(),this.individualVars=n.extend({},this.individualVars,this.options.individualVars||{}),this.editableVars=this._getEditAbleOptions(),this.watchEvent(this._editableModel,"change","publishAvailable",this),this.watchEvent(this._editableModel,"change","autoSave",this),this.$el.html(u(this.individualVars,this._getExtraFilters())),this._renderNotification(),this.publishAvailable(),this.setDefault(),this},activateSubView:function(t){this._EditModeViewInst instanceof r.View&&this._EditModeViewInst.remove(),e(["whitelabel/widgets/views/edit_mode/"+t+"_section"],n.bind(function(e){var t=n.extend(this._getEditAbleOptions(this._editableModel),{isRichEditor:a.user.can("edit_post",!0,a.parent_site)});this._EditModeViewInst=this.makeInstance(e,t),this.$(".change-story").html(this._EditModeViewInst.el),this._EditModeViewInst.render()},this)),this.$("#change-story").attr("class","change-story "+t+"-item")},deactivateMenuItem:function(){this.router.trigger("deactivate:item",this._menuItem.id)},setDefault:function(){var e=n.findWhere(this._menuItem.submenu,{"default":!0});this.activateSubView(e.id)},setActive:function(e){var t=e?n.findWhere(this._menuItem.submenu,{id:e}):!1;if(!t)throw new Error("Menu item was not found");this.activateSubView(t.id)},openFullpagePreview:function(e){e&&e.preventDefault();var t=i.open(),r=new this._extraDeps({site_id:a.site.id,data:JSON.stringify(this._editableModel)});r.save({success:function(e,r){t.document.write(n.isObject(r)?r:r.responseText)}})},close:function(e){e&&e.preventDefault();var t=this.model.hasChanges(this._editableModel);this._draftsModelXHR&&this._draftsModelXHR.abort(),this._draftsModel&&(this._draftsModel.destroy({wait:!0,success:n.bind(function(){this.model.unset("draft_id",{silent:!0})},this)}),this._draftsModel.clear()),s.removeBeforeunload(),s[t?"setBeforeunload":"removeBeforeunload"]("There are unsaved changes")||this.remove()},publishAvailable:function(){this.$(".publish, .save-draft").attr("disabled",!this.editableVars.saveUnchangedModel&&!this._checkPostPublishAvailable())},savePost:t.noop,autoSave:t.noop,_renderNotification:t.noop,_HTML2ShortCodes:function(e){var r,i=e.body,s=e.shortcodes_ids||{},o=t("<p>").html(i);return console.log("original",i),t(".rm-shortcode",o).each(function(e,n){r=t(this).data("rm-shortcode-id"),t(this).replaceWith("["+r+"]")}),i=o.html(),console.log("before",i),n.each(s,function(e,t){console.log("iter",t,e),i=i.replace("["+t+"]",e)}),console.log("after",i),e.body=i,e},_shortCodes2HTML:function(e){var t=e.body,r=e.shortcodes||{};return console.log("_shortCodes2HTML",e),n.each(n.keys(r),function(e){t=t.replace(e,r[e])}),e.body=t,e},_createEditableModel:function(){return new r.Model(this._shortCodes2HTML(this.model.toJSON()))},_beforeSave:function(){var e=this._editableModel.toJSON(),t=this._editableModel.get("cta");n.isEmpty(t)||(t.shareText=t.title+" {{link}} "+t.source,this._editableModel.set("cta",t)),this._editableModel.set("debug_data",{body:e.body,shortcodes:e.shortcodes,shortcodes_ids:e.shortcodes_ids}),this._editableModel.set(this._HTML2ShortCodes(this._editableModel.toJSON()))},_initRouterEvents:function(){var e="route:"+this._menuItem.id;if(!this._menuItem)return;return this.watchEvent(this.router,e,"render",this),this._menuItem.submenu&&n.each(this._menuItem.submenu,function(t){this.watchEvent(this.router,e+":"+t.id,"activateSubView",this)},this),this},_getExtraFilters:function(){return{is_mobile:o.isMobile,components:this.options.components,showSendToDraft:this.model.entity==="realDraft"||this.model.isNew()}},_showCloseInformer:function(){(new f({type:"info",headline:"Unsaved changes",message:"There are unsaved changes",context:this,controls:[{name:"Close anyway",callback:this.router.trigger("route:closePost")},{name:"Save changes",callback:this.saveToDrafts},{name:"Cancel",callback:function(){}}]})).render()},_checkPostPublishAvailable:function(){if(this.editableVars.saveUnchangedModel)return!0;var e=this._editableModel.get("type"),t=this._editableModel.toJSON(),r=this._editableModel.toJSON(),i;delete r.is_edited,i=this.model.changedAttributes(r);if(!i)return!1;if(n.size(i)===2&&i.headline===""&&i.twitter_headline)return!1;if(!this.model.hasChanges(this._editableModel)&&!this.individualVars.buttonEnabled)return!1;if(i.original_url&&!s.is_valid_url(i.original_url))return!1;if(t.original_url&&t.post_url&&t.twitter_share&&!t.shorten_url)return!1;if(n.isEmpty(t.subpages))return console.log("This post can't be saved because no subpages were selected."),!1;if(!i.type)return!n.isEmpty(i);if(i.type==="page")return!!t.headline||!!t.body||!!t.twitter_headline;if(i.type==="image")return!!t.image;if(i.type==="video")return!!t.video;if(i.type==="poll")return!!t.poll_url;if(i.type==="slideshow")return t.slideshow&&t.slideshow.slides.length},_validateEditData:function(){return!0},_refuseExecute:function(){this.router.trigger("route:closePost")},_wrpRemove:function(){},_getSubMenuItems:function(){return{submenu:[{id:"content",title:"Main Content","default":!0,order:0,type:1,url:"#",ico:"main-content",visibility:!0,login_required:!0},{id:"cta",title:"Call to Action",url:"#",ico:"cta",order:1,type:1,visibility:a.site.is_roar||a.site.is_roar_subsite,login_required:!0},{id:"advanced",title:"Advanced",url:"#",ico:"advanced",order:2,type:1,visibility:!0,login_required:!0},{id:"stats",title:"Stats",order:3,type:1,url:"#",ico:"stats",visibility:n.indexOf(["edit-post"],this.id)!==-1,login_required:!0}]}}})}),define("whitelabel/widgets/views/edit_mode/add",["require","jquery","underscore","whitelabel/widgets/views/edit_mode/base","whitelabel/widgets/models/post","settings","utils/whitelabel_settings","widgets/views/informer","widgets/models/draft_real"],function(e){var t=e("jquery"),n=e("underscore"),r=e("whitelabel/widgets/views/edit_mode/base"),i=e("whitelabel/widgets/models/post"),s=e("settings"),o=e("utils/whitelabel_settings"),u=e("widgets/views/informer"),a=e("widgets/models/draft_real");return r.extend({id:"add-post",individualVars:{title:"Add Post",sendButton:"Publish",saveDraft:"Save Draft",showSiteSelector:!1,magnetIcon:!1,showSendToDraft:!0,showOpenPreview:!0,allowEmptySubpages:!0},events:function(){var e=r.prototype.events,t=n.isFunction(e)?e():e;return n.extend({},t,{"mouseenter .redactor_body .media-image":"showControls","mouseleave .redactor_body .media-image":"showControls","click .redactor_body .media-image .remove":"removeImg"})},initialize:function(){this._menuItem.type=~~s.user.can("publish_post",!0),this._menuItem.url=s.user.can("publish_post",!0)?"#":o.path_to_sites+"{{site_name}}/?add-post=1",this.model=new i,this._draftsModel=new a,this.constructor.__super__.initialize.apply(this,arguments),this.router.trigger("add:menu_item",this._menuItem),this.watchEvent(this.router,"route:editPost route:restickStory","removeSilently",this)},autoSave:n.debounce(function(){var e=this._getDraftsData(!0);this._draftsModel.isNew()&&(e.is_auto_action=!0),this._draftsModelXHR=this._draftsModel.save(e,{wait:!0,success:n.bind(function(){this._draftsModelXHR=null,this.notify("Saved")},this)})},2500),showControls:function(e){this.$(".user-prefs").toggle(e.type==="mouseenter")},removeImg:function(e){t(".media-image").remove()},_getDraftsData:function(e){var t=n.extend(this._editableModel.toJSON(),{site_id:s.site.id,user_id:s.user.id});return s.is_community_site&&s.submissionsSites&&(t.submissions_for=[s.submissionsSites[0]]),e?this._HTML2ShortCodes(t):t},saveDraft:function(e){var r=this._getDraftsData();this._draftsModelXHR&&this._draftsModelXHR.abort(),this._draftsModel.save(r,{success:n.bind(function(){window.location.href=s.is_community_site?"/community/"+s.site.name+"/drafts":"/core/drafts/"},this),error:n.bind(function(e,r){var i="There was an error saving your post. Please check your internet connection.",s=t.parseJSON(r.responseText);n.isObject(s)&&(i=s.error),this.notify({message:i,timeout:2500,type:"error",safeHTML:!1})},this)})},savePost:function(){var e=this;if(!this._checkPostPublishAvailable())return!1;if(!this.model.isNew())return;var r=n.extend(this._editableModel.toJSON(),{site_id:s.site.id,created_ts:0});r.timestamp_changed||(r.created_ts=0),s.is_community_site&&(r.submissions_for=[s.parent_site.id]),s.user.can("edit_site",!0)&&!s.is_community_site&&(r.repost_to_community=!0),this._draftsModelXHR&&this._draftsModelXHR.abort(),this._draftsModel.destroy(),this.model.save(r,{wait:!0,success:function(t){console.log("data-------",t.toJSON()),e.remove(),window.location.href=t.get("post_url")},error:function(e,n){var r=JSON.parse(n.responseText).error;(new u({type:"error",message:r,headline:"Oops!!!",controls:[{name:"OK",callback:t.noop}]})).render()}})},_wrpRemove:function(){this.deactivateMenuItem()},_createEditableModel:function(){var e=n.find(s.site.pages,function(e){return e.url.toLowerCase()==="news"}),t={created_ts:Math.round(+(new Date)/1e3),subpages:this.options.subpageId?[this.options.subpageId]:e&&!s.is_comunity_site?[e.id]:[0],order:s.is_community_site?1:4};return this._editableModel=this.model.clone(),this._editableModel.set(t),this._editableModel},_getEditAbleOptions:function(){return{model:this._editableModel,collection:this.collection,components:s.is_community_site?["submissions"]:[],individualVars:{air:!0,hidePostOn:!s.user.can("edit_post",!0,s.parent_site),allowEmptySubpages:!0,titleAsTitle:!s.is_community_site},router:this.router,id:"edit-mode-inner",className:"edit-mode-inner"}},_menuItem:{title:"Add Post",id:"addPost",order:3,type:1,url:"#",visibility:!0,login_required:!0,activate_events:["addPost"]}})}),define("whitelabel/widgets/views/edit_mode/edit",["require","backbone","jquery","underscore","whitelabel/widgets/views/edit_mode/base","widgets/views/informer","widgets/models/post","widgets/models/draft_real","settings"],function(e){var t=e("backbone"),n=e("jquery"),r=e("underscore"),i=e("whitelabel/widgets/views/edit_mode/base"),s=e("widgets/views/informer"),o=e("widgets/models/post"),u=e("widgets/models/draft_real"),a=e("settings");return i.extend({id:"edit-post",initialize:function(){this.constructor.__super__.initialize.apply(this,arguments),this.watchEvent(this.router,"route:editPost","addMenuItem",this),this.watchEvent(this.router,"route:addPost route:restickStory","removeSilently",this),this._draftsModel=new u},individualVars:{title:"Edit Post",sendButton:"Save",saveDraft:"Save Draft",showSiteSelector:!0,titleAsTitle:!a.is_community_site,showOpenPreview:!0,allowEmptySubpages:!0},isEdit:!0,addMenuItem:function(e,t){this.router.trigger("add:menu_item",this._menuItem,!0,t),t&&this.setActive(t)},autoSave:r.debounce(function(){if(!this._editableModel||this.editableVars.isPlainDraft)return;var e=this._HTML2ShortCodes(this._editableModel.toJSON()),t=this._draftsModel.isNew();if(this.editableVars.isLinkedPost||this.editableVars.isRealDraft)return this.model.save(e,{wait:!0,success:r.bind(function(){this.notify("Saved")},this)});t&&(e.linked_to_post_id=e.id,e.is_auto_action=!0),e.draft_id?e.id=e.draft_id:e.id=null,this._draftsModelXHR=this._draftsModel.save(e,{wait:!0,success:r.bind(function(n,r){this._draftsModelXHR=null,console.log(r);if(t||e.draft_id!==r.draft_id)this.model.save({draft_id:r.id,link_draft:!0},{success:function(e,t){e.unset("link_draft",{silent:!0})}}),this._editableModel.set({draft_id:r.id},{silent:!0});this.notify("Saved")},this)})},2500),_renderNotification:function(){var e=this.model.has("draft_id"),t=this.model.has("linked_to_post_id"),n={type:"info",context:this};if(!e&&!t)return;e&&r.extend(n,{headline:"",message:"This post has changes saved in drafts. Would you like to see them?",controls:[{name:"Yes",callback:this._getAutoSavedData},{name:"No",callback:this._resetAutoSavedData}]}),t&&r.extend(n,{headline:"",message:"You are editing a published post",controls:[{name:"Ok",callback:this._setPostModel}]}),(new s(n)).render()},_setPostModel:function(){this._postModel=new o},_resetAutoSavedData:function(){this._draftsModel.set({id:this.model.get("draft_id"),site_id:a.site.id,user_id:a.user.id}),this._draftsModel.destroy({error:r.bind(function(){this._draftsModel.clear()},this)}),this._editableModel.unset("draft_id",{silent:!0}),this.model.unset("draft_id",{silent:!0})},_getAutoSavedData:function(){this._draftsModel.set({id:this.model.get("draft_id"),site_id:a.site.id,user_id:a.user.id}),this._draftsModel.fetch({wait:!0,success:r.bind(function(e,t){delete t.id,this._editableModel.set(t,{silent:!0}).trigger("reload:content"),this.publishAvailable()},this),error:r.bind(function(){this._editableModel.unset("draft_id",{silent:!0}),this._draftsModel.clear({silent:!0})},this)})},saveDraft:function(){this.savePost(!0)},savePost:function(e){function f(t,n){o&&u._publishGplus.trigger("share:update_url",t),t.trigger.call(t,"saved",t,!0),t.entity==="realDraft"?e?u.remove():window.location.href=n.post_url:window.location.reload()}function l(e,t,r){var i=JSON.parse(t.responseText).error;(new s({type:"error",message:i,headline:"Oops!!!",controls:[{name:"OK",callback:n.noop}]})).render()}e=r.isBoolean(e)?e:!1;if(!this.editableVars.saveUnchangedModel&&!this._checkPostPublishAvailable())return!1;var t=this._editableModel.toJSON(),i=this.model.changedAttributes(t),o=this._editableModel.get("googleplus_share"),u=this;e||(this.model.set({publish_after_edit:!0,order:a.is_community_site?1:4}),a.is_community_site&&this.model.set("submissions_for",[a.parent_site.id]));if(r.isEmpty(i)&&!this.editableVars.saveUnchangedModel)return!1;!this.options.check_duplicates&&this.model.set("check_duplicates",this.options.check_duplicates),o&&u._publishGplus.trigger("share:post",this._editableModel),delete t.link_draft,this._draftsModelXHR&&this._draftsModelXHR.abort();if(this.editableVars.isLinkedPost)return t.draft_id=t.id,t.id=t.linked_to_post_id,t.linked_to_post_id=null,this._postModel.save(t,{success:f,error:l});t.linked_to_post_id=null,this.model.save(t||{},{wait:!0,success:f,error:l})},_wrpRemove:function(){this.router.trigger("remove:menu_item",this._menuItem)},_validateEditDate:function(e){return e instanceof t.Model},_createEditableModel:function(){var e=i.prototype._createEditableModel.apply(this,arguments).toJSON();return e.original_headline&&(e.headline=e.original_headline,e.post_url=e.original_post_url),new t.Model(e)},_getEditAbleOptions:function(){var e=["reposts"],t=~r.indexOf(["realDraft"],this.model.entity),n=~r.indexOf(["draft"],this.model.entity),i=t||n,s=t?!0:!!this.individualVars.saveUnchangedModel,o=this.individualVars||this._defaultIndividualVars;return t&&(o.sendButton="Publish",o.saveDraft="Save"),a.is_community_site&&e.unshift("submissions"),{model:this._editableModel,collection:this._editableModel.collection,router:this.router,id:"edit-mode-inner",className:"edit-mode-inner",individualVars:o,components:e,check_duplicates:!0,saveUnchangedModel:s,isDraft:i,isRealDraft:i,isPlainDraft:n,isLinkedPost:i&&this.model.has("linked_to_post_id")}},_menuItem:{title:"Edit Post",id:"editPost",order:3,type:1,url:"#",visibility:!0,login_required:!0},_defaultIndividualVars:{sendButton:"Save",saveDraft:"Save Draft"}})}),define("whitelabel/widgets/models/restick",["require","whitelabel/widgets/models/post","underscore"],function(e){var t=e("whitelabel/widgets/models/post"),n=e("underscore");return t.extend({parse:function(e){var t=/\d{1,2}\/\d{1,2}\/\d{2,4}/;return e.tags=n.filter(e.tags,function(e){return!t.test(e)}),e}})}),define("whitelabel/widgets/views/edit_mode/restick",["require","backbone","jquery","underscore","utils/navigate","settings","widgets/views/informer","whitelabel/widgets/models/restick","whitelabel/widgets/views/edit_mode/base"],function(e){var t=e("backbone"),n=e("jquery"),r=e("underscore"),i=e("utils/navigate"),s=e("settings"),o=e("widgets/views/informer"),u=e("whitelabel/widgets/models/restick"),a=e("whitelabel/widgets/views/edit_mode/base");return a.extend({id:"restick-story",initialize:function(){a.prototype.initialize.apply(this,arguments),this.watchEvent(this.router,"route:restickStory","addMenuItem",this),this.watchEvent(this.router,"route:addPost route:editPost","removeSilently",this)},individualVars:{title:"Repost",sendButton:"Repost",saveDraft:"Save Draft",showSiteSelector:!0,showSelector:!0,magnetIcon:!0,buttonEnabled:!0},isRestick:!0,showSiteSelector:!0,addMenuItem:function(){this.router.trigger("add:menu_item",this._menuItem,!0)},_wrpRemove:function(){this.deactivateMenuItem(),this.router.trigger("remove:menu_item",this._menuItem)},saveDraft:function(){},savePost:function(e){var n=this._editableModel.get("subpages"),i=r.keys(n),s=this._editableModel.toJSON();e=r.isUndefined(e),n&&i.length?(delete s.subpages,r.each(i,function(i){i=+i;var o=r.extend(s,{stick_to_site_id:i,subpages:n[i]});this.saveSingleModel(new t.Model(o),e)},this)):this.saveSingleModel(new t.Model(s),e)},saveSingleModel:function(e,t){var n=this,i=e.get("googleplus_share"),u=r.find(s.sites,function(t){return t.id===e.get("stick_to_site_id")})||s.sites[0];e.unset("copies").unset("similarTo").set({check_duplicates:t,stick_to_site_name:u.name,stick_to_site_id:u.id,from_subpage:e.has("from_subpage")?e.get("from_subpage"):s.site.activePage&&s.site.activePage.id}),e.url="/core/feeds/post/reposts/"+e.get("stick_to_site_id")+"/"+e.id,i&&n._publishGplus.trigger("share:post",e),e.save(null,{success:function(e,t){n._afterPublish.apply(n,arguments),n.model.set({resticks_to_cnt:t.repost_cnt,reactions_counter:t.reactions_counter}),n.notify({message:'This is now live on your "<a href="{{#community_site}}/community/{{name}}{{/community_site}}{{^community_site}}/{{/community_site}}" target="_blank">{{title}}</a>" site.',messageVars:{name:u.name,title:u.title,community_site:u.id!==s.parent_site.id}}),n.router.trigger("route:closePost")},error:function(e,t){var r=n._errorData(t);(new o({message:r.error,type:r.type,safeHTML:!1,headline:r.headline,controls:r.controls})).render()}})},_createEditableModel:function(){var e=new u(this._shortCodes2HTML(u.prototype.parse(this.model.toJSON())));return e.set("from_subpage",this.model.get("subpages")[0]),e},_afterPublish:function(e){if(e.get("provider_id")===2){var t="https://twitter.com/share?url="+encodeURIComponent(e.get("original_url"))+"&text="+encodeURIComponent(e.get("headline")+" via @"+e.get("author_screen_name"));i.open(t,"Twitter Share","width=665,height=300,left="+(window.outerWidth-660)/2+",top="+(window.outerHeight-300)/2+"resizable=no")}this.remove()},_getEditAbleOptions:function(){return this.individualVars.titleAsTitle=s.is_community_site,{model:this._editableModel,collection:this._editableModel.collection,router:this.router,id:"edit-mode-inner",className:"edit-mode-inner",individualVars:this.individualVars||this._defaultIndividualVars,components:["reposts"],saveUnchangedModel:!0,isRestick:!0}},_errorData:function(e){function s(e){return{400:{type:"error",controls:{name:"OK",callback:n.noop}},403:{headline:"Oops!!!",type:"error",controls:{name:"OK",callback:n.noop}},409:{type:"warning",controls:[{name:"Yes",callback:function(){t.savePost(!1)}},{name:"No",callback:n.noop}]},412:{type:"warning",controls:{name:"OK",callback:n.noop}}}[e]||{}}var t=this,i={context:this,error:JSON.parse(e.responseText).error,type:"info",headline:"Oops",controls:[{name:"OK",callback:n.noop}]};return r.extend(i,s(e.status))},_menuItem:{title:"Restick Post",id:"restickStory",order:4,type:1,url:"#",visibility:!0,login_required:!0}})}),define("libs/backbone/plugins/poststats_tracking",["jquery","backbone","underscore","consts","settings"],function(e,t,n,r,i){function h(e){return e?e:i.widget_settings&&i.widget_settings.referrer?decodeURIComponent(i.widget_settings.referrer):window.location!==window.parent.location?decodeURIComponent(document.referrer):i.widget_settings?document.location.href:document.referrer}function p(){return i.site.activePage&&i.site.activePage.id||0}function d(){var e=i.widget_settings&&i.widget_settings.widget_name?i.widget_settings.widget_name:"";return!e&&i.inEmbed&&(e=i.site.name+"_embed_unit"),e}function v(){var e=window.location.host;return~e.indexOf("beta.rebelmouse.com")||~e.indexOf("rebelmouselabs.com")?i.widget_settings||i.site.embed_settings&&i.site.embed_settings.sharebox?"/static/img/icons/small-star.png?embed":"/static/img/icons/small-star.png?front":i.widget_settings||i.site.embed_settings&&i.site.embed_settings.sharebox?"https://embed-stats.rbl.ms/spacer.gif?stats":"https://frontpage-stats.rbl.ms/spacer.gif?stats"}function m(){return i.site.id}function g(){var e=require("settings").site;return e.is_roar||e.is_roar_subsite?e.is_roar?e.id:e.whitelabel_settings.site_id:!1}var s,o,u,a,f,l,c;return s=function(t,n,r,i,s){var o,u=v();i=i||0;var a=g();a&&s.push("roar_id="+a),[].push.call(s,"permalink="+i,"widget_name="+d(),"subpage_id="+p()),o=[Math.random(),m(),t,n.join(","),r.join(","),s.join(","),encodeURIComponent(h())],u+=o.join("&"),t==="click"?e.ajax({type:"GET",url:u,async:!1}):e(document.body).append(e("<img />",{src:u,style:"display: none"}))},o=function(e,t){var n;i.widget_settings||i.site.paid_features.enterprise?n=["bulk=1","enterprise=1"]:n=["bulk=1"],s("impression",e,t,0,n)},u=function(e,t,n,r,o){var u=e?[e]:[],a=t?[t]:[],f=o?o:[];n=n?n:0,r=r?1:0,!r&&n&&document.referrer&&document.location.href.indexOf(document.referrer)===0&&(r=1),r="seed="+r,f.push(r),(i.widget_settings||i.site.paid_features.enterprise)&&f.push("enterprise=1"),n&&i.user.user_reads_stats&&f.push("user_id="+(i.user.id||0)),s("impression",u,a,n,f)},a=function(e,t,n,r){var i=e?[e]:[],o=t?[t]:[];n=n?n:0,r=r?r:[],s("click",i,o,n,r)},f=function(e,t,n){var r=e?[e]:[],i=t?[t]:[];n=n?n:0,s("mouseover",r,i,n,[])},l=function(e,t,n){var r=e?[e]:[],i=[];n=n?n:0,s("share",r,i,n,["share="+t])},c=function(e,t,n){var r=e?[e]:[],i=t?[t]:[];n<1&&(n=1),s("mouseover_duration",r,i,0,["duration="+n])},function(){this.statsBulkImpressions=o,this.statsImpression=u,this.statsClick=a,this.statsMouseOver=f,this.statsShareClick=l,this.statsMouseOverDuration=c}}),define("libs/backbone/plugins/sitestats_tracking",["jquery","backbone","underscore","consts","settings"],function(e,t,n,r,i){function o(e){return e?e:i.widget_settings&&i.widget_settings.referrer?decodeURIComponent(i.widget_settings.referrer):window.location!==window.parent.location?decodeURIComponent(document.referrer):i.widget_settings?document.location.href:document.referrer}function u(){return i.site.activePage&&i.site.activePage.id||0}function a(){var e=window.location.host;return~e.indexOf("beta.rebelmouse.com")||~e.indexOf("rebelmouselabs.com")?"/static/img/icons/small-star.png?site":"https://site-stats.rbl.ms/spacer.gif?"}function f(){return i.site.id}function l(e){return e.replace(/https?\:\/\/(w+\.)?/i,"")}var s;return s=function(){var t,n,r=[],s=o(),c=l(i.getSiteURL()),h=a();t=[Math.random(),f()+"_"+u(),encodeURIComponent(s)];if(i.site.is_roar||i.site.is_roar_subsite)n=i.site.is_roar?i.site.id:i.site.parent_id,r.push("roar_id="+n);l(s).indexOf(c)===0&&r.push("internal"),t.push(r.length?r.join(","):"-"),h+=t.join("&"),e(document.body).append(e("<img />",{src:h,style:"display: none"}))},function(){this.siteStatsTrack=s}}),define("roar/widgets/views/modal/create_site",["require","underscore","backbone","settings"],function(e){var t=e("underscore"),n=e("backbone"),r=e("settings"),i;return n.View.extend({renderModal:function(){var e=window.location,t="create-profile",n=this.makeInstance(this._extraDeps.CreateSite,{siteCopy:!1,redirect:!0,labels:{create:"Create",display_name:"Create Your Admin Profile:",display_domain:"%s/community/".format(e.hostname),display_site_placeholder:"SiteName",placeholder:"Profile Name"}}).render();n.$el.addClass(t),n.on("add:site",function(t){window.location.href="%s//%s/community/%s".format(e.protocol,e.hostname,t.get("name"))}),this.$el.prepend(n.el)},render:function(){var e=r.site.whitelabel_settings&&r.site.whitelabel_settings.iden!=="garyvee",t=r.is_autorized&&r.is_custom_domain&&(r.is_whitelabel_site||r.site&&r.site.is_roar)&&!r.user_site;return this.lazyLoad(t&&!e,{CreateSite:"widgets/views/light_site_create"},this.renderModal)(),this}})}),define("hgn!whitelabel/widgets/templates/ios_top_banner",["hogan_with_filters"],function(e){function n(){return t.render.apply(t,arguments)}var t=new e.Template(function(e,t,n){n=n||"";var r=n+"",i=this;return r+='<div class="mobile-banner download-ios-app ',r+=i.v(i.f("mobileTheme",e,t,0)),r+='">',r+="\n"+n,r+='    <a href="#" class="close-banner"><i class="icon-remove"></i></a>',r+="\n"+n,r+='    <div class="ios-dodo-logo"></div>',r+="\n"+n,r+='    <div class="promo-section"><strong>Dodo for iPhone</strong> Available in the App Store </div>',r+="\n"+n,r+='    <a href="https://itunes.apple.com/us/app/the-dodo/id892926735?mt=8" class="btn uppercase">Open</a>',r+="\n"+n,r+="</div> ",r+="\n",r},"",e);return n.template=t,n}),define("utils/storage_factory",["underscore"],function(e){function n(e){try{return e in window&&window[e]!==null}catch(t){return!1}}function r(t){var r=[t,"Storage"].join(""),i=n(r),s={},o,u;return i?(o=window[r],e.each(["key","removeItem","clear"],function(t){s[t]=e.isFunction(o[t])?e.bind(o[t],o):o[t]})):(u={},s=e.extend(s,{key:function(t){return e.keys(u)[t]},removeItem:function(e){return delete u[e]},clear:function(){return u={}}})),s=e.extend(s,{getItem:function(e){var t=i?o.getItem(e):u.hasOwnProperty(e)?u[e]:undefined;try{return t?JSON.parse(t):undefined}catch(n){return t}},setItem:function(e,t){var n=JSON.stringify(t);return i?o.setItem(e,n):u[e]=n}}),s}var t={};return{getInstance:function(e){return e in t?t[e]:(t[e]=new r(e),t[e])}}}),define("utils/local_storage",["utils/storage_factory"],function(e){return e.getInstance("local")}),define("whitelabel/widgets/views/ios_top_banner",["require","jquery","backbone","underscore","settings","hgn!whitelabel/widgets/templates/ios_top_banner","utils/device","utils/local_storage"],function(e){var t=e("jquery"),n=e("backbone"),r=e("underscore"),i=e("settings"),s=e("hgn!whitelabel/widgets/templates/ios_top_banner"),o=e("utils/device"),u=e("utils/local_storage");return n.View.extend({events:{"click .mobile-banner .close-banner":"closeBanner","click .download-ios-app-link":"trackViewClick"},closeBanner:function(e){e&&e.preventDefault(),this.$(".mobile-banner").hide(),this.storageKey="hide_mobile_banner",u.setItem(this.storageKey,!0)},trackViewClick:function(e){e&&e.preventDefault(),this.storageKey="click-dodo-download",u.setItem(this.storageKey,!0)},render:function(){return u.getItem("hide_mobile_banner")||this.$el.html(s()),this}})}),define("whitelabel/apps/frontpage",["require","backbone","whitelabel/apps/base","underscore","jquery","settings","whitelabel/managers/content","whitelabel/managers/subsite","whitelabel/widgets/views/community_header","whitelabel/widgets/routers/frontpage","utils","bootstrap","whitelabel/widgets/views/edit_mode/add","whitelabel/widgets/views/edit_mode/edit","whitelabel/widgets/views/edit_mode/restick","libs/backbone/plugins/poststats_tracking","libs/backbone/plugins/sitestats_tracking","roar/widgets/views/modal/create_site","utils/device","whitelabel/widgets/views/ios_top_banner"],function(e){var t=e("backbone"),n=e("whitelabel/apps/base"),r=e("underscore"),i=e("jquery"),s=e("settings"),o=e("whitelabel/managers/content"),u=e("whitelabel/managers/subsite"),a=e("whitelabel/widgets/views/community_header"),f=e("whitelabel/widgets/routers/frontpage"),l=e("utils"),c=e("bootstrap"),h=e("whitelabel/widgets/views/edit_mode/add"),p=e("whitelabel/widgets/views/edit_mode/edit"),d=e("whitelabel/widgets/views/edit_mode/restick"),v=e("libs/backbone/plugins/poststats_tracking"),m=e("libs/backbone/plugins/sitestats_tracking"),g=e("roar/widgets/views/modal/create_site"),y=e("utils/device"),b=e("whitelabel/widgets/views/ios_top_banner"),w;return w=n.extend({defaults:{scrollDebounce:15,resizeDebounce:15},initialize:function(){function e(){this.$el.addClass("noscroll")}function t(){this.$el.removeClass("noscroll")}this.router=f,n.prototype.initialize.apply(this,arguments),this.router.on("route:editPost route:addPost route:restickStory",e,this).on("route:closePost",t,this).on("route:addPost route:editPost route:restickStory route:closePost",r.debounce(r.bind(this.editModeOn,this),300),this).on("route:closePost",r.debounce(r.bind(this.editModeOff,this),300),this),s.is("autorized")&&this.router.on("route:openFrontSubpage route:loadFrontPage route:loadPostPage",this._addFollowButton,this),this.$win=this.$win||i(window),this.siteStatsTrack()},editModeOn:function(){this.editModeToggle(!0)},editModeOff:function(){this.editModeToggle(!1)},editModeToggle:function(e){this.$el.toggleClass("edit-mode-opened",e),this.$(".post-edit-mode").toggle(e),this.$(".main").toggle(!e)},listenToWidthChanges:function(){this.$win.on("message",function(e){var t=e.originalEvent.data.split(":"),n=i(".ios-wrapper");t[0]==="parent-width"&&(n.css({width:t[1]+"px"}),window.parent.postMessage&&window.parent.postMessage("set-frame-width:"+t[1],"*"))})},listenToScroll:function(){this.$win.off("scroll.global").on("scroll.global",r.debounce(r.bind(this._notifyScroll,this),this.defaults.scrollDebounce)),this.$win.off("resize.global").on("resize.global",r.debounce(r.bind(this.windowResize,this),this.defaults.resizeDebounce)),this.windowResize()},_notifyScroll:function(e){this.router.trigger.call(this.router,"window:scroll",e,this.$win.scrollTop(),{width:this._winWidth,height:this._winHeight})},getFollowParentElement:function(){if(!this.isFollowPossible())throw new Error("Wrong situation to follow section");return s.is_post_page?this.$(".author-module .author-name"):s.is_community_site?this.$(".community-site-name"):(s.is_mobile?this.$(".follow-panel-mobile"):this.$(".follow-panel")).show()},isFollowPossible:function(){return!s.use_river||!s.is("autorized")?!1:s.site.owner_id!==s.user.id},_addFollowButton:function(){this.lazyLoad(this.isFollowPossible(),{FollowButton:"widgets/views/follow_button"},function(){var e={router:this.router,site_id:s.is_post_page?c.post.original_user_subsite_id:undefined},t=this.makeInstance(this._extraDeps.FollowButton,e).render(),n=this.getFollowParentElement();s.is_post_page?t.$el.insertAfter(n[0]):n.append(t.el)})(),this.$(".site-widget").show()},windowResize:function(e){this._winHeight=this.$win.height(),this._winWidth=this.$win.width(),this._notifyScroll(e)},render:function(){var e=s.is_community_site&&!s.is_post_page?u:o,n,r,i;return this.makeInstance(e,{el:this.$(".main")[0],router:this.router}).render(),n=this.makeInstance(h,{router:this.router}),s.is_community_site&&this.makeInstance(a,{el:this.$(".member-section")[0],router:this.router}).render(),i=this.makeInstance(d,{router:this.router,post_page:s.is_post_page}),r=this.makeInstance(p,{router:this.router,post_page:s.is_post_page}),this.$(".post-edit-mode").append(n.el).append(i.el).append(r.el),this.listenToWidthChanges(),y.isiOS&&!s.user.is_autorized&&this.makeInstance(b,{el:this.$(".mobile-top-banner")[0]}).render(),this.listenToScroll(),this.makeInstance(g,{el:this.el}).render(),t.history.start({pushState:!!history.pushState,root:l.getRootPath()}),history.pushState||f.navigate(window.location.pathname,{trigger:!0}),this}}),v.call(t.View.prototype),m.call(t.View.prototype),{init:function(){var e=new w;e.render()}}});

</script>

<script type="text/javascript">
(function () {
    var deps = ['underscore', 'jquery', 'backbone', 'settings'];
    var userLoggedIn = false;
    deps.push(userLoggedIn ? 'text!/core/users/settings.js/?v=' + (+new Date) : 'settings');
    require(deps, function (_, $, BB, Settings, userSettings) {
        userSettings = _.isObject(userSettings) ? userSettings : JSON.parse(userSettings);
        console.log('SETTING---', Settings, userLoggedIn, Settings.site.id);

        userSettings.parent_site &&  
            (Settings.submissionsSites = [userSettings.parent_site]);

        Settings = $.extend(true, Settings, userSettings || {});
        Settings.user || (Settings.user = {});
        Settings.user.is_autorized = userLoggedIn;

        _.each(Settings.sites, function (site) {
            site.id === Settings.site.id && _.extend(Settings.site, site);
        });
        define('richeditor', function () {
            return Settings.parent_site ? Settings.parent_site.permissions.publish_post : false;
        });

        
        
            define('bootstrap', function () {
                var bootstrap = {};
                bootstrap['providers_info'] =  {"tw_feed": "dodo", "flickr_feed_id": null, "linkedin_feed_id": null, "tw_feed_id": 1604444052, "flickr_feed": null, "title": "The Dodo", "insta_feed": "thedodo", "about_html": "For the love of animals.", "linkedin_feed": null, "linkedin_feed_url": null, "insta_feed_id": 649735629, "stocktwits_feed_id": null, "is_deactivated": false, "fb_feed": null, "logo": "https://pbs.twimg.com/profile_images/529307205648924672/Z_vpRp8u_normal.jpeg", "googleplus_feed_id": null, "stocktwits_feed": null, "id": 376394, "googleplus_feed": null} ;
                return bootstrap;
            });
            require(['whitelabel/apps/frontpage'], function (app) {
                app.init();
            });
        
        
    });
})();
</script>


    

    

    
    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-42508512-1', 'thedodo.com');
      ga('create', 'UA-26184524-1', {'name': 'b', 'cookieDomain': 'rebelmouse.com'});
      ga('require', 'displayfeatures');
      ga('send', 'pageview');
      ga('b.require', 'displayfeatures');
      ga('b.send', 'pageview');

    </script>
    <script>
    require(['jquery', 'jquery.scrollDepth'], function ($) {
        $(function() {
            $.scrollDepth({
               userTiming: false,
               pixelDepth: false
            });
        });
    });
    </script>
    


    


    

<script type="text/javascript">
  var _sf_async_config = { uid: 53443, domain: 'thedodo.com', useCanonical: true };
  (function() {
    function loadChartbeat() {
      window._sf_endpt = (new Date()).getTime();
      var e = document.createElement('script');
      e.setAttribute('language', 'javascript');
      e.setAttribute('type', 'text/javascript');
      e.setAttribute('src','//static.chartbeat.com/js/chartbeat.js');
      document.body.appendChild(e);
    };
    var oldonload = window.onload;
    window.onload = (typeof window.onload != 'function') ?
      loadChartbeat : function() { oldonload(); loadChartbeat(); };
  })();
</script>


    
    <script>
    require(['jquery', 'jquery.scrollDepth'], function ($) {
        $(function() {
            $.scrollDepth({
                userTiming: false,
                pixelDepth: false
            });
        });
    });
    </script>
    <script>
    require(['jquery', 'underscore', 'sprintf'], function ($, _, formatter) {
        $.noConflict(), _.noConflict();
        String.prototype.format = function () {
            return formatter.vsprintf(this, Array.prototype.slice.call(arguments));
        };
    });
    </script>
    

<script language="javascript" type="text/javascript" src="//static.chartbeat.com/js/chartbeat.js"></script></body></html>