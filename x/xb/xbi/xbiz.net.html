<!--The following is the downloaded HTML source of the xbiz.net privacy policy that was archived on 2017-07-14.
 Please check the original snapshot on the Wayback Machine (https://web.archive.org/web/20170714132301id_/https%3A//www.xbiz.net/index.php%3Fc%3Dhelp.privacy) for the most accurate reproduction.-->

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head>

			<title>XBIZ.net - The Adult Industry Social Network</title>
		<meta name="description" content="XBIZ.net is the leading social network for the adult entertainment industry.">
	

	

	<meta content="text/html; charset=utf-8" http-equiv="content-type">
	<meta name="keywords" content="adult industry news, adult webmaster resources, adult industry jobs, adult entertainment business, adult entertainment industry, porn industry, porn business, adult webmasters, adult industry resources, adult message boards">
	<meta name="author" content="XBIZ.net">
	<meta name="robots" content="INDEX,NOFOLLOW">
	<meta name="RATING" content="RTA-5042-1996-1400-1577-RTA">


	<!--
		YUI CSS File
		2.3.1 -- we are using modified 2.3.1 reset-fonts-grids.css
		2.5.1 -- must be updated accordingly before use
	-->
	<link rel="stylesheet" type="text/css" href="/yui-2.6.0/build/reset-fonts-grids/reset-fonts-grids.css">
	<link rel="stylesheet" type="text/css" href="/yui-2.6.0/build/assets/skins/sam/skin.css">
	<link rel="stylesheet" type="text/css" href="/yui-2.6.0/build/datatable/assets/skins/sam/datatable.css">

	<!--
	<link rel="stylesheet" type="text/css" href="/yui-2.3.1/build/calendar/assets/skins/sam/calendar.css">
	<link rel="stylesheet" type="text/css" href="/yui/build/container/assets/skins/sam/container.css">
	-->


	<!--
		Site CSS
	-->
	<link rel="stylesheet" type="text/css" href="/css/base.css?2016.09.06">
	
	<!--
		Google Package
	-->
	<!--script type="text/javascript" src="http://maps.google.com/maps?file=api&v=2&key="></script-->


	<!--
		YAHOO User Interface
		Order matters, script with no dependency should go first
	-->
	<script async="" src="//www.google-analytics.com/analytics.js"></script><script type="text/javascript" src="/yui-2.6.0/build/yahoo-dom-event/yahoo-dom-event.js"></script>
	<script type="text/javascript" src="/yui-2.6.0/build/connection/connection-min.js"></script>
	<script type="text/javascript" src="/yui-2.6.0/build/dragdrop/dragdrop-min.js"></script>


	<script type="text/javascript" src="/yui-2.6.0/build/element/element-beta-min.js"></script>
	<script type="text/javascript" src="/yui-2.6.0/build/button/button-min.js"></script>
	<script type="text/javascript" src="/yui-2.6.0/build/container/container-min.js"></script>
	<script type="text/javascript" src="/yui-2.6.0/build/menu/menu-min.js"></script>
	<script type="text/javascript" src="/yui-2.6.0/build/cookie/cookie-min.js"></script>
	<script type="text/javascript" src="/yui-2.6.0/build/json/json-min.js"></script>

	


		<script type="text/javascript" src="/js/jquery-1.9.1.min.js"></script>
	<script type="text/javascript" src="/js/jquery-migrate-1.2.1.min.js"></script>
	<script type="text/javascript" src="/js/bootstrap-custom.min.js"></script>
	
		<script type="text/javascript" src="/assets/tinymce/4.5.7/tinymce.min.js"></script>

	
	<script type="text/javascript" src="/js/base.js?2016.09.06"></script>
	<!--script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script-->
	<!--script type="type/javascript" src="/js/jquery.elastic-1.6.js"></script-->
	<!--script type="text/javascript" src="/js/jquery.autogrow.js"></script-->

	<script type="text/javascript" src="/assets/jquery.slimscroll/1.3.8/jquery.slimscroll.min.js"></script>
	<script type="text/javascript" src="/assets/jquery.qtip.custom/3.0.3/jquery.qtip.min.js"></script>
	<link href="/assets/jquery.qtip.custom/3.0.3/jquery.qtip.min.css" rel="stylesheet">
	<script type="text/javascript" src="/js/src/like.js"></script>


	
		
	

				<script type="text/javascript" src="/js/autoresize.jquery.min.js"></script>
	
</head>
<body class="yui-skin-sam">


<div id="header" class="header-hd-alt"></div>


<div id="doc4" class="yui-t2">
	<div id="hd">


		<div class="top">
			
			<a href="/" class="logo" alt="XBIZ.net" name="page_top_anchor"></a>
		</div>


		<div id="header-menu-container" data-spy="affix" data-offset-top="114">
		<div id="header-menu">
			

			<div class="access">
									<a href="/index.php?c=user.signup_pre">Sign Up</a> |
					<a href="/index.php?c=user.login">Login</a>
							</div>


			
		</div>
		</div>

	</div><!-- /hd -->



	

	<div id="bd">


<div class="section-wrapper ">
	<div class="section-hd">
		<div class="right"></div>
		<div class="left"><h1>Privacy</h1></div>
	</div>
	
	<div class="section-bd extra-padding">
			
			<div style="font-size: 24px; color: #777; margin-bottom: 8px; color: #000000;">
				Privacy Policy
			</div>

			Your privacy is important to Adnet Media (XBIZ™).  This privacy statement provides information about the personal information that Adnet Media collects on this website, and the ways in which personal information is used.
			<br><br>
			
			<div class="p_title">Personal information collection</div>
			<div class="p_body">
				Adnet Media collects information that you provide for the purpose of registering and using this website.
			</div>
			
			
			<div class="p_title">Using personal information</div>
			<div class="p_body">
				Adnet Media uses personal information to:
			</div>
			<div class="p_body">
				<ul>
					<li>display user profile information accessible to registered users only;</li>
					<li>notify you about information that may be of interest to you;</li>
					<li>personalize this website for you;</li>
					<li>administer this website;</li>
					<li>enable your access to and use of this website�s services;</li>
				</ul>
			</div>
			<div class="p_body">
				In addition to the disclosures reasonably necessary for the purposes identified elsewhere above, Adnet Media may disclose your personal information to the extent that it is required to do so by law, in connection with any legal proceedings or prospective legal proceedings, and in order to establish, exercise or defend its legal rights.
			</div>
			
			
			
			<div class="p_title">Cookie</div>
			<div class="p_body">
				Adnet Media uses cookies to store user preferences.
			</div>
			
			
			<div class="p_title">Disclosure of information</div>
			<div class="p_body">
				Adnet Media does not disclose personal information to any other organization.
			</div>
			
			
			<div class="p_title">Secure you data</div>
			<div class="p_body">
				Adnet Media takes technical and organisational precautions to prevent the loss, misuse or alteration of your personal information. Information relating to electronic transactions entered into via this website is protected by encryption technology.
			</div>
			
			
			<div class="p_title">Updating this statement</div>
			<div class="p_body">
				Adnet Media may update this privacy policy by posting a new version on this website.  Please check this page occasionally to ensure you are familiar with any changes.
			</div>


			<div class="p_title">Children's Privacy</div>
			<div class="p_body">
				We do not knowingly collect personal data from children since use of this website by children is strictly prohibited.
			</div>
		    
			
			<div class="p_title">Other websites</div>
			<div class="p_body">
				This website contains links to other websites. Adnet Media is not responsible for the privacy policies or practices of any third party.
			</div>


			<div class="p_title">Contact Adnet Media</div>
			<div class="p_body">
				If you have any questions about this privacy policy, please contact us: 
			</div>
			<div class="p_body">
				Adnet Media
				<br>5042 Wilshire Blvd, #487
				<br>Los Angeles, CA 90036, USA
				<br>(310) 820-0228
				<br><a href="mailto:privacy@xbiz.com">privacy@xbiz.net</a>
			</div>
	</div><!-- /section-bd -->
	
	<div class="section-ft"><div class="right"></div><div class="left"></div></div>
</div><!-- /section-wrapper -->


<style>
.p_title { font-weight:bold; }
.p_body { margin:5px 10px 10px; }
	.p_body ul {}
	.p_body li { list-style:disc; margin-left:30px; }
</style>
	</div><!-- /bd -->
</div><!-- /doc4 -->


<div id="footer">
	<div class="clear"></div>
	<div class="inner">
		<div>
			<div class="external">
				<a href="http://www.asacp.org">ASACP</a> /
				<a href="http://www.freespeechcoalition.com">FSC</a> /
				<a href="http://www.rtalabel.org">RTA</a> /
				<a href="http://www.womeninadult.com">WIA</a>
			</div>

			<div class="nav">
				<a href="/index.php">Home</a> |
				<a href="/index.php?c=community.list_users_search_engine&amp;letter=a">Member Profiles</a> |
				<a href="/index.php?c=home.ad_intro">Advertise</a> |
				<a href="/index.php?c=help.privacy">Privacy Policy</a> |
				<a href="/index.php?c=help.tou">Terms of Use</a> |
				<a href="/index.php?c=help.about">About</a> |
				<a href="/index.php?c=help.contact">Contact</a>
			</div>
		</div>

		<div class="legal">
			Copyright © 2017 Adnet Media. All Rights Reserved. XBIZ is a trademark of Adnet Media.
		</div>

		<div class="legal">
			Reproduction in whole or in part in any form or medium without written permission is prohibited.
		</div>
	</div>
</div><!-- /ft -->





<!--
	Google Analytics
-->
<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-996077-14', 'auto');
	ga('send', 'pageview');
</script>






<style>
html { background:#dfdfdf url('/img/base/html_bg.gif') left 65px repeat-x; height:100%; } /* without defining HTML, footer will not stay at the bottom */
body { line-height:138.5%; font-family:arial,verdana,sans-serif; background:transparent; height:auto; }


#xbiz_toolbar .inner { width:795px; }
#xbiz_toolbar .select_wrapper { margin-left:630px; }


#hd { width:785px; margin-left:auto; margin-right:auto; }
#hd #header-menu-container { width: 785px; }
#bd { width:785px; margin-left:auto; margin-right:auto; }

#footer { background:none; height:82px; margin-top:-110px; }
#footer .inner { width:795px; margin-left:auto; margin-right:auto; text-align:left; }
	#footer .nav { padding:10px 10px 5px 15px; color:#888; font-size:12px; }
	#footer .nav a { margin:0 3px; line-height:16px; color:#777; text-decoration:none; }
	#footer .external { padding:10px 15px 5px 10px; float:right; color:#bbb; font-size:11px; }
	#footer .external a { color:#999; text-decoration:none; }
	#footer .legal { padding:0px 18px; line-height:13px; color:#aaa; font-size:11px; }


#header { height:65px; background:url('/img/base/hd_alt.png') top repeat-x; }
#hd div.top { height:55px; background:url('/img/logo/logo.gif') no-repeat; }
#hd div.top .logo { float:left; display:inline-block; width:180px; height:55px; }
#hd div.top .ad { display:none; visibility:hidden; }
#hd .access { color:#fff; float:right; font-weight:bold; margin-top:-30px; }
#hd .access a { color:#ccc; }

#doc4 { min-height:100%; margin-top:-65px; }
	#hd { height:65px; width:785px; }
	#bd { min-height:100%; margin-top:-101px; padding-top:116px; padding-bottom:100px; }

</style>


<!--
	page specific logic
-->



<script type="text/javascript">

/*
	make all textarea autoResize
*/
$(document).ready(function(){
	$(function() {
		if($('textarea').not('.tinymce').length){

			if($().autoResize) {
				$('textarea').not('.tinymce').autoResize({

					// On resize:
				    onResize : function() {
				        $(this).css({opacity:0.8});
				    },

					// After resize:
				    animateCallback : function() {
				        $(this).css({opacity:1});
				    },

					// Quite slow animation:
				    animateDuration : 300,

				    // More extra space:
				    extraSpace : 40
				});
			}
		}
	});
});




/*
	There need two way to trigger the events
	- by <element class=className>
		this doesn't work for page code attached to the DOM after page loaded
	- by <element onclick="javascript_function();">
		this doesn't separate html from javascript
*/


YAHOO.namespace("xbiz.container");



/*
	replypost-trigger is attached to multiple elements
	only one panel is created for all triggers
*/
var replypostElements = YAHOO.util.Dom.getElementsByClassName('replypost-trigger', 'a');

for (i=0; i<replypostElements.length; i++){
	YAHOO.util.Event.addListener(replypostElements[i], "click", replypostTrigger);
}

function replypostTrigger(e){

	if (!YAHOO.xbiz.container.siteReplypost) {
		YAHOO.xbiz.container.siteReplypost =
			new YAHOO.widget.Panel("siteReplypost",
										{
											width: "700px",
											fixedcenter: true,
											draggable: true,
											modal: true,
											zindex:4,
											visible: false
										}
									);
		var closeKey = new YAHOO.util.KeyListener(document, { keys:27 },
										  { fn:YAHOO.xbiz.container.siteReplypost.hide,
											scope:YAHOO.xbiz.container.siteReplypost,
											correctScope:true }, "keyup" );
		YAHOO.xbiz.container.siteReplypost.cfg.queueProperty("keylisteners", closeKey);

		// the following part can not be initiate ONCE
		// other wise the attached onsubmit event WILL FAIL the second time

		YAHOO.xbiz.container.siteReplypost.setHeader("Reply on User's Profile");
		YAHOO.xbiz.container.siteReplypost.setBody(
			"<form name=replypost_form id=replypost_form method=post action='index.php?c=home.add_replypost'>"
			+ "<input type=hidden name=c value='home.add_replypost'>"
			+ "<input type=hidden name=to_user_id id=replypost_to_user_id value=''>"
			+ "<div class=field>"
				+ "<label width=100>Comment:</label>"
				+ "<div width=450 align=left>"
					+ "<textarea name=post id=replypost_post class=textarea></textarea>"
					+ "<p id=replypost_post_error class=min>Comment can not be empty</p>"
				+ "</div>"
			+ "</div>"
			+ "<div class=field>"
				+ "<input type=submit class='button submit' value='Send'>"
				+ "&nbsp;&nbsp;&nbsp;"
				+ "<input type=button class=button value='Cancel' onclick='YAHOO.xbiz.container.siteReplypost.hide(); YAHOO.util.Event.preventDefault(event);'>"
			+ "</div>"
			+ "</form>"

			+ "<div id=replypost_response_box class=min>"
			+ "</div>"
		);

		YAHOO.xbiz.container.siteReplypost.render(document.body);
	}

	YAHOO.xbiz.container.siteReplypost.show();

	// alt of <a> contains the to_user_id
	var el = YAHOO.util.Event.getTarget(e);
	var alt = el.getAttribute('alt');

	var replypost_form = document.getElementById('replypost_form');
	var replypost_response_box = document.getElementById('replypost_response_box');
	replypost_response_box.className = 'min';
	replypost_form.className = 'no-css';
	replypost_form.to_user_id.value = alt;
	replypost_form.post.value = '';

	YAHOO.util.Event.preventDefault(e);
	// YAHOO.util.Event.stopPropagation(e);
}


var handleReplypostFormSuccess = function(o){

	if(o.responseText !== undefined){
		var replypost_response_box = document.getElementById('replypost_response_box');
		replypost_response_box.innerHTML =
			"<div class=field>"
				+ o.responseText
			+ "</div>"
			+ "<div class=field>"
				+ "<input type=button class=button value='Close' onclick='YAHOO.xbiz.container.siteReplypost.hide(); YAHOO.util.Event.preventDefault(event);'>"
			+ "</div>";
	}
};


var handleReplypostFormFailure = function(o){

	if(o.responseText !== undefined){
		var replypost_response_box = document.getElementById('replypost_response_box');
		replypost_response_box.innerHTML =
			"<li>Transaction id: " + o.tId + "</li>"
			+ "<li>HTTP status: " + o.status + "</li>"
			+ "<li>Status code: " + o.statusText + "</li>";
	}
};


var replypostFormCallback = {
	success:handleReplypostFormSuccess,
	failure:handleReplypostFormFailure,
	argument:['foo','bar']
};


YAHOO.util.Event.addListener('replypost_form', "submit", function(e){

	YAHOO.util.Event.preventDefault(e);

	// validate the form
	var replypost_post = document.getElementById('replypost_post');
	var replypost_to_user_id = document.getElementById('replypost_to_user_id');

	var replypost_post_error = document.getElementById('replypost_post_error');

	replypost_post_error.className = replypost_post.value.match(/\S/) ? 'min' : 'pf-error';

	if( replypost_post_error.className=='min' )
	{
		// hide the form
		document.getElementById('replypost_form').className = 'min';

		// show the response box with loading indicator
		var replypost_response_box = document.getElementById('replypost_response_box');
		replypost_response_box.innerHTML = "<div class=loading></div>";
		replypost_response_box.className = "no-css";

		// send requests
		var sURL = 'xhr.php';
		var postData = 'c=home.add_replypost'
			+ "&to_user_id=" + encodeURIComponent(replypost_to_user_id.value)
			+ "&post=" + encodeURIComponent(replypost_post.value);
		YAHOO.util.Connect.asyncRequest('POST', sURL, replypostFormCallback, postData);
	}

});


/*
	confirm-trigger is attached to multiple elements
	as many panels as the number of triggers are created, not efficient
*/
var confirmElements = YAHOO.util.Dom.getElementsByClassName('confirm-trigger', 'a');

for (i=0; i<confirmElements.length; i++){
	YAHOO.util.Event.addListener(confirmElements[i], "click", confirmTrigger);
}

function confirmTrigger(e){

	if (!YAHOO.xbiz.container.siteConfirm) {
		YAHOO.xbiz.container.siteConfirm =
			new YAHOO.widget.Panel("siteConfirm",
										{
											width: "500px",
											fixedcenter: true,
											draggable: true,
											modal: true,
											zindex:4,
											visible: false
										}
									);
		var closeKey = new YAHOO.util.KeyListener(document, { keys:27 },
										  { fn:YAHOO.xbiz.container.siteConfirm.hide,
											scope:YAHOO.xbiz.container.siteConfirm,
											correctScope:true }, "keyup" );
		YAHOO.xbiz.container.siteConfirm.cfg.queueProperty("keylisteners", closeKey);
	}

	var el = YAHOO.util.Event.getTarget(e);
	var alt = el.getAttribute('alt');

	YAHOO.xbiz.container.siteConfirm.setHeader("&nbsp;");
	YAHOO.xbiz.container.siteConfirm.setBody(
		"<div class=field>" + alt + "</div>"
		+ "<div class=field>"
			+ "<input type=button class=button value=Yes onclick=\"document.location.href='" + el.href + "'\">"
			+ "&nbsp;&nbsp;&nbsp;"
			+ "<input type=button class=button value=No onclick='YAHOO.xbiz.container.siteConfirm.hide(); YAHOO.util.Event.preventDefault(event);'>"
		+ "</div>"
	);

	YAHOO.xbiz.container.siteConfirm.render(document.body);

	YAHOO.xbiz.container.siteConfirm.show();

	YAHOO.util.Event.preventDefault(e);
	// YAHOO.util.Event.stopPropagation(e);
}


/*
	mod-report-trigger is attached to multiple elements
	only one panel is created for all triggers
*/
var reportElements = YAHOO.util.Dom.getElementsByClassName('mod-report-trigger', 'a');

for (i=0; i < reportElements.length; i++){
	YAHOO.util.Event.addListener(reportElements[i], "click", reportTrigger);
}

function reportTrigger(e){

	if (!YAHOO.xbiz.container.siteMessage) {
		YAHOO.xbiz.container.siteMessage =
			new YAHOO.widget.Panel("siteReport",
			{
				width: "700px",
				fixedcenter: true,
				draggable: true,
				modal: true,
				zindex:4,
				visible: false
			}
		);
		var closeKey = new YAHOO.util.KeyListener(document, { keys:27 },
			  { fn:YAHOO.xbiz.container.siteMessage.hide,
				scope:YAHOO.xbiz.container.siteMessage,
				correctScope:true }, "keyup" );
		YAHOO.xbiz.container.siteMessage.cfg.queueProperty("keylisteners", closeKey);

		// the following part can not be initiate ONCE
		// other wise the attached onsubmit event WILL FAIL the second time

		YAHOO.xbiz.container.siteMessage.setHeader("Moderator Report");
		YAHOO.xbiz.container.siteMessage.setBody(
			"<form name=message_form id=mod_report_form method=post action='index.php?c=home.add_mod_report'>"
			+ "<input type=hidden name=c value='home.add_mod_report'>"
			+ "<input type=hidden name=id id=report_id value=''>"
			+ "<input type=hidden name=user_id id=report_user_id value=''>"
			+ "<input type=hidden name=type id=report_type value=''>"
			+ "<div class=field>"
				+ "<label width=100>Alert Who:</label>"
				+ "<div width=450 align=left>"
					+ "<select name='to_user' id='report_to_user'> "
					 	+ "<option value='member'>Member only</option>"
					 	+ "<option value='member_admin'>Member & Admin</option>"
					 	+ "<option value='admin'>Admin only</option>"
				 	+ "</select>"
					+ "<p id=report_to_user_error class=min>Please select receiver</p>"
				+ "</div>"
			+ "</div>"
			+ "<div class=field>"
				+ "<label width=100>Message:</label>"
				+ "<div width=450 align=left>"
					+ "<textarea name=post id=report_post class=textarea style='height:200px;'></textarea>"
					+ "<p id=report_post_error class=min>Message can not be empty</p>"
				+ "</div>"
			+ "</div>"
			+ "<div class=field>"
				+ "<input type=submit class='button submit' value='Send'>"
				+ "&nbsp;&nbsp;&nbsp;"
				+ "<input type=button class=button value='Cancel' onclick='YAHOO.xbiz.container.siteMessage.hide(); YAHOO.util.Event.preventDefault(event);'>"
			+ "</div>"
			+ "</form>"

			+ "<div id=report_response_box class=min>"
			+ "</div>"
		);

		YAHOO.xbiz.container.siteMessage.render(document.body);
	}

	YAHOO.xbiz.container.siteMessage.show();

	// alt of <a> contains the to_user_id
	var el = YAHOO.util.Event.getTarget(e);
	var id = el.getAttribute('data-id');
	var user_id = el.getAttribute('data-user-id');
	var type = el.getAttribute('data-type');

	var report_form = document.getElementById('mod_report_form');
	var report_response_box = document.getElementById('report_response_box');
	report_response_box.className = 'min';
	report_form.className = 'no-css';
	report_form.id.value = id;
	report_form.user_id.value = user_id;
	report_form.type.value = type;
	report_form.post.value = '';

	YAHOO.util.Event.preventDefault(e);
	// YAHOO.util.Event.stopPropagation(e);
}


var handleReportFormSuccess = function(o){

	if(o.responseText !== undefined){
		var report_response_box = document.getElementById('report_response_box');
		report_response_box.innerHTML =
			"<div class=field>"
				+ o.responseText
			+ "</div>"
			+ "<div class=field>"
				+ "<input type=button class=button value='Close' onclick='YAHOO.xbiz.container.siteMessage.hide(); YAHOO.util.Event.preventDefault(event);'>"
			+ "</div>";
	}
};


var handleReportFormFailure = function(o){

	if(o.responseText !== undefined){
		var report_response_box = document.getElementById('report_response_box');
		report_response_box.innerHTML =
			"<li>Transaction id: " + o.tId + "</li>"
			+ "<li>HTTP status: " + o.status + "</li>"
			+ "<li>Status code message: " + o.statusText + "</li>";
	}
};


var reportFormCallback = {
	success: handleReportFormSuccess,
	failure: handleReportFormFailure,
	argument:['foo','bar']
};


YAHOO.util.Event.addListener('mod_report_form', "submit", function(e){

	// validate the form
	var message_post = document.getElementById('report_post');
	var message_to_user = document.getElementById('report_to_user');

	var message_id = document.getElementById('report_id');
	var message_user_id = document.getElementById('report_user_id');
	var message_type = document.getElementById('report_type');

	//var message_to_user_error = document.getElementById('report_to_user_error');
	var message_post_error = document.getElementById('report_post_error');

	message_post_error.className = message_post.value.match(/\S/) ? 'min' : 'pf-error';

	if( message_post_error.className == 'min' )
	{
		// hide the form
		document.getElementById('mod_report_form').className = 'min';

		// show the response box with loading indicator
		var message_response_box = document.getElementById('report_response_box');
		message_response_box.innerHTML = "<div class=loading></div>";
		message_response_box.className = "no-css";

		// send requests
		var sURL = 'xhr.php';
		var postData = 'c=home.add_mod_report'
			+ "&to_user=" + encodeURIComponent(message_to_user.value)
			+ "&post=" + encodeURIComponent(message_post.value)
			+ "&id=" + encodeURIComponent(message_id.value)
			+ "&reported_user_id=" + encodeURIComponent(message_user_id.value)
			+ "&type=" + encodeURIComponent(message_type.value);
		YAHOO.util.Connect.asyncRequest('POST', sURL, reportFormCallback, postData);
	}

	YAHOO.util.Event.preventDefault(e);
});
/* end mod-report */



/*
	ban-user-trigger
*/
var reportElements = YAHOO.util.Dom.getElementsByClassName('ban-user-trigger', 'a');

for (i=0; i < reportElements.length; i++){
	YAHOO.util.Event.addListener(reportElements[i], "click", banTrigger);
}


function cannotBanTrigger(obj, e){

	e.preventDefault();

	if (!YAHOO.xbiz.container.cannotBan) {
		YAHOO.xbiz.container.cannotBan =
			new YAHOO.widget.Panel("cannotBan",
			{
				width: "500px",
				fixedcenter: true,
				draggable: true,
				modal: true,
				zindex:4,
				visible: false
			}
		);
		var closeKey = new YAHOO.util.KeyListener(document, { keys:27 },
			  { fn:YAHOO.xbiz.container.cannotBan.hide,
				scope:YAHOO.xbiz.container.cannotBan,
				correctScope:true }, "keyup" );
		YAHOO.xbiz.container.cannotBan.cfg.queueProperty("keylisteners", closeKey);
	}

	var el = $(obj);
	var alt = el.attr('alt');

	YAHOO.xbiz.container.cannotBan.setHeader("&nbsp;");
	YAHOO.xbiz.container.cannotBan.setBody(
		"<div class=field>" + alt + "</div>"
		+ "<div class=field>"
			+ "<input type=button class=button value=OK onclick='YAHOO.xbiz.container.cannotBan.hide(); YAHOO.util.Event.preventDefault(event);'>"
		+ "</div>"
	);

	YAHOO.xbiz.container.cannotBan.render(document.body);

	YAHOO.xbiz.container.cannotBan.show();

	YAHOO.util.Event.preventDefault(e);
	// YAHOO.util.Event.stopPropagation(e);
}

function banTrigger(e){

	if (!YAHOO.xbiz.container.banUser) {
		YAHOO.xbiz.container.banUser =
			new YAHOO.widget.Panel("banUser",
			{
				width: "700px",
				fixedcenter: true,
				draggable: true,
				modal: true,
				zindex:4,
				visible: false
			}
		);
		var closeKey = new YAHOO.util.KeyListener(document, { keys:27 },
			  { fn:YAHOO.xbiz.container.banUser.hide,
				scope:YAHOO.xbiz.container.banUser,
				correctScope:true }, "keyup" );
		YAHOO.xbiz.container.banUser.cfg.queueProperty("keylisteners", closeKey);

		// the following part can not be initiate ONCE
		// other wise the attached onsubmit event WILL FAIL the second time

		YAHOO.xbiz.container.banUser.setHeader("Ban User");
		YAHOO.xbiz.container.banUser.setBody(
			"<form name=ban_form id=ban_form method=post action='index.php?c=home.ban_user'>"
			+ "<input type=hidden name=c value='home.ban_user'>"
			+ "<input type=hidden name=banned_user_id id=banned_user_id value=''>"

			+ "<div class=field>"
				+ "<label width=100>Explanation:</label>"
				+ "<div width=450 align=left>"
					+ "<textarea name=post id=ban_post class=textarea style='height:200px;'></textarea>"
					+ "<p id=ban_post_error class=min>Message can not be empty</p>"
				+ "</div>"
			+ "</div>"
			+ "<div class=field>"
				+ "<input type=submit class='button submit' value='Submit'>"
				+ "&nbsp;&nbsp;&nbsp;"
				+ "<input type=button class=button value='Cancel' onclick='YAHOO.xbiz.container.banUser.hide(); YAHOO.util.Event.preventDefault(event);'>"
			+ "</div>"
			+ "</form>"

			+ "<div id=ban_response_box class=min>"
			+ "</div>"
		);

		YAHOO.xbiz.container.banUser.render(document.body);
	}

	YAHOO.xbiz.container.banUser.show();


	// alt of <a> contains the to_user_id
	var el = YAHOO.util.Event.getTarget(e);
	var user_id = el.getAttribute('data-user-id');

	var report_form = document.getElementById('ban_form');
	var report_response_box = document.getElementById('ban_response_box');
	report_response_box.className = 'min';
	report_form.className = 'no-css';
	report_form.banned_user_id.value = user_id;
	report_form.post.value = '';

	YAHOO.util.Event.preventDefault(e);
	// YAHOO.util.Event.stopPropagation(e);
}


var handleBanFormSuccess = function(o){

	if(o.responseText !== undefined){
		var ban_response_box = document.getElementById('ban_response_box');
		ban_response_box.innerHTML =
			"<div class=field>"
				+ o.responseText
			+ "</div>"
			+ "<div class=field>"
				+ "<input type=button class=button value='Close' onclick='YAHOO.xbiz.container.banUser.hide(); YAHOO.util.Event.preventDefault(event);'>"
			+ "</div>";
	}
};


var handleBanFormFailure = function(o){

	if(o.responseText !== undefined){
		var ban_response_box = document.getElementById('ban_response_box');
		ban_response_box.innerHTML =
			"<li>Transaction id: " + o.tId + "</li>"
			+ "<li>HTTP status: " + o.status + "</li>"
			+ "<li>Status code message: " + o.statusText + "</li>";
	}
};

var banFormCallback = {
	success: handleBanFormSuccess,
	failure: handleBanFormFailure,
	argument:['foo','bar']
};


YAHOO.util.Event.addListener('ban_form', "submit", function(e){

	// validate the form
	var post = document.getElementById('ban_post');

	var banned_user_id = document.getElementById('banned_user_id');

	//var message_to_user_error = document.getElementById('report_to_user_error');
	var message_post_error = document.getElementById('ban_post_error');

	message_post_error.className = post.value.match(/\S/) ? 'min' : 'pf-error';

	if( message_post_error.className == 'min' )
	{
		// hide the form
		document.getElementById('ban_form').className = 'min';

		// show the response box with loading indicator
		var message_response_box = document.getElementById('ban_response_box');
		message_response_box.innerHTML = "<div class=loading></div>";
		message_response_box.className = "no-css";

		// send requests
		var sURL = 'xhr.php';
		var postData = 'c=home.ban_user'
			+ "&post=" + encodeURIComponent(post.value)
			+ "&banned_user_id=" + encodeURIComponent(banned_user_id.value)
		;
		YAHOO.util.Connect.asyncRequest('POST', sURL, banFormCallback, postData);
	}

	YAHOO.util.Event.preventDefault(e);
});

/* end ban-user-trigger */


/*
	message-trigger is attached to multiple elements
	only one panel is created for all triggers
*/
var messageElements = YAHOO.util.Dom.getElementsByClassName('message-trigger', 'a');

for (i=0; i<messageElements.length; i++){
	YAHOO.util.Event.addListener(messageElements[i], "click", messageTrigger);
}

function messageTrigger(e){

	if (!YAHOO.xbiz.container.siteMessage) {
		YAHOO.xbiz.container.siteMessage =
			new YAHOO.widget.Panel("siteMessage",
										{
											width: "700px",
											fixedcenter: true,
											draggable: true,
											modal: true,
											zindex:4,
											visible: false
										}
									);
		var closeKey = new YAHOO.util.KeyListener(document, { keys:27 },
										  { fn:YAHOO.xbiz.container.siteMessage.hide,
											scope:YAHOO.xbiz.container.siteMessage,
											correctScope:true }, "keyup" );
		YAHOO.xbiz.container.siteMessage.cfg.queueProperty("keylisteners", closeKey);

		// the following part can not be initiate ONCE
		// other wise the attached onsubmit event WILL FAIL the second time

		YAHOO.xbiz.container.siteMessage.setHeader("Send a Private Message");
		YAHOO.xbiz.container.siteMessage.setBody(
			"<form name=message_form id=message_form method=post action='index.php?c=home.add_message'>"
			+ "<input type=hidden name=c value='home.add_message'>"
			+ "<input type=hidden name=to_user_id id=message_to_user_id value=''>"
			+ "<div class=field>"
				+ "<label width=100>Title:</label>"
				+ "<div width=450 align=left>"
					+ "<input type=text class=text name=title id=message_title>"
					+ "<p id=message_title_error class=min>Title can not be empty</p>"
				+ "</div>"
			+ "</div>"
			+ "<div class=field>"
				+ "<label width=100>Body:</label>"
				+ "<div width=450 align=left>"
					+ "<textarea name=post id=message_post class=textarea style='height:200px;'></textarea>"
					+ "<p id=message_post_error class=min>Message can not be empty</p>"
					+ "<div style='font-size: 11px'><img src='/img/icon/bullet_orange.gif' align='absmiddle'><a href='https://www.xbiz.net/index.php?c=help.tou'>Terms of Use</a></div>"
				+ "</div>"
			+ "</div>"
			+ "<div class=field>"
				+ "<input type=submit class='button submit' value='Send'>"
				+ "&nbsp;&nbsp;&nbsp;"
				+ "<input type=button class=button value='Cancel' onclick='YAHOO.xbiz.container.siteMessage.hide(); YAHOO.util.Event.preventDefault(event);'>"
			+ "</div>"
			+ "</form>"

			+ "<div id=message_response_box class=min>"
			+ "</div>"
		);

		YAHOO.xbiz.container.siteMessage.render(document.body);
	}

	YAHOO.xbiz.container.siteMessage.show();

	// alt of <a> contains the to_user_id
	var el = YAHOO.util.Event.getTarget(e);
	var alt = el.getAttribute('alt');

	var message_form = document.getElementById('message_form');
	var message_response_box = document.getElementById('message_response_box');
	message_response_box.className = 'min';
	message_form.className = 'no-css';
	message_form.to_user_id.value = alt;
	message_form.title.value = '';
	message_form.post.value = '';

	YAHOO.util.Event.preventDefault(e);
	// YAHOO.util.Event.stopPropagation(e);
}


var handleMessageFormSuccess = function(o){

	if(o.responseText !== undefined){
		var message_response_box = document.getElementById('message_response_box');
		message_response_box.innerHTML =
			"<div class=field>"
				+ o.responseText
			+ "</div>"
			+ "<div class=field>"
				+ "<input type=button class=button value='Close' onclick='YAHOO.xbiz.container.siteMessage.hide(); YAHOO.util.Event.preventDefault(event);'>"
			+ "</div>";
	}
};


var handleMessageFormFailure = function(o){

	if(o.responseText !== undefined){
		var message_response_box = document.getElementById('message_response_box');
		message_response_box.innerHTML =
			"<li>Transaction id: " + o.tId + "</li>"
			+ "<li>HTTP status: " + o.status + "</li>"
			+ "<li>Status code message: " + o.statusText + "</li>";
	}
};


var messageFormCallback = {
	success:handleMessageFormSuccess,
	failure:handleMessageFormFailure,
	argument:['foo','bar']
};


YAHOO.util.Event.addListener('message_form', "submit", function(e){

	// validate the form
	var message_title = document.getElementById('message_title');
	var message_post = document.getElementById('message_post');
	var message_to_user_id = document.getElementById('message_to_user_id');

	var message_title_error = document.getElementById('message_title_error');
	var message_post_error = document.getElementById('message_post_error');

	message_title_error.className = message_title.value.match(/\S/) ? 'min' : 'pf-error';
	message_post_error.className = message_post.value.match(/\S/) ? 'min' : 'pf-error';

	if( message_title_error.className=='min'
		&& message_post_error.className=='min' )
	{
		// hide the form
		document.getElementById('message_form').className = 'min';

		// show the response box with loading indicator
		var message_response_box = document.getElementById('message_response_box');
		message_response_box.innerHTML = "<div class=loading></div>";
		message_response_box.className = "no-css";

		// send requests
		var sURL = 'xhr.php';
		var postData = 'c=home.add_message'
			+ "&to_user_id=" + encodeURIComponent(message_to_user_id.value)
			+ "&title=" + encodeURIComponent(message_title.value)
			+ "&post=" + encodeURIComponent(message_post.value);
		YAHOO.util.Connect.asyncRequest('POST', sURL, messageFormCallback, postData);
	}

	YAHOO.util.Event.preventDefault(e);
});



/*
	endorsement-trigger is attached to multiple elements
	only one panel is created for all triggers
*/
var endorsementElements = YAHOO.util.Dom.getElementsByClassName('endorsement-trigger', 'a');

for (i=0; i < endorsementElements.length; i++){
	YAHOO.util.Event.addListener(endorsementElements[i], "click", checkEndorsement);
}

function checkEndorsement(e)
{
	YAHOO.util.Event.preventDefault(e);

	var el = YAHOO.util.Event.getTarget(e);
	var alt = el.getAttribute('alt');

	if(alt === 'has') {
		endorsedTrigger(e);
	} else {
		endorsementTrigger(e);
	}
}

function endorsedTrigger(e){

	if (!YAHOO.xbiz.container.siteEndorsed) {
		YAHOO.xbiz.container.siteEndorsed =
			new YAHOO.widget.Panel("siteEndorsed",
										{
											width: "500px",
											fixedcenter: true,
											draggable: true,
											modal: true,
											zindex:4,
											visible: false
										}
									);
		var closeKey = new YAHOO.util.KeyListener(document, { keys:27 },
										  { fn:YAHOO.xbiz.container.siteEndorsed.hide,
											scope:YAHOO.xbiz.container.siteEndorsed,
											correctScope:true }, "keyup" );
		YAHOO.xbiz.container.siteEndorsed.cfg.queueProperty("keylisteners", closeKey);
	}

	//var el = YAHOO.util.Event.getTarget(e);
	//var alt = el.getAttribute('alt');

	YAHOO.xbiz.container.siteEndorsed.setHeader("&nbsp;");
	YAHOO.xbiz.container.siteEndorsed.setBody(
		"<div class=field>You have already endorsed this member.</div>"
		+ "<div class=field>"
			+ "<input type=button class=button value=Close onclick='YAHOO.xbiz.container.siteEndorsed.hide(); YAHOO.util.Event.preventDefault(event);'>"
		+ "</div>"
	);

	YAHOO.xbiz.container.siteEndorsed.render(document.body);

	YAHOO.xbiz.container.siteEndorsed.show();

	YAHOO.util.Event.preventDefault(e);
	// YAHOO.util.Event.stopPropagation(e);
}


function endorsementTrigger(e){

	if (!YAHOO.xbiz.container.siteEndorsement) {
		YAHOO.xbiz.container.siteEndorsement =
			new YAHOO.widget.Panel("siteEndorsement",
										{
											width: "700px",
											fixedcenter: true,
											draggable: true,
											modal: true,
											zindex:4,
											visible: false ,
											close: false
										}
									);
		var closeKey = new YAHOO.util.KeyListener(document, { keys:27 },
										  { fn:YAHOO.xbiz.container.siteEndorsement.hide,
											scope:YAHOO.xbiz.container.siteEndorsement,
											correctScope:true }, "keyup" );
		YAHOO.xbiz.container.siteEndorsement.cfg.queueProperty("keylisteners", closeKey);

		// the following part can not be initiate ONCE
		// other wise the attached onsubmit event WILL FAIL the second time

		YAHOO.xbiz.container.siteEndorsement.setHeader("Give an Endorsement");
		YAHOO.xbiz.container.siteEndorsement.setBody(
			"<form name=endorsement_form id=endorsement_form method=post action='index.php?c=home.add_endorsement'>"
			+ "<input type=hidden name=c value='home.add_endorsement'>"
			+ "<input type=hidden name=to_user_id id=endorsement_to_user_id value=''>"
			+ "<div class=field style='text-align:center; font-size:15px; font-weight:bold; line-height:24px;'>"
				+ "Do you wish to endorse this person?"
			+ "</div>"
			//+ "<div class=field style='text-align:left; margin-left:180px;'>"
			//	+ "<input type=checkbox name=add_endorsement_body onclick=\"if(this.checked){ document.getElementById('endorsement_body_wrapper').className='field'; }else{ document.getElementById('endorsement_body_wrapper').className='field min'; }\"> Add Comment"
			//+ "</div>"
			+ "<div class='field' id=endorsement_body_wrapper>"
				+ "<label>Comment (optional):</label>"
				+ "<div width=450 align=left>"
					+ "<textarea name=body id=endorsement_body class=textarea></textarea>"
					+ "<p id=endorsement_body_error class=min>Body can not be empty</p>"
				+ "</div>"
			+ "</div>"
			+ "<div class=field>"
				+ "<input type=submit class='button submit' value='Submit Endorsement'>"
				+ "&nbsp;&nbsp;&nbsp;"
				+ "<input type=button class=button value='Cancel' onclick='YAHOO.xbiz.container.siteEndorsement.hide(); YAHOO.util.Event.preventDefault(event);'>"
			+ "</div>"
			+ "</form>"

			+ "<div id=endorsement_response_box class=min>"
			+ "</div>"
			+ "<div>&nbsp;</div>"
		);

		YAHOO.xbiz.container.siteEndorsement.render(document.body);
	}

	YAHOO.xbiz.container.siteEndorsement.show();

	// alt of <a> contains the to_user_id
	var el = YAHOO.util.Event.getTarget(e);
	var alt = el.getAttribute('alt');
	var user_id = el.getAttribute('data-user');

	var endorsement_form = document.getElementById('endorsement_form');
	var endorsement_response_box = document.getElementById('endorsement_response_box');
	endorsement_response_box.className = 'min';
	endorsement_form.className = 'no-css';
	endorsement_form.to_user_id.value = user_id;
	endorsement_form.body.value = '';

	YAHOO.util.Event.preventDefault(e);
	// YAHOO.util.Event.stopPropagation(e);
}


var handleEndorsementFormSuccess = function(o){

	if(o.responseText !== undefined){
		var endorsement_response_box = document.getElementById('endorsement_response_box');
		endorsement_response_box.innerHTML =
			"<div class=field>"
				+ o.responseText
			+ "</div>"
			+ "<div class=field>"
				+ "<input type=button class=button value='Close' onclick='YAHOO.xbiz.container.siteEndorsement.hide(); YAHOO.util.Event.preventDefault(event); document.location.href=\"\"'>"
			+ "</div>";
	}
};


var handleEndorsementFormFailure = function(o){

	if(o.responseText !== undefined){
		var endorsement_response_box = document.getElementById('endorsement_response_box');
		endorsement_response_box.innerHTML =
			"<li>Transaction id: " + o.tId + "</li>"
			+ "<li>HTTP status: " + o.status + "</li>"
			+ "<li>Status code: " + o.statusText + "</li>";
	}
};


var endorsementFormCallback = {
	success:handleEndorsementFormSuccess,
	failure:handleEndorsementFormFailure,
	argument:['foo','bar']
};


YAHOO.util.Event.addListener('endorsement_form', "submit", function(e){

	YAHOO.util.Event.preventDefault(e);

	// validate the form
	var endorsement_body = document.getElementById('endorsement_body');
	var endorsement_to_user_id = document.getElementById('endorsement_to_user_id');
	var endorsement_body_error = document.getElementById('endorsement_body_error');
	//endorsement_body_error.className = endorsement_body.value.match(/\S/) ? 'min' : 'pf-error';

	if( endorsement_body_error.className=='min' )
	{
		// hide the form
		document.getElementById('endorsement_form').className = 'min';

		// show the response box with loading indicator
		var endorsement_response_box = document.getElementById('endorsement_response_box');
		endorsement_response_box.innerHTML = "<div class=loading></div>";
		endorsement_response_box.className = "no-css";

		// send requests
		var sURL = 'xhr.php';
		var postData = 'c=home.add_endorsement'
			+ "&to_user_id=" + encodeURIComponent(endorsement_to_user_id.value)
			+ "&body=" + encodeURIComponent(endorsement_body.value);
		YAHOO.util.Connect.asyncRequest('POST', sURL, endorsementFormCallback, postData);
	}
});


/*
	connection-trigger is attached to multiple elements
	only one panel is created for all triggers
*/
var connectionElements = YAHOO.util.Dom.getElementsByClassName('connection-trigger', 'a');

for (i=0; i<connectionElements.length; i++){
	YAHOO.util.Event.addListener(connectionElements[i], "click", connectionTrigger);
}

function connectionTrigger(e){

	if (!YAHOO.xbiz.container.siteConnection) {
		YAHOO.xbiz.container.siteConnection =
			new YAHOO.widget.Panel("siteConnection",
										{
											width: "700px",
											fixedcenter: true,
											draggable: true,
											modal: true,
											zindex:4,
											visible: false
										}
									);
		var closeKey = new YAHOO.util.KeyListener(document, { keys:27 },
										  { fn:YAHOO.xbiz.container.siteConnection.hide,
											scope:YAHOO.xbiz.container.siteConnection,
											correctScope:true }, "keyup" );
		YAHOO.xbiz.container.siteConnection.cfg.queueProperty("keylisteners", closeKey);

		// the following part can not be initiate ONCE
		// other wise the attached onsubmit event WILL FAIL the second time

		YAHOO.xbiz.container.siteConnection.setHeader("Add to My Connections");
		YAHOO.xbiz.container.siteConnection.setBody(
			"<form name=connection_form id=connection_form method=post action='index.php?c=home.add_connection_request'>"
			+ "<input type=hidden name=c value='home.add_connection_request'>"
			+ "<input type=hidden name=to_user_id id=connection_to_user_id value=''>"
			+ "<div class=field>"
				+ "You are about to add this user to your connections."
			+ "</div>"
			+ "<div class=field>"
				+ "<label width=100>Message (Optional):</label>"
				+ "<div width=450 align=left>"
					+ "<textarea name=message id=connection_form_field_message class=textarea></textarea>"
				+ "</div>"
			+ "</div>"
			+ "<div class=field>"
				+ "<input type=submit class='button submit' value='Send Request'>"
				+ "&nbsp;&nbsp;&nbsp;"
				+ "<input type=button class=button value='Cancel' onclick='YAHOO.xbiz.container.siteConnection.hide(); YAHOO.util.Event.preventDefault(event);'>"
			+ "</div>"
			+ "</form>"

			+ "<div id=connection_response_box class=min>"
			+ "</div>"
		);

		YAHOO.xbiz.container.siteConnection.render(document.body);
	}

	YAHOO.xbiz.container.siteConnection.show();

	// alt of <a> contains the to_user_id
	var el = YAHOO.util.Event.getTarget(e);
	var alt = el.getAttribute('alt');

	var connection_form = document.getElementById('connection_form');
	var connection_response_box = document.getElementById('connection_response_box');
	connection_response_box.className = 'min';
	connection_form.className = 'no-css';
	connection_form.to_user_id.value = alt;

	YAHOO.util.Event.preventDefault(e);
	// YAHOO.util.Event.stopPropagation(e);
}


var handleConnectionFormSuccess = function(o){

	if(o.responseText !== undefined){
		var connection_response_box = document.getElementById('connection_response_box');
		connection_response_box.innerHTML =
			"<div class=field>"
				+ o.responseText
			+ "</div>"
			+ "<div class=field>"
				+ "<input type=button class=button value='Close' onclick='YAHOO.xbiz.container.siteConnection.hide(); YAHOO.util.Event.preventDefault(event); document.location.href=\"\"'>"
			+ "</div>";
	}
};


var handleConnectionFormFailure = function(o){

	if(o.responseText !== undefined){
		var connection_response_box = document.getElementById('connection_response_box');
		connection_response_box.innerHTML =
			"<li>Transaction id: " + o.tId + "</li>"
			+ "<li>HTTP status: " + o.status + "</li>"
			+ "<li>Status code: " + o.statusText + "</li>";
	}
};


var connectionFormCallback = {
	success:handleConnectionFormSuccess,
	failure:handleConnectionFormFailure,
	argument:['foo','bar']
};


YAHOO.util.Event.addListener('connection_form', "submit", function(e){

	// validate the form
	var connection_to_user_id = document.getElementById('connection_to_user_id');
	var message = document.getElementById('connection_form_field_message');

	// hide the form
	document.getElementById('connection_form').className = 'min';

	// show the response box with loading indicator
	var connection_response_box = document.getElementById('connection_response_box');
	connection_response_box.innerHTML = "<div class=loading></div>";
	connection_response_box.className = "no-css";

	// send requests
	var sURL = 'xhr.php';
	var postData = 'c=home.add_connection_request'
		+ "&to_user_id=" + encodeURIComponent(connection_to_user_id.value)
		+ "&message=" + encodeURIComponent(message.value);
	YAHOO.util.Connect.asyncRequest('POST', sURL, connectionFormCallback, postData);

	YAHOO.util.Event.preventDefault(e);
});


/*
	invite-trigger is attached to the single element
*/
YAHOO.util.Event.addListener(document.getElementById('invite-trigger'), "click", function(e){

	if (!YAHOO.xbiz.container.siteInvite) {
		YAHOO.xbiz.container.siteInvite =
			new YAHOO.widget.Panel("siteInvite",
										{
											width: "700px",
											fixedcenter: true,
											draggable: true,
											modal: true,
											zindex:4,
											visible: false
										}
									);
		var closeKey = new YAHOO.util.KeyListener(document, { keys:27 },
										  { fn:YAHOO.xbiz.container.siteInvite.hide,
											scope:YAHOO.xbiz.container.siteInvite,
											correctScope:true }, "keyup" );
		YAHOO.xbiz.container.siteInvite.cfg.queueProperty("keylisteners", closeKey);

		// var el = YAHOO.util.Event.getTarget(e);
		// var alt = el.getAttribute('alt');

		// the following part can not be initiate ONCE
		// other wise the attached onsubmit event WILL FAIL the second time

		YAHOO.xbiz.container.siteInvite.setHeader("Invite a Friend");
		YAHOO.xbiz.container.siteInvite.setBody(
			"<form name=invite_form id=invite_form method=post action='index.php?c=home.invite'>"
			+ "<input type=hidden name=c value='home.invite'>"
			+ "<div class=field>"
				+ "<label width=100>Email:</label>"
				+ "<div width=450 align=left>"
					+ "<input type=text class=text name=email id=invite_email>"
					+ "<p id=invite_email_error_empty class=min>Email can not be empty</p>"
					+ "<p id=invite_email_error_invalid class=min>Please verify the email format</p>"
				+ "</div>"
			+ "</div>"
			+ "<div class=field>"
				+ "<label width=100>Message:</label>"
				+ "<div width=450 align=left>"
					+ "<textarea name=message id=invite_message class=textarea></textarea>"
					+ "<p id=invite_message_error class=min>Message can not be empty</p>"
				+ "</div>"
			+ "</div>"
			+ "<div class=field>"
				+ "<input type=submit class='button submit' value='Invite'>"
				+ "&nbsp;&nbsp;&nbsp;"
				+ "<input type=button class=button value='Cancel' onclick='YAHOO.xbiz.container.siteInvite.hide(); YAHOO.util.Event.preventDefault(event);'>"
			+ "</div>"
			+ "</form>"

			+ "<div id=invite_response_box class=min>"
			+ "</div>"
		);

		YAHOO.xbiz.container.siteInvite.render(document.body);
	}

	YAHOO.xbiz.container.siteInvite.show();

	var invite_form = document.getElementById('invite_form');
	var invite_response_box = document.getElementById('invite_response_box');
	invite_response_box.className = 'min';
	invite_form.className = 'no-css';
	invite_form.email.value = '';
	invite_form.message.value= '';
	document.getElementById('invite_email_error_empty').className = 'min';
	document.getElementById('invite_email_error_invalid').className = 'min';
	document.getElementById('invite_message_error').className = 'min';

	YAHOO.util.Event.preventDefault(e);
	// YAHOO.util.Event.stopPropagation(e);
});


var handleInviteFormSuccess = function(o){

	if(o.responseText !== undefined){
		var invite_response_box = document.getElementById('invite_response_box');
		invite_response_box.innerHTML =
			"<div class=field>"
				+ o.responseText
			+ "</div>"
			+ "<div class=field>"
				+ "<input type=button class=button value='Close' onclick='YAHOO.xbiz.container.siteInvite.hide(); YAHOO.util.Event.preventDefault(event);'>"
			+ "</div>";
	}
};


var handleInviteFormFailure = function(o){

	if(o.responseText !== undefined){
		var invite_response_box = document.getElementById('invite_response_box');
		invite_response_box.innerHTML =
			"<li>Transaction id: " + o.tId + "</li>"
			+ "<li>HTTP status: " + o.status + "</li>"
			+ "<li>Status code message: " + o.statusText + "</li>";
	}
};


var inviteFormCallback = {
	success:handleInviteFormSuccess,
	failure:handleInviteFormFailure,
	argument:['foo','bar']
};


YAHOO.util.Event.addListener('invite_form', "submit", function(e){

	// validate the form
	var invite_email = document.getElementById('invite_email');
	var invite_message = document.getElementById('invite_message');

	var invite_email_error_empty = document.getElementById('invite_email_error_empty');
	var invite_email_error_invalid = document.getElementById('invite_email_error_invalid');
	var invite_message_error = document.getElementById('invite_message_error');

	invite_email_error_empty.className = invite_email.value.match(/\S/) ? 'min' : 'pf-error';
	invite_email_error_invalid.className = invite_email.value.match(/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/) ? 'min' : 'pf-error';
	invite_message_error.className = invite_message.value.match(/\S/) ? 'min' : 'pf-error';


	if( invite_email_error_empty.className=='min'
		&& invite_email_error_invalid.className=='min'
		&& invite_message_error.className=='min' )
	{
		// hide the form
		document.getElementById('invite_form').className = 'min';

		// show the response box with loading indicator
		var invite_response_box = document.getElementById('invite_response_box');
		invite_response_box.innerHTML = "<div class=loading></div>";
		invite_response_box.className = "no-css";

		// send requests
		var sURL = 'xhr.php';
		var postData = 'c=home.invite'
			+ "&email=" + encodeURIComponent(invite_email.value)
			+ "&message=" + encodeURIComponent(invite_message.value);
		YAHOO.util.Connect.asyncRequest('POST', sURL, inviteFormCallback, postData);
	}

	YAHOO.util.Event.preventDefault(e);
});









function keep_session_alive(){
	var sUrl = "/xhr.php?c=ping.keep_session_alive";
	var transaction = YAHOO.util.Connect.asyncRequest('GET', sUrl, {
		success: function(o){
			// should not do nothing
		},
		failure: function(o){
			// document.body.style.background = "#f00"; // dark red color if fail to connect
			popAlert("Internet Connection Lost", "<div style='color:#f00; font-weigth:bold;'><img src='/img/icon/exclamation.gif'>If you are working on a form, please save your form data and then refresh this page.</div>");
		}
	}, null);
	setTimeout(keep_session_alive,600000); // every 10 minutes
}
setTimeout(keep_session_alive,600000); // after 10 minutes


function update_session_user_cache(){
	var sUrl = "/xhr.php?c=ping.update_session_user_cache";
	var transaction = YAHOO.util.Connect.asyncRequest('GET', sUrl, {
		success: function(o){
			// should not do nothing
		},
		failure: function(o){
			// document.body.style.background = "#f00"; // dark red color if fail to connect
			popAlert("Internet Connection Lost", "<div style='color:#f00; font-weigth:bold;'><img src='/img/icon/exclamation.gif'>If you are working on a form, please save your form data and then refresh this page.</div>");
		}
	}, null);
	setTimeout(update_session_user_cache,300000); // every 5 minutes
}
setTimeout(update_session_user_cache,300000); // after 5 minutes


//from this point forward, all share functionality for the site
$(document).ready(function(){
	$('#hd-nav #hd-home').click(function(event){
		var target = $(event.target);
		if(target.is('span') && $(target).attr('data-href')){
			window.location = $(target).attr('data-href');
			event.preventDefault();
		}
	});
});


</script>
</body></html>